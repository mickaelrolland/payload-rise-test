"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@payloadcms+db-mongodb@3.43.0_payload@3.43.0";
exports.ids = ["vendor-chunks/@payloadcms+db-mongodb@3.43.0_payload@3.43.0"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/connect.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/connect.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connect: () => (/* binding */ connect)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/defaultBeginTransaction.js\");\n\n\nconst connect = async function connect(options = {\n    hotReload: false\n}) {\n    const { hotReload } = options;\n    if (this.url === false) {\n        return;\n    }\n    if (typeof this.url !== 'string') {\n        throw new Error('Error: missing MongoDB connection URL.');\n    }\n    const urlToConnect = this.url;\n    const connectionOptions = {\n        autoIndex: true,\n        ...this.connectOptions,\n        useFacet: undefined\n    };\n    if (hotReload) {\n        connectionOptions.autoIndex = false;\n    }\n    try {\n        this.connection = (await mongoose__WEBPACK_IMPORTED_MODULE_0__.connect(urlToConnect, connectionOptions)).connection;\n        // If we are running a replica set with MongoDB Memory Server,\n        // wait until the replica set elects a primary before proceeding\n        if (this.mongoMemoryServer) {\n            this.payload.logger.info('Waiting for MongoDB Memory Server replica set to elect a primary...');\n            await new Promise((resolve)=>setTimeout(resolve, 2000));\n        }\n        const client = this.connection.getClient();\n        if (!client.options.replicaSet) {\n            this.transactionOptions = false;\n            this.beginTransaction = (0,payload__WEBPACK_IMPORTED_MODULE_1__.defaultBeginTransaction)();\n        }\n        if (!hotReload) {\n            if (process.env.PAYLOAD_DROP_DATABASE === 'true') {\n                this.payload.logger.info('---- DROPPING DATABASE ----');\n                await mongoose__WEBPACK_IMPORTED_MODULE_0__.connection.dropDatabase();\n                this.payload.logger.info('---- DROPPED DATABASE ----');\n            }\n        }\n        if (this.ensureIndexes) {\n            await Promise.all(this.payload.config.collections.map(async (coll)=>{\n                await this.collections[coll.slug]?.ensureIndexes();\n            }));\n        }\n        if (false) {}\n    } catch (err) {\n        let msg = `Error: cannot connect to MongoDB.`;\n        if (typeof err === 'object' && err && 'message' in err && typeof err.message === 'string') {\n            msg = `${msg} Details: ${err.message}`;\n        }\n        this.payload.logger.error({\n            err,\n            msg\n        });\n        process.exit(1);\n    }\n};\n\n//# sourceMappingURL=connect.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jb25uZWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUNrQjtBQUMzQztBQUNQO0FBQ0EsQ0FBQztBQUNELFlBQVksWUFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw2Q0FBZ0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGdFQUF1QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnREFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsWUFBWSxLQUE0RCxFQUFFLEVBSWpFO0FBQ1QsTUFBTTtBQUNOO0FBQ0E7QUFDQSxxQkFBcUIsS0FBSyxXQUFXLFlBQVk7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2Nvbm5lY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IGRlZmF1bHRCZWdpblRyYW5zYWN0aW9uIH0gZnJvbSAncGF5bG9hZCc7XG5leHBvcnQgY29uc3QgY29ubmVjdCA9IGFzeW5jIGZ1bmN0aW9uIGNvbm5lY3Qob3B0aW9ucyA9IHtcbiAgICBob3RSZWxvYWQ6IGZhbHNlXG59KSB7XG4gICAgY29uc3QgeyBob3RSZWxvYWQgfSA9IG9wdGlvbnM7XG4gICAgaWYgKHRoaXMudXJsID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdGhpcy51cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IG1pc3NpbmcgTW9uZ29EQiBjb25uZWN0aW9uIFVSTC4nKTtcbiAgICB9XG4gICAgY29uc3QgdXJsVG9Db25uZWN0ID0gdGhpcy51cmw7XG4gICAgY29uc3QgY29ubmVjdGlvbk9wdGlvbnMgPSB7XG4gICAgICAgIGF1dG9JbmRleDogdHJ1ZSxcbiAgICAgICAgLi4udGhpcy5jb25uZWN0T3B0aW9ucyxcbiAgICAgICAgdXNlRmFjZXQ6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgaWYgKGhvdFJlbG9hZCkge1xuICAgICAgICBjb25uZWN0aW9uT3B0aW9ucy5hdXRvSW5kZXggPSBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gKGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QodXJsVG9Db25uZWN0LCBjb25uZWN0aW9uT3B0aW9ucykpLmNvbm5lY3Rpb247XG4gICAgICAgIC8vIElmIHdlIGFyZSBydW5uaW5nIGEgcmVwbGljYSBzZXQgd2l0aCBNb25nb0RCIE1lbW9yeSBTZXJ2ZXIsXG4gICAgICAgIC8vIHdhaXQgdW50aWwgdGhlIHJlcGxpY2Egc2V0IGVsZWN0cyBhIHByaW1hcnkgYmVmb3JlIHByb2NlZWRpbmdcbiAgICAgICAgaWYgKHRoaXMubW9uZ29NZW1vcnlTZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMucGF5bG9hZC5sb2dnZXIuaW5mbygnV2FpdGluZyBmb3IgTW9uZ29EQiBNZW1vcnkgU2VydmVyIHJlcGxpY2Egc2V0IHRvIGVsZWN0IGEgcHJpbWFyeS4uLicpO1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpPT5zZXRUaW1lb3V0KHJlc29sdmUsIDIwMDApKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLmNvbm5lY3Rpb24uZ2V0Q2xpZW50KCk7XG4gICAgICAgIGlmICghY2xpZW50Lm9wdGlvbnMucmVwbGljYVNldCkge1xuICAgICAgICAgICAgdGhpcy50cmFuc2FjdGlvbk9wdGlvbnMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYmVnaW5UcmFuc2FjdGlvbiA9IGRlZmF1bHRCZWdpblRyYW5zYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFob3RSZWxvYWQpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5QQVlMT0FEX0RST1BfREFUQUJBU0UgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHRoaXMucGF5bG9hZC5sb2dnZXIuaW5mbygnLS0tLSBEUk9QUElORyBEQVRBQkFTRSAtLS0tJyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdGlvbi5kcm9wRGF0YWJhc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBheWxvYWQubG9nZ2VyLmluZm8oJy0tLS0gRFJPUFBFRCBEQVRBQkFTRSAtLS0tJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlSW5kZXhlcykge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5wYXlsb2FkLmNvbmZpZy5jb2xsZWN0aW9ucy5tYXAoYXN5bmMgKGNvbGwpPT57XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb2xsZWN0aW9uc1tjb2xsLnNsdWddPy5lbnN1cmVJbmRleGVzKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgJiYgdGhpcy5wcm9kTWlncmF0aW9ucykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5taWdyYXRlKHtcbiAgICAgICAgICAgICAgICBtaWdyYXRpb25zOiB0aGlzLnByb2RNaWdyYXRpb25zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBsZXQgbXNnID0gYEVycm9yOiBjYW5ub3QgY29ubmVjdCB0byBNb25nb0RCLmA7XG4gICAgICAgIGlmICh0eXBlb2YgZXJyID09PSAnb2JqZWN0JyAmJiBlcnIgJiYgJ21lc3NhZ2UnIGluIGVyciAmJiB0eXBlb2YgZXJyLm1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBtc2cgPSBgJHttc2d9IERldGFpbHM6ICR7ZXJyLm1lc3NhZ2V9YDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBheWxvYWQubG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgIGVycixcbiAgICAgICAgICAgIG1zZ1xuICAgICAgICB9KTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbm5lY3QuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/connect.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/count.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/count.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   count: () => (/* binding */ count)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\n\nconst count = async function count({ collection: collectionSlug, locale, req, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        options.hint = {\n            _id: 1\n        };\n    }\n    let result;\n    if (useEstimatedCount) {\n        result = await Model.estimatedDocumentCount({\n            session: options.session\n        });\n    } else {\n        result = await Model.countDocuments(query, options);\n    }\n    return {\n        totalDocs: result\n    };\n};\n\n//# sourceMappingURL=count.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jb3VudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFrRDtBQUNHO0FBQ0k7QUFDRjtBQUNoRCxxQ0FBcUMscURBQXFEO0FBQ2pHLFlBQVksMEJBQTBCLEVBQUUsc0VBQWE7QUFDckQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1QixvRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQXVCO0FBQ25EO0FBQ0E7QUFDQSx3QkFBd0Isa0VBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jb3VudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuZXhwb3J0IGNvbnN0IGNvdW50ID0gYXN5bmMgZnVuY3Rpb24gY291bnQoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgbG9jYWxlLCByZXEsIHdoZXJlID0ge30gfSkge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1Z1xuICAgIH0pO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgbGV0IGhhc05lYXJDb25zdHJhaW50ID0gZmFsc2U7XG4gICAgaWYgKHdoZXJlKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gZmxhdHRlbldoZXJlVG9PcGVyYXRvcnMod2hlcmUpO1xuICAgICAgICBoYXNOZWFyQ29uc3RyYWludCA9IGNvbnN0cmFpbnRzLnNvbWUoKHByb3ApPT5PYmplY3Qua2V5cyhwcm9wKS5zb21lKChrZXkpPT5rZXkgPT09ICduZWFyJykpO1xuICAgIH1cbiAgICBjb25zdCBxdWVyeSA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xuICAgIC8vIHVzZUVzdGltYXRlZENvdW50IGlzIGZhc3RlciwgYnV0IG5vdCBhY2N1cmF0ZSwgYXMgaXQgaWdub3JlcyBhbnkgZmlsdGVycy4gSXQgaXMgdGh1cyBzZXQgdG8gdHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZmlsdGVycy5cbiAgICBjb25zdCB1c2VFc3RpbWF0ZWRDb3VudCA9IGhhc05lYXJDb25zdHJhaW50IHx8ICFxdWVyeSB8fCBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwO1xuICAgIGlmICghdXNlRXN0aW1hdGVkQ291bnQgJiYgT2JqZWN0LmtleXMocXVlcnkpLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmRpc2FibGVJbmRleEhpbnRzICE9PSB0cnVlKSB7XG4gICAgICAgIC8vIEltcHJvdmUgdGhlIHBlcmZvcm1hbmNlIG9mIHRoZSBjb3VudERvY3VtZW50cyBxdWVyeSB3aGljaCBpcyB1c2VkIGlmIHVzZUVzdGltYXRlZENvdW50IGlzIHNldCB0byBmYWxzZSBieSBhZGRpbmdcbiAgICAgICAgLy8gYSBoaW50LiBCeSBkZWZhdWx0LCBpZiBubyBoaW50IGlzIHByb3ZpZGVkLCBNb25nb0RCIGRvZXMgbm90IHVzZSBhbiBpbmRleGVkIGZpZWxkIHRvIGNvdW50IHRoZSByZXR1cm5lZCBkb2N1bWVudHMsXG4gICAgICAgIC8vIHdoaWNoIG1ha2VzIHF1ZXJpZXMgdmVyeSBzbG93LiBUaGlzIG9ubHkgaGFwcGVucyB3aGVuIG5vIHF1ZXJ5IChmaWx0ZXIpIGlzIHByb3ZpZGVkLiBJZiBvbmUgaXMgcHJvdmlkZWQsIGl0IHVzZXNcbiAgICAgICAgLy8gdGhlIGNvcnJlY3QgaW5kZXhlZCBmaWVsZFxuICAgICAgICBvcHRpb25zLmhpbnQgPSB7XG4gICAgICAgICAgICBfaWQ6IDFcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAodXNlRXN0aW1hdGVkQ291bnQpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgTW9kZWwuZXN0aW1hdGVkRG9jdW1lbnRDb3VudCh7XG4gICAgICAgICAgICBzZXNzaW9uOiBvcHRpb25zLnNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgTW9kZWwuY291bnREb2N1bWVudHMocXVlcnksIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbERvY3M6IHJlc3VsdFxuICAgIH07XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3VudC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/count.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/countGlobalVersions.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/countGlobalVersions.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countGlobalVersions: () => (/* binding */ countGlobalVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\n\nconst countGlobalVersions = async function countGlobalVersions({ global: globalSlug, locale, req, where = {} }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionGlobalFields)(this.payload.config, globalConfig, true),\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        options.hint = {\n            _id: 1\n        };\n    }\n    let result;\n    if (useEstimatedCount) {\n        result = await Model.estimatedDocumentCount({\n            session: options.session\n        });\n    } else {\n        result = await Model.countDocuments(query, options);\n    }\n    return {\n        totalDocs: result\n    };\n};\n\n//# sourceMappingURL=countGlobalVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jb3VudEdsb2JhbFZlcnNpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE0RTtBQUN2QjtBQUNBO0FBQ0U7QUFDaEQsaUVBQWlFLDZDQUE2QztBQUNySCxZQUFZLHNCQUFzQixFQUFFLGtFQUFTO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1QixvRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQXVCO0FBQ25EO0FBQ0E7QUFDQSx3QkFBd0Isa0VBQVU7QUFDbEM7QUFDQSxnQkFBZ0IsaUVBQXdCO0FBQ3hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY291bnRHbG9iYWxWZXJzaW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFZlcnNpb25HbG9iYWxGaWVsZHMsIGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmV4cG9ydCBjb25zdCBjb3VudEdsb2JhbFZlcnNpb25zID0gYXN5bmMgZnVuY3Rpb24gY291bnRHbG9iYWxWZXJzaW9ucyh7IGdsb2JhbDogZ2xvYmFsU2x1ZywgbG9jYWxlLCByZXEsIHdoZXJlID0ge30gfSkge1xuICAgIGNvbnN0IHsgZ2xvYmFsQ29uZmlnLCBNb2RlbCB9ID0gZ2V0R2xvYmFsKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGxldCBoYXNOZWFyQ29uc3RyYWludCA9IGZhbHNlO1xuICAgIGlmICh3aGVyZSkge1xuICAgICAgICBjb25zdCBjb25zdHJhaW50cyA9IGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzKHdoZXJlKTtcbiAgICAgICAgaGFzTmVhckNvbnN0cmFpbnQgPSBjb25zdHJhaW50cy5zb21lKChwcm9wKT0+T2JqZWN0LmtleXMocHJvcCkuc29tZSgoa2V5KT0+a2V5ID09PSAnbmVhcicpKTtcbiAgICB9XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzOiBidWlsZFZlcnNpb25HbG9iYWxGaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgZ2xvYmFsQ29uZmlnLCB0cnVlKSxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xuICAgIC8vIHVzZUVzdGltYXRlZENvdW50IGlzIGZhc3RlciwgYnV0IG5vdCBhY2N1cmF0ZSwgYXMgaXQgaWdub3JlcyBhbnkgZmlsdGVycy4gSXQgaXMgdGh1cyBzZXQgdG8gdHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZmlsdGVycy5cbiAgICBjb25zdCB1c2VFc3RpbWF0ZWRDb3VudCA9IGhhc05lYXJDb25zdHJhaW50IHx8ICFxdWVyeSB8fCBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwO1xuICAgIGlmICghdXNlRXN0aW1hdGVkQ291bnQgJiYgT2JqZWN0LmtleXMocXVlcnkpLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmRpc2FibGVJbmRleEhpbnRzICE9PSB0cnVlKSB7XG4gICAgICAgIC8vIEltcHJvdmUgdGhlIHBlcmZvcm1hbmNlIG9mIHRoZSBjb3VudERvY3VtZW50cyBxdWVyeSB3aGljaCBpcyB1c2VkIGlmIHVzZUVzdGltYXRlZENvdW50IGlzIHNldCB0byBmYWxzZSBieSBhZGRpbmdcbiAgICAgICAgLy8gYSBoaW50LiBCeSBkZWZhdWx0LCBpZiBubyBoaW50IGlzIHByb3ZpZGVkLCBNb25nb0RCIGRvZXMgbm90IHVzZSBhbiBpbmRleGVkIGZpZWxkIHRvIGNvdW50IHRoZSByZXR1cm5lZCBkb2N1bWVudHMsXG4gICAgICAgIC8vIHdoaWNoIG1ha2VzIHF1ZXJpZXMgdmVyeSBzbG93LiBUaGlzIG9ubHkgaGFwcGVucyB3aGVuIG5vIHF1ZXJ5IChmaWx0ZXIpIGlzIHByb3ZpZGVkLiBJZiBvbmUgaXMgcHJvdmlkZWQsIGl0IHVzZXNcbiAgICAgICAgLy8gdGhlIGNvcnJlY3QgaW5kZXhlZCBmaWVsZFxuICAgICAgICBvcHRpb25zLmhpbnQgPSB7XG4gICAgICAgICAgICBfaWQ6IDFcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAodXNlRXN0aW1hdGVkQ291bnQpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgTW9kZWwuZXN0aW1hdGVkRG9jdW1lbnRDb3VudCh7XG4gICAgICAgICAgICBzZXNzaW9uOiBvcHRpb25zLnNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgTW9kZWwuY291bnREb2N1bWVudHMocXVlcnksIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbERvY3M6IHJlc3VsdFxuICAgIH07XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3VudEdsb2JhbFZlcnNpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/countGlobalVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/countVersions.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/countVersions.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countVersions: () => (/* binding */ countVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\n\nconst countVersions = async function countVersions({ collection: collectionSlug, locale, req, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true),\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        options.hint = {\n            _id: 1\n        };\n    }\n    let result;\n    if (useEstimatedCount) {\n        result = await Model.estimatedDocumentCount({\n            session: options.session\n        });\n    } else {\n        result = await Model.countDocuments(query, options);\n    }\n    return {\n        totalDocs: result\n    };\n};\n\n//# sourceMappingURL=countVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jb3VudFZlcnNpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFnRjtBQUMzQjtBQUNJO0FBQ0Y7QUFDaEQscURBQXFELHFEQUFxRDtBQUNqSCxZQUFZLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1QixvRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQXVCO0FBQ25EO0FBQ0E7QUFDQSx3QkFBd0Isa0VBQVU7QUFDbEM7QUFDQSxnQkFBZ0IscUVBQTRCO0FBQzVDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY291bnRWZXJzaW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzLCBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuZXhwb3J0IGNvbnN0IGNvdW50VmVyc2lvbnMgPSBhc3luYyBmdW5jdGlvbiBjb3VudFZlcnNpb25zKHsgY29sbGVjdGlvbjogY29sbGVjdGlvblNsdWcsIGxvY2FsZSwgcmVxLCB3aGVyZSA9IHt9IH0pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBsZXQgaGFzTmVhckNvbnN0cmFpbnQgPSBmYWxzZTtcbiAgICBpZiAod2hlcmUpIHtcbiAgICAgICAgY29uc3QgY29uc3RyYWludHMgPSBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyh3aGVyZSk7XG4gICAgICAgIGhhc05lYXJDb25zdHJhaW50ID0gY29uc3RyYWludHMuc29tZSgocHJvcCk9Pk9iamVjdC5rZXlzKHByb3ApLnNvbWUoKGtleSk9PmtleSA9PT0gJ25lYXInKSk7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGZpZWxkczogYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBjb2xsZWN0aW9uQ29uZmlnLCB0cnVlKSxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xuICAgIC8vIHVzZUVzdGltYXRlZENvdW50IGlzIGZhc3RlciwgYnV0IG5vdCBhY2N1cmF0ZSwgYXMgaXQgaWdub3JlcyBhbnkgZmlsdGVycy4gSXQgaXMgdGh1cyBzZXQgdG8gdHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZmlsdGVycy5cbiAgICBjb25zdCB1c2VFc3RpbWF0ZWRDb3VudCA9IGhhc05lYXJDb25zdHJhaW50IHx8ICFxdWVyeSB8fCBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwO1xuICAgIGlmICghdXNlRXN0aW1hdGVkQ291bnQgJiYgT2JqZWN0LmtleXMocXVlcnkpLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmRpc2FibGVJbmRleEhpbnRzICE9PSB0cnVlKSB7XG4gICAgICAgIC8vIEltcHJvdmUgdGhlIHBlcmZvcm1hbmNlIG9mIHRoZSBjb3VudERvY3VtZW50cyBxdWVyeSB3aGljaCBpcyB1c2VkIGlmIHVzZUVzdGltYXRlZENvdW50IGlzIHNldCB0byBmYWxzZSBieSBhZGRpbmdcbiAgICAgICAgLy8gYSBoaW50LiBCeSBkZWZhdWx0LCBpZiBubyBoaW50IGlzIHByb3ZpZGVkLCBNb25nb0RCIGRvZXMgbm90IHVzZSBhbiBpbmRleGVkIGZpZWxkIHRvIGNvdW50IHRoZSByZXR1cm5lZCBkb2N1bWVudHMsXG4gICAgICAgIC8vIHdoaWNoIG1ha2VzIHF1ZXJpZXMgdmVyeSBzbG93LiBUaGlzIG9ubHkgaGFwcGVucyB3aGVuIG5vIHF1ZXJ5IChmaWx0ZXIpIGlzIHByb3ZpZGVkLiBJZiBvbmUgaXMgcHJvdmlkZWQsIGl0IHVzZXNcbiAgICAgICAgLy8gdGhlIGNvcnJlY3QgaW5kZXhlZCBmaWVsZFxuICAgICAgICBvcHRpb25zLmhpbnQgPSB7XG4gICAgICAgICAgICBfaWQ6IDFcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAodXNlRXN0aW1hdGVkQ291bnQpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgTW9kZWwuZXN0aW1hdGVkRG9jdW1lbnRDb3VudCh7XG4gICAgICAgICAgICBzZXNzaW9uOiBvcHRpb25zLnNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgTW9kZWwuY291bnREb2N1bWVudHMocXVlcnksIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbERvY3M6IHJlc3VsdFxuICAgIH07XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3VudFZlcnNpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/countVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/create.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/create.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create: () => (/* binding */ create)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_handleError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/handleError.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\nconst create = async function create({ collection: collectionSlug, data, req, returning }) {\n    const { collectionConfig, customIDType, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    let doc;\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data,\n        fields: collectionConfig.fields,\n        operation: 'write'\n    });\n    if (customIDType) {\n        data._id = data.id;\n    } else if (this.allowIDOnCreate && data.id) {\n        try {\n            data._id = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(data.id);\n        } catch (error) {\n            this.payload.logger.error(`It appears you passed ID to create operation data but it cannot be sanitized to ObjectID, value - ${JSON.stringify(data.id)}`);\n            throw error;\n        }\n    }\n    try {\n        ;\n        [doc] = await Model.create([\n            data\n        ], options);\n    } catch (error) {\n        (0,_utilities_handleError_js__WEBPACK_IMPORTED_MODULE_4__.handleError)({\n            collection: collectionSlug,\n            error,\n            req\n        });\n    }\n    if (returning === false) {\n        return null;\n    }\n    doc = doc.toObject();\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data: doc,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=create.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jcmVhdGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWlDO0FBQ3dCO0FBQ0Y7QUFDRTtBQUNKO0FBQzlDLHVDQUF1QyxrREFBa0Q7QUFDaEcsWUFBWSx3Q0FBd0MsRUFBRSxzRUFBYTtBQUNuRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdUJBQXVCLG9FQUFVO0FBQ2pDO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLDJCQUEyQiwyQ0FBSztBQUNoQyxVQUFVO0FBQ1YsMklBQTJJLHdCQUF3QjtBQUNuSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLFFBQVEsc0VBQVc7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jcmVhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHlwZXMgfSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgeyBnZXRDb2xsZWN0aW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmltcG9ydCB7IGhhbmRsZUVycm9yIH0gZnJvbSAnLi91dGlsaXRpZXMvaGFuZGxlRXJyb3IuanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBjb25zdCBjcmVhdGUgPSBhc3luYyBmdW5jdGlvbiBjcmVhdGUoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgZGF0YSwgcmVxLCByZXR1cm5pbmcgfSkge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgY3VzdG9tSURUeXBlLCBNb2RlbCB9ID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnXG4gICAgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBsZXQgZG9jO1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5maWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3dyaXRlJ1xuICAgIH0pO1xuICAgIGlmIChjdXN0b21JRFR5cGUpIHtcbiAgICAgICAgZGF0YS5faWQgPSBkYXRhLmlkO1xuICAgIH0gZWxzZSBpZiAodGhpcy5hbGxvd0lET25DcmVhdGUgJiYgZGF0YS5pZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGF0YS5faWQgPSBuZXcgVHlwZXMuT2JqZWN0SWQoZGF0YS5pZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnBheWxvYWQubG9nZ2VyLmVycm9yKGBJdCBhcHBlYXJzIHlvdSBwYXNzZWQgSUQgdG8gY3JlYXRlIG9wZXJhdGlvbiBkYXRhIGJ1dCBpdCBjYW5ub3QgYmUgc2FuaXRpemVkIHRvIE9iamVjdElELCB2YWx1ZSAtICR7SlNPTi5zdHJpbmdpZnkoZGF0YS5pZCl9YCk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICA7XG4gICAgICAgIFtkb2NdID0gYXdhaXQgTW9kZWwuY3JlYXRlKFtcbiAgICAgICAgICAgIGRhdGFcbiAgICAgICAgXSwgb3B0aW9ucyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvblNsdWcsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgIHJlcVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJldHVybmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGRvYyA9IGRvYy50b09iamVjdCgpO1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IGRvYyxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gZG9jO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/create.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createGlobal.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createGlobal.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGlobal: () => (/* binding */ createGlobal)\n/* harmony export */ });\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\nconst createGlobal = async function createGlobal({ slug: globalSlug, data, req, returning }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_1__.transform)({\n        adapter: this,\n        data,\n        fields: globalConfig.fields,\n        globalSlug,\n        operation: 'write'\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    let [result] = await Model.create([\n        data\n    ], options);\n    if (returning === false) {\n        return null;\n    }\n    result = result.toObject();\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_1__.transform)({\n        adapter: this,\n        data: result,\n        fields: globalConfig.fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=createGlobal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jcmVhdGVHbG9iYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFxRDtBQUNFO0FBQ0Y7QUFDOUMsbURBQW1ELHdDQUF3QztBQUNsRyxZQUFZLHNCQUFzQixFQUFFLGtFQUFTO0FBQzdDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2NyZWF0ZUdsb2JhbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRHbG9iYWwgfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBjb25zdCBjcmVhdGVHbG9iYWwgPSBhc3luYyBmdW5jdGlvbiBjcmVhdGVHbG9iYWwoeyBzbHVnOiBnbG9iYWxTbHVnLCBkYXRhLCByZXEsIHJldHVybmluZyB9KSB7XG4gICAgY29uc3QgeyBnbG9iYWxDb25maWcsIE1vZGVsIH0gPSBnZXRHbG9iYWwoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBnbG9iYWxTbHVnXG4gICAgfSk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgZmllbGRzOiBnbG9iYWxDb25maWcuZmllbGRzLFxuICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICBvcGVyYXRpb246ICd3cml0ZSdcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGxldCBbcmVzdWx0XSA9IGF3YWl0IE1vZGVsLmNyZWF0ZShbXG4gICAgICAgIGRhdGFcbiAgICBdLCBvcHRpb25zKTtcbiAgICBpZiAocmV0dXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmVzdWx0ID0gcmVzdWx0LnRvT2JqZWN0KCk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBmaWVsZHM6IGdsb2JhbENvbmZpZy5maWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZUdsb2JhbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createGlobal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createGlobalVersion.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createGlobalVersion.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGlobalVersion: () => (/* binding */ createGlobalVersion)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\nconst createGlobalVersion = async function createGlobalVersion({ autosave, createdAt, globalSlug, parent, publishedLocale, req, returning, snapshot, updatedAt, versionData }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    const data = {\n        autosave,\n        createdAt,\n        latest: true,\n        parent,\n        publishedLocale,\n        snapshot,\n        updatedAt,\n        version: versionData\n    };\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_2__.buildVersionGlobalFields)(this.payload.config, globalConfig);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data,\n        fields,\n        operation: 'write'\n    });\n    let [doc] = await Model.create([\n        data\n    ], options, req);\n    await Model.updateMany({\n        $and: [\n            {\n                _id: {\n                    $ne: doc._id\n                }\n            },\n            {\n                parent: {\n                    $eq: parent\n                }\n            },\n            {\n                latest: {\n                    $eq: true\n                }\n            }\n        ]\n    }, {\n        $unset: {\n            latest: 1\n        }\n    }, options);\n    if (returning === false) {\n        return null;\n    }\n    doc = doc.toObject();\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data: doc,\n        fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=createGlobalVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jcmVhdGVHbG9iYWxWZXJzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW1EO0FBQ0U7QUFDRTtBQUNGO0FBQzlDLGlFQUFpRSw0R0FBNEc7QUFDcEwsWUFBWSxzQkFBc0IsRUFBRSxrRUFBUztBQUM3QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpRUFBd0I7QUFDM0MsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvY3JlYXRlR2xvYmFsVmVyc2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFZlcnNpb25HbG9iYWxGaWVsZHMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGdldEdsb2JhbCB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUdsb2JhbFZlcnNpb24gPSBhc3luYyBmdW5jdGlvbiBjcmVhdGVHbG9iYWxWZXJzaW9uKHsgYXV0b3NhdmUsIGNyZWF0ZWRBdCwgZ2xvYmFsU2x1ZywgcGFyZW50LCBwdWJsaXNoZWRMb2NhbGUsIHJlcSwgcmV0dXJuaW5nLCBzbmFwc2hvdCwgdXBkYXRlZEF0LCB2ZXJzaW9uRGF0YSB9KSB7XG4gICAgY29uc3QgeyBnbG9iYWxDb25maWcsIE1vZGVsIH0gPSBnZXRHbG9iYWwoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICB2ZXJzaW9uczogdHJ1ZVxuICAgIH0pO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgYXV0b3NhdmUsXG4gICAgICAgIGNyZWF0ZWRBdCxcbiAgICAgICAgbGF0ZXN0OiB0cnVlLFxuICAgICAgICBwYXJlbnQsXG4gICAgICAgIHB1Ymxpc2hlZExvY2FsZSxcbiAgICAgICAgc25hcHNob3QsXG4gICAgICAgIHVwZGF0ZWRBdCxcbiAgICAgICAgdmVyc2lvbjogdmVyc2lvbkRhdGFcbiAgICB9O1xuICAgIGNvbnN0IGZpZWxkcyA9IGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBnbG9iYWxDb25maWcpO1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAnd3JpdGUnXG4gICAgfSk7XG4gICAgbGV0IFtkb2NdID0gYXdhaXQgTW9kZWwuY3JlYXRlKFtcbiAgICAgICAgZGF0YVxuICAgIF0sIG9wdGlvbnMsIHJlcSk7XG4gICAgYXdhaXQgTW9kZWwudXBkYXRlTWFueSh7XG4gICAgICAgICRhbmQ6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJG5lOiBkb2MuX2lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJGVxOiBwYXJlbnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhdGVzdDoge1xuICAgICAgICAgICAgICAgICAgICAkZXE6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9LCB7XG4gICAgICAgICR1bnNldDoge1xuICAgICAgICAgICAgbGF0ZXN0OiAxXG4gICAgICAgIH1cbiAgICB9LCBvcHRpb25zKTtcbiAgICBpZiAocmV0dXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZG9jID0gZG9jLnRvT2JqZWN0KCk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogZG9jLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIGRvYztcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZUdsb2JhbFZlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createGlobalVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createMigration.js":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createMigration.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMigration: () => (/* binding */ createMigration)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/migrations/getPredefinedMigration.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/migrations/writeMigrationIndex.js\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"url\");\n\n\n\n\nconst migrationTemplate = ({ downSQL, imports, upSQL })=>`import {\n  MigrateDownArgs,\n  MigrateUpArgs,\n} from '@payloadcms/db-mongodb'\n${imports ?? ''}\nexport async function up({ payload, req, session }: MigrateUpArgs): Promise<void> {\n${upSQL ?? `  // Migration code`}\n}\n\nexport async function down({ payload, req, session }: MigrateDownArgs): Promise<void> {\n${downSQL ?? `  // Migration code`}\n}\n`;\nconst createMigration = async function createMigration({ file, migrationName, payload, skipEmpty }) {\n    const filename = (0,url__WEBPACK_IMPORTED_MODULE_2__.fileURLToPath)(\"file:///Users/mickael/Documents/galadrim/rise/cms_research/payload/rise/node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createMigration.js\");\n    const dirname = path__WEBPACK_IMPORTED_MODULE_1__.dirname(filename);\n    const dir = payload.db.migrationDir;\n    if (!fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(dir)) {\n        fs__WEBPACK_IMPORTED_MODULE_0__.mkdirSync(dir);\n    }\n    const predefinedMigration = await (0,payload__WEBPACK_IMPORTED_MODULE_3__.getPredefinedMigration)({\n        dirname,\n        file,\n        migrationName,\n        payload\n    });\n    const migrationFileContent = migrationTemplate(predefinedMigration);\n    const [yyymmdd, hhmmss] = new Date().toISOString().split('T');\n    const formattedDate = yyymmdd.replace(/\\D/g, '');\n    const formattedTime = hhmmss.split('.')[0].replace(/\\D/g, '');\n    const timestamp = `${formattedDate}_${formattedTime}`;\n    const formattedName = migrationName?.replace(/\\W/g, '_');\n    const fileName = migrationName ? `${timestamp}_${formattedName}.ts` : `${timestamp}_migration.ts`;\n    const filePath = `${dir}/${fileName}`;\n    if (!skipEmpty) {\n        fs__WEBPACK_IMPORTED_MODULE_0__.writeFileSync(filePath, migrationFileContent);\n    }\n    (0,payload__WEBPACK_IMPORTED_MODULE_4__.writeMigrationIndex)({\n        migrationsDir: payload.db.migrationDir\n    });\n    payload.logger.info({\n        msg: `Migration created at ${filePath}`\n    });\n};\n\n//# sourceMappingURL=createMigration.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jcmVhdGVNaWdyYXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9CO0FBQ0k7QUFDOEM7QUFDbEM7QUFDcEMsNkJBQTZCLHlCQUF5QjtBQUN0RDtBQUNBO0FBQ0EsRUFBRTtBQUNGLEVBQUU7QUFDRiwyQkFBMkIsdUJBQXVCO0FBQ2xELEVBQUU7QUFDRjs7QUFFQSw2QkFBNkIsdUJBQXVCO0FBQ3BELEVBQUU7QUFDRjtBQUNBO0FBQ08seURBQXlELHlDQUF5QztBQUN6RyxxQkFBcUIsa0RBQWEsQ0FBQyxxTUFBZTtBQUNsRCxvQkFBb0IseUNBQVk7QUFDaEM7QUFDQSxTQUFTLDBDQUFhO0FBQ3RCLFFBQVEseUNBQVk7QUFDcEI7QUFDQSxzQ0FBc0MsK0RBQXNCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGNBQWMsR0FBRyxjQUFjO0FBQ3hEO0FBQ0Esd0NBQXdDLFVBQVUsR0FBRyxjQUFjLFVBQVUsVUFBVTtBQUN2Rix3QkFBd0IsSUFBSSxHQUFHLFNBQVM7QUFDeEM7QUFDQSxRQUFRLDZDQUFnQjtBQUN4QjtBQUNBLElBQUksNERBQW1CO0FBQ3ZCO0FBQ0EsS0FBSztBQUNMO0FBQ0EscUNBQXFDLFNBQVM7QUFDOUMsS0FBSztBQUNMOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2NyZWF0ZU1pZ3JhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBnZXRQcmVkZWZpbmVkTWlncmF0aW9uLCB3cml0ZU1pZ3JhdGlvbkluZGV4IH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBmaWxlVVJMVG9QYXRoIH0gZnJvbSAndXJsJztcbmNvbnN0IG1pZ3JhdGlvblRlbXBsYXRlID0gKHsgZG93blNRTCwgaW1wb3J0cywgdXBTUUwgfSk9PmBpbXBvcnQge1xuICBNaWdyYXRlRG93bkFyZ3MsXG4gIE1pZ3JhdGVVcEFyZ3MsXG59IGZyb20gJ0BwYXlsb2FkY21zL2RiLW1vbmdvZGInXG4ke2ltcG9ydHMgPz8gJyd9XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXAoeyBwYXlsb2FkLCByZXEsIHNlc3Npb24gfTogTWlncmF0ZVVwQXJncyk6IFByb21pc2U8dm9pZD4ge1xuJHt1cFNRTCA/PyBgICAvLyBNaWdyYXRpb24gY29kZWB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkb3duKHsgcGF5bG9hZCwgcmVxLCBzZXNzaW9uIH06IE1pZ3JhdGVEb3duQXJncyk6IFByb21pc2U8dm9pZD4ge1xuJHtkb3duU1FMID8/IGAgIC8vIE1pZ3JhdGlvbiBjb2RlYH1cbn1cbmA7XG5leHBvcnQgY29uc3QgY3JlYXRlTWlncmF0aW9uID0gYXN5bmMgZnVuY3Rpb24gY3JlYXRlTWlncmF0aW9uKHsgZmlsZSwgbWlncmF0aW9uTmFtZSwgcGF5bG9hZCwgc2tpcEVtcHR5IH0pIHtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGZpbGVVUkxUb1BhdGgoaW1wb3J0Lm1ldGEudXJsKTtcbiAgICBjb25zdCBkaXJuYW1lID0gcGF0aC5kaXJuYW1lKGZpbGVuYW1lKTtcbiAgICBjb25zdCBkaXIgPSBwYXlsb2FkLmRiLm1pZ3JhdGlvbkRpcjtcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkge1xuICAgICAgICBmcy5ta2RpclN5bmMoZGlyKTtcbiAgICB9XG4gICAgY29uc3QgcHJlZGVmaW5lZE1pZ3JhdGlvbiA9IGF3YWl0IGdldFByZWRlZmluZWRNaWdyYXRpb24oe1xuICAgICAgICBkaXJuYW1lLFxuICAgICAgICBmaWxlLFxuICAgICAgICBtaWdyYXRpb25OYW1lLFxuICAgICAgICBwYXlsb2FkXG4gICAgfSk7XG4gICAgY29uc3QgbWlncmF0aW9uRmlsZUNvbnRlbnQgPSBtaWdyYXRpb25UZW1wbGF0ZShwcmVkZWZpbmVkTWlncmF0aW9uKTtcbiAgICBjb25zdCBbeXl5bW1kZCwgaGhtbXNzXSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpO1xuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSB5eXltbWRkLnJlcGxhY2UoL1xcRC9nLCAnJyk7XG4gICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IGhobW1zcy5zcGxpdCgnLicpWzBdLnJlcGxhY2UoL1xcRC9nLCAnJyk7XG4gICAgY29uc3QgdGltZXN0YW1wID0gYCR7Zm9ybWF0dGVkRGF0ZX1fJHtmb3JtYXR0ZWRUaW1lfWA7XG4gICAgY29uc3QgZm9ybWF0dGVkTmFtZSA9IG1pZ3JhdGlvbk5hbWU/LnJlcGxhY2UoL1xcVy9nLCAnXycpO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gbWlncmF0aW9uTmFtZSA/IGAke3RpbWVzdGFtcH1fJHtmb3JtYXR0ZWROYW1lfS50c2AgOiBgJHt0aW1lc3RhbXB9X21pZ3JhdGlvbi50c2A7XG4gICAgY29uc3QgZmlsZVBhdGggPSBgJHtkaXJ9LyR7ZmlsZU5hbWV9YDtcbiAgICBpZiAoIXNraXBFbXB0eSkge1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGZpbGVQYXRoLCBtaWdyYXRpb25GaWxlQ29udGVudCk7XG4gICAgfVxuICAgIHdyaXRlTWlncmF0aW9uSW5kZXgoe1xuICAgICAgICBtaWdyYXRpb25zRGlyOiBwYXlsb2FkLmRiLm1pZ3JhdGlvbkRpclxuICAgIH0pO1xuICAgIHBheWxvYWQubG9nZ2VyLmluZm8oe1xuICAgICAgICBtc2c6IGBNaWdyYXRpb24gY3JlYXRlZCBhdCAke2ZpbGVQYXRofWBcbiAgICB9KTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZU1pZ3JhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createMigration.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createVersion.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createVersion.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createVersion: () => (/* binding */ createVersion)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\nconst createVersion = async function createVersion({ autosave, collectionSlug, createdAt, parent, publishedLocale, req, returning, snapshot, updatedAt, versionData }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    const data = {\n        autosave,\n        createdAt,\n        latest: true,\n        parent,\n        publishedLocale,\n        snapshot,\n        updatedAt,\n        version: versionData\n    };\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_2__.buildVersionCollectionFields)(this.payload.config, collectionConfig);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data,\n        fields,\n        operation: 'write'\n    });\n    let [doc] = await Model.create([\n        data\n    ], options, req);\n    const parentQuery = {\n        $or: [\n            {\n                parent: {\n                    $eq: data.parent\n                }\n            }\n        ]\n    };\n    await Model.updateMany({\n        $and: [\n            {\n                _id: {\n                    $ne: doc._id\n                }\n            },\n            parentQuery,\n            {\n                latest: {\n                    $eq: true\n                }\n            },\n            {\n                updatedAt: {\n                    $lt: new Date(doc.updatedAt)\n                }\n            }\n        ]\n    }, {\n        $unset: {\n            latest: 1\n        }\n    }, options);\n    if (returning === false) {\n        return null;\n    }\n    doc = doc.toObject();\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data: doc,\n        fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=createVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jcmVhdGVWZXJzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVEO0FBQ0U7QUFDRjtBQUNGO0FBQzlDLHFEQUFxRCxnSEFBZ0g7QUFDNUssWUFBWSwwQkFBMEIsRUFBRSxzRUFBYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsb0VBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxRUFBNEI7QUFDL0MsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9jcmVhdGVWZXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBjb25zdCBjcmVhdGVWZXJzaW9uID0gYXN5bmMgZnVuY3Rpb24gY3JlYXRlVmVyc2lvbih7IGF1dG9zYXZlLCBjb2xsZWN0aW9uU2x1ZywgY3JlYXRlZEF0LCBwYXJlbnQsIHB1Ymxpc2hlZExvY2FsZSwgcmVxLCByZXR1cm5pbmcsIHNuYXBzaG90LCB1cGRhdGVkQXQsIHZlcnNpb25EYXRhIH0pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBhdXRvc2F2ZSxcbiAgICAgICAgY3JlYXRlZEF0LFxuICAgICAgICBsYXRlc3Q6IHRydWUsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgcHVibGlzaGVkTG9jYWxlLFxuICAgICAgICBzbmFwc2hvdCxcbiAgICAgICAgdXBkYXRlZEF0LFxuICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uRGF0YVxuICAgIH07XG4gICAgY29uc3QgZmllbGRzID0gYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBjb2xsZWN0aW9uQ29uZmlnKTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3dyaXRlJ1xuICAgIH0pO1xuICAgIGxldCBbZG9jXSA9IGF3YWl0IE1vZGVsLmNyZWF0ZShbXG4gICAgICAgIGRhdGFcbiAgICBdLCBvcHRpb25zLCByZXEpO1xuICAgIGNvbnN0IHBhcmVudFF1ZXJ5ID0ge1xuICAgICAgICAkb3I6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJGVxOiBkYXRhLnBhcmVudFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH07XG4gICAgYXdhaXQgTW9kZWwudXBkYXRlTWFueSh7XG4gICAgICAgICRhbmQ6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBfaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJG5lOiBkb2MuX2lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhcmVudFF1ZXJ5LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhdGVzdDoge1xuICAgICAgICAgICAgICAgICAgICAkZXE6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDoge1xuICAgICAgICAgICAgICAgICAgICAkbHQ6IG5ldyBEYXRlKGRvYy51cGRhdGVkQXQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgfSwge1xuICAgICAgICAkdW5zZXQ6IHtcbiAgICAgICAgICAgIGxhdGVzdDogMVxuICAgICAgICB9XG4gICAgfSwgb3B0aW9ucyk7XG4gICAgaWYgKHJldHVybmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGRvYyA9IGRvYy50b09iamVjdCgpO1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IGRvYyxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiBkb2M7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGVWZXJzaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteMany.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteMany.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteMany: () => (/* binding */ deleteMany)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\nconst deleteMany = async function deleteMany({ collection: collectionSlug, req, where }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_2__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        where\n    });\n    await Model.deleteMany(query, options);\n};\n\n//# sourceMappingURL=deleteMany.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9kZWxldGVNYW55LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBcUQ7QUFDSTtBQUNGO0FBQ2hELCtDQUErQyx3Q0FBd0M7QUFDOUYsWUFBWSwwQkFBMEIsRUFBRSxzRUFBYTtBQUNyRDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsdUJBQXVCLG9FQUFVO0FBQ2pDO0FBQ0Esd0JBQXdCLGtFQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZGVsZXRlTWFueS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5leHBvcnQgY29uc3QgZGVsZXRlTWFueSA9IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZU1hbnkoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgcmVxLCB3aGVyZSB9KSB7XG4gICAgY29uc3QgeyBjb2xsZWN0aW9uQ29uZmlnLCBNb2RlbCB9ID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnXG4gICAgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBjb25zdCBxdWVyeSA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgd2hlcmVcbiAgICB9KTtcbiAgICBhd2FpdCBNb2RlbC5kZWxldGVNYW55KHF1ZXJ5LCBvcHRpb25zKTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbGV0ZU1hbnkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteMany.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteOne.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteOne.js ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteOne: () => (/* binding */ deleteOne)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\nconst deleteOne = async function deleteOne({ collection: collectionSlug, req, returning, select, where }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const options = {\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: collectionConfig.flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        where\n    });\n    if (returning === false) {\n        await Model.deleteOne(query, options)?.lean();\n        return null;\n    }\n    const doc = await Model.findOneAndDelete(query, options)?.lean();\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data: doc,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=deleteOne.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9kZWxldGVPbmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXFEO0FBQ2dDO0FBQzVCO0FBQ0Y7QUFDRjtBQUM5Qyw2Q0FBNkMsMkRBQTJEO0FBQy9HLFlBQVksMEJBQTBCLEVBQUUsc0VBQWE7QUFDckQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG9CQUFvQixrR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVCQUF1QixvRUFBVTtBQUNqQztBQUNBLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZGVsZXRlT25lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0IH0gZnJvbSAnLi91dGlsaXRpZXMvYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdC5qcyc7XG5pbXBvcnQgeyBnZXRDb2xsZWN0aW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgZGVsZXRlT25lID0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlT25lKHsgY29sbGVjdGlvbjogY29sbGVjdGlvblNsdWcsIHJlcSwgcmV0dXJuaW5nLCBzZWxlY3QsIHdoZXJlIH0pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWdcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBwcm9qZWN0aW9uOiBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICAgICAgc2VsZWN0XG4gICAgICAgIH0pLFxuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xuICAgIGlmIChyZXR1cm5pbmcgPT09IGZhbHNlKSB7XG4gICAgICAgIGF3YWl0IE1vZGVsLmRlbGV0ZU9uZShxdWVyeSwgb3B0aW9ucyk/LmxlYW4oKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGRvYyA9IGF3YWl0IE1vZGVsLmZpbmRPbmVBbmREZWxldGUocXVlcnksIG9wdGlvbnMpPy5sZWFuKCk7XG4gICAgaWYgKCFkb2MpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IGRvYyxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gZG9jO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsZXRlT25lLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteOne.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteVersions.js":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteVersions.js ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteVersions: () => (/* binding */ deleteVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n\n\n\n\nconst deleteVersions = async function deleteVersions({ collection: collectionSlug, globalSlug, locale, req, where }) {\n    let fields;\n    let VersionsModel;\n    if (globalSlug) {\n        const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n            adapter: this,\n            globalSlug,\n            versions: true\n        });\n        fields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig, true);\n        VersionsModel = Model;\n    } else if (collectionSlug) {\n        const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n            adapter: this,\n            collectionSlug,\n            versions: true\n        });\n        fields = (0,payload__WEBPACK_IMPORTED_MODULE_2__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true);\n        VersionsModel = Model;\n    } else {\n        throw new payload__WEBPACK_IMPORTED_MODULE_3__.APIError('Either collection or globalSlug must be passed.');\n    }\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_4__.getSession)(this, req);\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__.buildQuery)({\n        adapter: this,\n        fields,\n        locale,\n        where\n    });\n    await VersionsModel.deleteMany(query, {\n        session\n    });\n};\n\n//# sourceMappingURL=deleteVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9kZWxldGVWZXJzaW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJGO0FBQ3RDO0FBQ2U7QUFDYjtBQUNoRCx1REFBdUQsNERBQTREO0FBQzFIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzQkFBc0IsRUFBRSxrRUFBUztBQUNqRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsaUJBQWlCLGlFQUF3QjtBQUN6QztBQUNBLE1BQU07QUFDTixnQkFBZ0IsMEJBQTBCLEVBQUUsc0VBQWE7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGlCQUFpQixxRUFBNEI7QUFDN0M7QUFDQSxNQUFNO0FBQ04sa0JBQWtCLDZDQUFRO0FBQzFCO0FBQ0EsMEJBQTBCLG9FQUFVO0FBQ3BDLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2RlbGV0ZVZlcnNpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yLCBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzLCBidWlsZFZlcnNpb25HbG9iYWxGaWVsZHMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBnZXRDb2xsZWN0aW9uLCBnZXRHbG9iYWwgfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZVZlcnNpb25zID0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlVmVyc2lvbnMoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgZ2xvYmFsU2x1ZywgbG9jYWxlLCByZXEsIHdoZXJlIH0pIHtcbiAgICBsZXQgZmllbGRzO1xuICAgIGxldCBWZXJzaW9uc01vZGVsO1xuICAgIGlmIChnbG9iYWxTbHVnKSB7XG4gICAgICAgIGNvbnN0IHsgZ2xvYmFsQ29uZmlnLCBNb2RlbCB9ID0gZ2V0R2xvYmFsKHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGZpZWxkcyA9IGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBnbG9iYWxDb25maWcsIHRydWUpO1xuICAgICAgICBWZXJzaW9uc01vZGVsID0gTW9kZWw7XG4gICAgfSBlbHNlIGlmIChjb2xsZWN0aW9uU2x1Zykge1xuICAgICAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBmaWVsZHMgPSBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGNvbGxlY3Rpb25Db25maWcsIHRydWUpO1xuICAgICAgICBWZXJzaW9uc01vZGVsID0gTW9kZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKCdFaXRoZXIgY29sbGVjdGlvbiBvciBnbG9iYWxTbHVnIG11c3QgYmUgcGFzc2VkLicpO1xuICAgIH1cbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpO1xuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xuICAgIGF3YWl0IFZlcnNpb25zTW9kZWwuZGVsZXRlTWFueShxdWVyeSwge1xuICAgICAgICBzZXNzaW9uXG4gICAgfSk7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxldGVWZXJzaW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/destroy.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/destroy.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   destroy: () => (/* binding */ destroy)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n\nconst destroy = async function destroy() {\n    await mongoose__WEBPACK_IMPORTED_MODULE_0__.disconnect();\n    Object.keys(mongoose__WEBPACK_IMPORTED_MODULE_0__.models).map((model)=>mongoose__WEBPACK_IMPORTED_MODULE_0__.deleteModel(model));\n};\n\n//# sourceMappingURL=destroy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9kZXN0cm95LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdDO0FBQ3pCO0FBQ1AsVUFBVSxnREFBbUI7QUFDN0IsZ0JBQWdCLDRDQUFlLGVBQWUsaURBQW9CO0FBQ2xFOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2Rlc3Ryb3kuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmV4cG9ydCBjb25zdCBkZXN0cm95ID0gYXN5bmMgZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICBhd2FpdCBtb25nb29zZS5kaXNjb25uZWN0KCk7XG4gICAgT2JqZWN0LmtleXMobW9uZ29vc2UubW9kZWxzKS5tYXAoKG1vZGVsKT0+bW9uZ29vc2UuZGVsZXRlTW9kZWwobW9kZWwpKTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlc3Ryb3kuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/destroy.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/find.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/find.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   find: () => (/* binding */ find)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/aggregatePaginate.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js\");\n/* harmony import */ var _utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/buildJoinAggregation.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\n\n\nconst find = async function find({ collection: collectionSlug, draftsEnabled, joins = {}, limit = 0, locale, page, pagination, projection, req, select, sort: sortArg, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req);\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const sortAggregation = [];\n    let sort;\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_3__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields: collectionConfig.flattenedFields,\n            locale,\n            sort: sortArg || collectionConfig.defaultSort,\n            sortAggregation,\n            timestamps: true\n        });\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    const paginationOptions = {\n        lean: true,\n        leanWithId: true,\n        options: {\n            session\n        },\n        page,\n        pagination,\n        projection,\n        sort,\n        useEstimatedCount\n    };\n    if (select) {\n        paginationOptions.projection = (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_5__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: collectionConfig.flattenedFields,\n            select\n        });\n    }\n    if (this.collation) {\n        const defaultLocale = 'en';\n        paginationOptions.collation = {\n            locale: locale && locale !== 'all' && locale !== '*' ? locale : defaultLocale,\n            ...this.collation\n        };\n    }\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        paginationOptions.useCustomCountFn = ()=>{\n            return Promise.resolve(Model.countDocuments(query, {\n                hint: {\n                    _id: 1\n                },\n                session\n            }));\n        };\n    }\n    if (limit >= 0) {\n        paginationOptions.limit = limit;\n        // limit must also be set here, it's ignored when pagination is false\n        paginationOptions.options.limit = limit;\n        // Disable pagination if limit is 0\n        if (limit === 0) {\n            paginationOptions.pagination = false;\n        }\n    }\n    let result;\n    const aggregate = await (0,_utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_6__.buildJoinAggregation)({\n        adapter: this,\n        collection: collectionSlug,\n        collectionConfig,\n        draftsEnabled,\n        joins,\n        locale,\n        query\n    });\n    if (aggregate || sortAggregation.length > 0) {\n        result = await (0,_utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_7__.aggregatePaginate)({\n            adapter: this,\n            collation: paginationOptions.collation,\n            joinAggregation: aggregate,\n            limit: paginationOptions.limit,\n            Model,\n            page: paginationOptions.page,\n            pagination: paginationOptions.pagination,\n            projection: paginationOptions.projection,\n            query,\n            session: paginationOptions.options?.session ?? undefined,\n            sort: paginationOptions.sort,\n            sortAggregation,\n            useEstimatedCount: paginationOptions.useEstimatedCount\n        });\n    } else {\n        result = await Model.paginate(query, paginationOptions);\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_8__.transform)({\n        adapter: this,\n        data: result.docs,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=find.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9maW5kLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDRztBQUNRO0FBQ1E7QUFDTTtBQUNVO0FBQzVCO0FBQ0Y7QUFDRjtBQUM5QyxtQ0FBbUMscURBQXFELDJGQUEyRjtBQUMxTCxZQUFZLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMEJBQTBCLG9FQUFVO0FBQ3BDO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQXVCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBFQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esd0JBQXdCLGtFQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsa0dBQXlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3RkFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsa0ZBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZmluZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkU29ydFBhcmFtIH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLmpzJztcbmltcG9ydCB7IGFnZ3JlZ2F0ZVBhZ2luYXRlIH0gZnJvbSAnLi91dGlsaXRpZXMvYWdncmVnYXRlUGFnaW5hdGUuanMnO1xuaW1wb3J0IHsgYnVpbGRKb2luQWdncmVnYXRpb24gfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZEpvaW5BZ2dyZWdhdGlvbi5qcyc7XG5pbXBvcnQgeyBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0IH0gZnJvbSAnLi91dGlsaXRpZXMvYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdC5qcyc7XG5pbXBvcnQgeyBnZXRDb2xsZWN0aW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgZmluZCA9IGFzeW5jIGZ1bmN0aW9uIGZpbmQoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgZHJhZnRzRW5hYmxlZCwgam9pbnMgPSB7fSwgbGltaXQgPSAwLCBsb2NhbGUsIHBhZ2UsIHBhZ2luYXRpb24sIHByb2plY3Rpb24sIHJlcSwgc2VsZWN0LCBzb3J0OiBzb3J0QXJnLCB3aGVyZSA9IHt9IH0pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWdcbiAgICB9KTtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpO1xuICAgIGxldCBoYXNOZWFyQ29uc3RyYWludCA9IGZhbHNlO1xuICAgIGlmICh3aGVyZSkge1xuICAgICAgICBjb25zdCBjb25zdHJhaW50cyA9IGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzKHdoZXJlKTtcbiAgICAgICAgaGFzTmVhckNvbnN0cmFpbnQgPSBjb25zdHJhaW50cy5zb21lKChwcm9wKT0+T2JqZWN0LmtleXMocHJvcCkuc29tZSgoa2V5KT0+a2V5ID09PSAnbmVhcicpKTtcbiAgICB9XG4gICAgY29uc3Qgc29ydEFnZ3JlZ2F0aW9uID0gW107XG4gICAgbGV0IHNvcnQ7XG4gICAgaWYgKCFoYXNOZWFyQ29uc3RyYWludCkge1xuICAgICAgICBzb3J0ID0gYnVpbGRTb3J0UGFyYW0oe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5wYXlsb2FkLmNvbmZpZyxcbiAgICAgICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBzb3J0OiBzb3J0QXJnIHx8IGNvbGxlY3Rpb25Db25maWcuZGVmYXVsdFNvcnQsXG4gICAgICAgICAgICBzb3J0QWdncmVnYXRpb24sXG4gICAgICAgICAgICB0aW1lc3RhbXBzOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBxdWVyeSA9IGF3YWl0IGJ1aWxkUXVlcnkoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZVxuICAgIH0pO1xuICAgIC8vIHVzZUVzdGltYXRlZENvdW50IGlzIGZhc3RlciwgYnV0IG5vdCBhY2N1cmF0ZSwgYXMgaXQgaWdub3JlcyBhbnkgZmlsdGVycy4gSXQgaXMgdGh1cyBzZXQgdG8gdHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZmlsdGVycy5cbiAgICBjb25zdCB1c2VFc3RpbWF0ZWRDb3VudCA9IGhhc05lYXJDb25zdHJhaW50IHx8ICFxdWVyeSB8fCBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwO1xuICAgIGNvbnN0IHBhZ2luYXRpb25PcHRpb25zID0ge1xuICAgICAgICBsZWFuOiB0cnVlLFxuICAgICAgICBsZWFuV2l0aElkOiB0cnVlLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgIH0sXG4gICAgICAgIHBhZ2UsXG4gICAgICAgIHBhZ2luYXRpb24sXG4gICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgIHNvcnQsXG4gICAgICAgIHVzZUVzdGltYXRlZENvdW50XG4gICAgfTtcbiAgICBpZiAoc2VsZWN0KSB7XG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLnByb2plY3Rpb24gPSBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICAgICAgc2VsZWN0XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5jb2xsYXRpb24pIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdExvY2FsZSA9ICdlbic7XG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLmNvbGxhdGlvbiA9IHtcbiAgICAgICAgICAgIGxvY2FsZTogbG9jYWxlICYmIGxvY2FsZSAhPT0gJ2FsbCcgJiYgbG9jYWxlICE9PSAnKicgPyBsb2NhbGUgOiBkZWZhdWx0TG9jYWxlLFxuICAgICAgICAgICAgLi4udGhpcy5jb2xsYXRpb25cbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCF1c2VFc3RpbWF0ZWRDb3VudCAmJiBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwICYmIHRoaXMuZGlzYWJsZUluZGV4SGludHMgIT09IHRydWUpIHtcbiAgICAgICAgLy8gSW1wcm92ZSB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIGNvdW50RG9jdW1lbnRzIHF1ZXJ5IHdoaWNoIGlzIHVzZWQgaWYgdXNlRXN0aW1hdGVkQ291bnQgaXMgc2V0IHRvIGZhbHNlIGJ5IGFkZGluZ1xuICAgICAgICAvLyBhIGhpbnQuIEJ5IGRlZmF1bHQsIGlmIG5vIGhpbnQgaXMgcHJvdmlkZWQsIE1vbmdvREIgZG9lcyBub3QgdXNlIGFuIGluZGV4ZWQgZmllbGQgdG8gY291bnQgdGhlIHJldHVybmVkIGRvY3VtZW50cyxcbiAgICAgICAgLy8gd2hpY2ggbWFrZXMgcXVlcmllcyB2ZXJ5IHNsb3cuIFRoaXMgb25seSBoYXBwZW5zIHdoZW4gbm8gcXVlcnkgKGZpbHRlcikgaXMgcHJvdmlkZWQuIElmIG9uZSBpcyBwcm92aWRlZCwgaXQgdXNlc1xuICAgICAgICAvLyB0aGUgY29ycmVjdCBpbmRleGVkIGZpZWxkXG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLnVzZUN1c3RvbUNvdW50Rm4gPSAoKT0+e1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShNb2RlbC5jb3VudERvY3VtZW50cyhxdWVyeSwge1xuICAgICAgICAgICAgICAgIGhpbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChsaW1pdCA+PSAwKSB7XG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLmxpbWl0ID0gbGltaXQ7XG4gICAgICAgIC8vIGxpbWl0IG11c3QgYWxzbyBiZSBzZXQgaGVyZSwgaXQncyBpZ25vcmVkIHdoZW4gcGFnaW5hdGlvbiBpcyBmYWxzZVxuICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucy5vcHRpb25zLmxpbWl0ID0gbGltaXQ7XG4gICAgICAgIC8vIERpc2FibGUgcGFnaW5hdGlvbiBpZiBsaW1pdCBpcyAwXG4gICAgICAgIGlmIChsaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMucGFnaW5hdGlvbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCByZXN1bHQ7XG4gICAgY29uc3QgYWdncmVnYXRlID0gYXdhaXQgYnVpbGRKb2luQWdncmVnYXRpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgY29sbGVjdGlvbkNvbmZpZyxcbiAgICAgICAgZHJhZnRzRW5hYmxlZCxcbiAgICAgICAgam9pbnMsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgcXVlcnlcbiAgICB9KTtcbiAgICBpZiAoYWdncmVnYXRlIHx8IHNvcnRBZ2dyZWdhdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGFnZ3JlZ2F0ZVBhZ2luYXRlKHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBjb2xsYXRpb246IHBhZ2luYXRpb25PcHRpb25zLmNvbGxhdGlvbixcbiAgICAgICAgICAgIGpvaW5BZ2dyZWdhdGlvbjogYWdncmVnYXRlLFxuICAgICAgICAgICAgbGltaXQ6IHBhZ2luYXRpb25PcHRpb25zLmxpbWl0LFxuICAgICAgICAgICAgTW9kZWwsXG4gICAgICAgICAgICBwYWdlOiBwYWdpbmF0aW9uT3B0aW9ucy5wYWdlLFxuICAgICAgICAgICAgcGFnaW5hdGlvbjogcGFnaW5hdGlvbk9wdGlvbnMucGFnaW5hdGlvbixcbiAgICAgICAgICAgIHByb2plY3Rpb246IHBhZ2luYXRpb25PcHRpb25zLnByb2plY3Rpb24sXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIHNlc3Npb246IHBhZ2luYXRpb25PcHRpb25zLm9wdGlvbnM/LnNlc3Npb24gPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgc29ydDogcGFnaW5hdGlvbk9wdGlvbnMuc29ydCxcbiAgICAgICAgICAgIHNvcnRBZ2dyZWdhdGlvbixcbiAgICAgICAgICAgIHVzZUVzdGltYXRlZENvdW50OiBwYWdpbmF0aW9uT3B0aW9ucy51c2VFc3RpbWF0ZWRDb3VudFxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5wYWdpbmF0ZShxdWVyeSwgcGFnaW5hdGlvbk9wdGlvbnMpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiByZXN1bHQuZG9jcyxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluZC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/find.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findGlobal.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findGlobal.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findGlobal: () => (/* binding */ findGlobal)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/combineQueries.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nconst findGlobal = async function findGlobal({ slug: globalSlug, locale, req, select, where = {} }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug\n    });\n    const fields = globalConfig.flattenedFields;\n    const options = {\n        lean: true,\n        select: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__.buildProjectionFromSelect)({\n            adapter: this,\n            fields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        fields,\n        globalSlug,\n        locale,\n        where: (0,payload__WEBPACK_IMPORTED_MODULE_4__.combineQueries)({\n            globalType: {\n                equals: globalSlug\n            }\n        }, where)\n    });\n    const doc = await Model.findOne(query, {}, options);\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: doc,\n        fields: globalConfig.fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=findGlobal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9maW5kR2xvYmFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBeUM7QUFDWTtBQUNnQztBQUNoQztBQUNFO0FBQ0Y7QUFDOUMsK0NBQStDLG1EQUFtRDtBQUN6RyxZQUFZLHNCQUFzQixFQUFFLGtFQUFTO0FBQzdDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtHQUF5QjtBQUN6QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsdUJBQXVCLG9FQUFVO0FBQ2pDO0FBQ0Esd0JBQXdCLGtFQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1REFBYztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9maW5kR2xvYmFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbWJpbmVRdWVyaWVzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgY29uc3QgZmluZEdsb2JhbCA9IGFzeW5jIGZ1bmN0aW9uIGZpbmRHbG9iYWwoeyBzbHVnOiBnbG9iYWxTbHVnLCBsb2NhbGUsIHJlcSwgc2VsZWN0LCB3aGVyZSA9IHt9IH0pIHtcbiAgICBjb25zdCB7IGdsb2JhbENvbmZpZywgTW9kZWwgfSA9IGdldEdsb2JhbCh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGdsb2JhbFNsdWdcbiAgICB9KTtcbiAgICBjb25zdCBmaWVsZHMgPSBnbG9iYWxDb25maWcuZmxhdHRlbmVkRmllbGRzO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIHNlbGVjdDogYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCh7XG4gICAgICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgc2VsZWN0XG4gICAgICAgIH0pLFxuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZTogY29tYmluZVF1ZXJpZXMoe1xuICAgICAgICAgICAgZ2xvYmFsVHlwZToge1xuICAgICAgICAgICAgICAgIGVxdWFsczogZ2xvYmFsU2x1Z1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB3aGVyZSlcbiAgICB9KTtcbiAgICBjb25zdCBkb2MgPSBhd2FpdCBNb2RlbC5maW5kT25lKHF1ZXJ5LCB7fSwgb3B0aW9ucyk7XG4gICAgaWYgKCFkb2MpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IGRvYyxcbiAgICAgICAgZmllbGRzOiBnbG9iYWxDb25maWcuZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiBkb2M7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1maW5kR2xvYmFsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findGlobal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findGlobalVersions.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findGlobalVersions.js ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findGlobalVersions: () => (/* binding */ findGlobalVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\nconst findGlobalVersions = async function findGlobalVersions({ global: globalSlug, limit, locale, page, pagination, req, select, skip, sort: sortArg, where = {} }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug,\n        versions: true\n    });\n    const versionFields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig, true);\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req);\n    const options = {\n        limit,\n        session,\n        skip\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_3__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    let sort;\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_4__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields: versionFields,\n            locale,\n            sort: sortArg || '-updatedAt',\n            timestamps: true\n        });\n    }\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__.buildQuery)({\n        adapter: this,\n        fields: versionFields,\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    const paginationOptions = {\n        lean: true,\n        leanWithId: true,\n        limit,\n        options,\n        page,\n        pagination,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_6__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: versionFields,\n            select\n        }),\n        sort,\n        useEstimatedCount\n    };\n    if (this.collation) {\n        const defaultLocale = 'en';\n        paginationOptions.collation = {\n            locale: locale && locale !== 'all' && locale !== '*' ? locale : defaultLocale,\n            ...this.collation\n        };\n    }\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        paginationOptions.useCustomCountFn = ()=>{\n            return Promise.resolve(Model.countDocuments(query, {\n                hint: {\n                    _id: 1\n                },\n                session\n            }));\n        };\n    }\n    if (limit && limit >= 0) {\n        paginationOptions.limit = limit;\n        // limit must also be set here, it's ignored when pagination is false\n        paginationOptions.options.limit = limit;\n        // Disable pagination if limit is 0\n        if (limit === 0) {\n            paginationOptions.pagination = false;\n        }\n    }\n    const result = await Model.paginate(query, paginationOptions);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_7__.transform)({\n        adapter: this,\n        data: result.docs,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig),\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=findGlobalVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9maW5kR2xvYmFsVmVyc2lvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTRFO0FBQ3ZCO0FBQ1E7QUFDd0I7QUFDaEM7QUFDRTtBQUNGO0FBQzlDLCtEQUErRCxtR0FBbUc7QUFDekssWUFBWSxzQkFBc0IsRUFBRSxrRUFBUztBQUM3QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMEJBQTBCLGlFQUF3QjtBQUNsRCwwQkFBMEIsb0VBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQXVCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwRUFBYztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx3QkFBd0Isa0VBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtHQUF5QjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQSxnQkFBZ0IsaUVBQXdCO0FBQ3hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvZmluZEdsb2JhbFZlcnNpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcywgZmxhdHRlbldoZXJlVG9PcGVyYXRvcnMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBidWlsZFNvcnRQYXJhbSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFNvcnRQYXJhbS5qcyc7XG5pbXBvcnQgeyBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0IH0gZnJvbSAnLi91dGlsaXRpZXMvYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdC5qcyc7XG5pbXBvcnQgeyBnZXRHbG9iYWwgfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBjb25zdCBmaW5kR2xvYmFsVmVyc2lvbnMgPSBhc3luYyBmdW5jdGlvbiBmaW5kR2xvYmFsVmVyc2lvbnMoeyBnbG9iYWw6IGdsb2JhbFNsdWcsIGxpbWl0LCBsb2NhbGUsIHBhZ2UsIHBhZ2luYXRpb24sIHJlcSwgc2VsZWN0LCBza2lwLCBzb3J0OiBzb3J0QXJnLCB3aGVyZSA9IHt9IH0pIHtcbiAgICBjb25zdCB7IGdsb2JhbENvbmZpZywgTW9kZWwgfSA9IGdldEdsb2JhbCh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3QgdmVyc2lvbkZpZWxkcyA9IGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBnbG9iYWxDb25maWcsIHRydWUpO1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHNlc3Npb24sXG4gICAgICAgIHNraXBcbiAgICB9O1xuICAgIGxldCBoYXNOZWFyQ29uc3RyYWludCA9IGZhbHNlO1xuICAgIGlmICh3aGVyZSkge1xuICAgICAgICBjb25zdCBjb25zdHJhaW50cyA9IGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzKHdoZXJlKTtcbiAgICAgICAgaGFzTmVhckNvbnN0cmFpbnQgPSBjb25zdHJhaW50cy5zb21lKChwcm9wKT0+T2JqZWN0LmtleXMocHJvcCkuc29tZSgoa2V5KT0+a2V5ID09PSAnbmVhcicpKTtcbiAgICB9XG4gICAgbGV0IHNvcnQ7XG4gICAgaWYgKCFoYXNOZWFyQ29uc3RyYWludCkge1xuICAgICAgICBzb3J0ID0gYnVpbGRTb3J0UGFyYW0oe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5wYXlsb2FkLmNvbmZpZyxcbiAgICAgICAgICAgIGZpZWxkczogdmVyc2lvbkZpZWxkcyxcbiAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgIHNvcnQ6IHNvcnRBcmcgfHwgJy11cGRhdGVkQXQnLFxuICAgICAgICAgICAgdGltZXN0YW1wczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzOiB2ZXJzaW9uRmllbGRzLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgLy8gdXNlRXN0aW1hdGVkQ291bnQgaXMgZmFzdGVyLCBidXQgbm90IGFjY3VyYXRlLCBhcyBpdCBpZ25vcmVzIGFueSBmaWx0ZXJzLiBJdCBpcyB0aHVzIHNldCB0byB0cnVlIGlmIHRoZXJlIGFyZSBubyBmaWx0ZXJzLlxuICAgIGNvbnN0IHVzZUVzdGltYXRlZENvdW50ID0gaGFzTmVhckNvbnN0cmFpbnQgfHwgIXF1ZXJ5IHx8IE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDA7XG4gICAgY29uc3QgcGFnaW5hdGlvbk9wdGlvbnMgPSB7XG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIGxlYW5XaXRoSWQ6IHRydWUsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBwYWdlLFxuICAgICAgICBwYWdpbmF0aW9uLFxuICAgICAgICBwcm9qZWN0aW9uOiBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHM6IHZlcnNpb25GaWVsZHMsXG4gICAgICAgICAgICBzZWxlY3RcbiAgICAgICAgfSksXG4gICAgICAgIHNvcnQsXG4gICAgICAgIHVzZUVzdGltYXRlZENvdW50XG4gICAgfTtcbiAgICBpZiAodGhpcy5jb2xsYXRpb24pIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdExvY2FsZSA9ICdlbic7XG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLmNvbGxhdGlvbiA9IHtcbiAgICAgICAgICAgIGxvY2FsZTogbG9jYWxlICYmIGxvY2FsZSAhPT0gJ2FsbCcgJiYgbG9jYWxlICE9PSAnKicgPyBsb2NhbGUgOiBkZWZhdWx0TG9jYWxlLFxuICAgICAgICAgICAgLi4udGhpcy5jb2xsYXRpb25cbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCF1c2VFc3RpbWF0ZWRDb3VudCAmJiBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwICYmIHRoaXMuZGlzYWJsZUluZGV4SGludHMgIT09IHRydWUpIHtcbiAgICAgICAgLy8gSW1wcm92ZSB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIGNvdW50RG9jdW1lbnRzIHF1ZXJ5IHdoaWNoIGlzIHVzZWQgaWYgdXNlRXN0aW1hdGVkQ291bnQgaXMgc2V0IHRvIGZhbHNlIGJ5IGFkZGluZ1xuICAgICAgICAvLyBhIGhpbnQuIEJ5IGRlZmF1bHQsIGlmIG5vIGhpbnQgaXMgcHJvdmlkZWQsIE1vbmdvREIgZG9lcyBub3QgdXNlIGFuIGluZGV4ZWQgZmllbGQgdG8gY291bnQgdGhlIHJldHVybmVkIGRvY3VtZW50cyxcbiAgICAgICAgLy8gd2hpY2ggbWFrZXMgcXVlcmllcyB2ZXJ5IHNsb3cuIFRoaXMgb25seSBoYXBwZW5zIHdoZW4gbm8gcXVlcnkgKGZpbHRlcikgaXMgcHJvdmlkZWQuIElmIG9uZSBpcyBwcm92aWRlZCwgaXQgdXNlc1xuICAgICAgICAvLyB0aGUgY29ycmVjdCBpbmRleGVkIGZpZWxkXG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLnVzZUN1c3RvbUNvdW50Rm4gPSAoKT0+e1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShNb2RlbC5jb3VudERvY3VtZW50cyhxdWVyeSwge1xuICAgICAgICAgICAgICAgIGhpbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChsaW1pdCAmJiBsaW1pdCA+PSAwKSB7XG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLmxpbWl0ID0gbGltaXQ7XG4gICAgICAgIC8vIGxpbWl0IG11c3QgYWxzbyBiZSBzZXQgaGVyZSwgaXQncyBpZ25vcmVkIHdoZW4gcGFnaW5hdGlvbiBpcyBmYWxzZVxuICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucy5vcHRpb25zLmxpbWl0ID0gbGltaXQ7XG4gICAgICAgIC8vIERpc2FibGUgcGFnaW5hdGlvbiBpZiBsaW1pdCBpcyAwXG4gICAgICAgIGlmIChsaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMucGFnaW5hdGlvbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IE1vZGVsLnBhZ2luYXRlKHF1ZXJ5LCBwYWdpbmF0aW9uT3B0aW9ucyk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogcmVzdWx0LmRvY3MsXG4gICAgICAgIGZpZWxkczogYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGdsb2JhbENvbmZpZyksXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmRHbG9iYWxWZXJzaW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findGlobalVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findOne.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findOne.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findOne: () => (/* binding */ findOne)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/aggregatePaginate.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js\");\n/* harmony import */ var _utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/buildJoinAggregation.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\nconst findOne = async function findOne({ collection: collectionSlug, draftsEnabled, joins, locale, req, select, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req);\n    const options = {\n        lean: true,\n        session\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_2__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    const projection = (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_3__.buildProjectionFromSelect)({\n        adapter: this,\n        fields: collectionConfig.flattenedFields,\n        select\n    });\n    const aggregate = await (0,_utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_4__.buildJoinAggregation)({\n        adapter: this,\n        collection: collectionSlug,\n        collectionConfig,\n        draftsEnabled,\n        joins,\n        locale,\n        projection,\n        query\n    });\n    let doc;\n    if (aggregate) {\n        const { docs } = await (0,_utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_5__.aggregatePaginate)({\n            adapter: this,\n            joinAggregation: aggregate,\n            limit: 1,\n            Model,\n            pagination: false,\n            projection,\n            query,\n            session\n        });\n        doc = docs[0];\n    } else {\n        ;\n        options.projection = projection;\n        doc = await Model.findOne(query, {}, options);\n    }\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__.transform)({\n        adapter: this,\n        data: doc,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=findOne.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9maW5kT25lLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ2dCO0FBQ007QUFDVTtBQUM1QjtBQUNGO0FBQ0Y7QUFDOUMseUNBQXlDLG1GQUFtRjtBQUNuSSxZQUFZLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMEJBQTBCLG9FQUFVO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtFQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUJBQXVCLGtHQUF5QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsNEJBQTRCLHdGQUFvQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTyxRQUFRLGtGQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9maW5kT25lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBhZ2dyZWdhdGVQYWdpbmF0ZSB9IGZyb20gJy4vdXRpbGl0aWVzL2FnZ3JlZ2F0ZVBhZ2luYXRlLmpzJztcbmltcG9ydCB7IGJ1aWxkSm9pbkFnZ3JlZ2F0aW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvYnVpbGRKb2luQWdncmVnYXRpb24uanMnO1xuaW1wb3J0IHsgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IGZpbmRPbmUgPSBhc3luYyBmdW5jdGlvbiBmaW5kT25lKHsgY29sbGVjdGlvbjogY29sbGVjdGlvblNsdWcsIGRyYWZ0c0VuYWJsZWQsIGpvaW5zLCBsb2NhbGUsIHJlcSwgc2VsZWN0LCB3aGVyZSA9IHt9IH0pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWdcbiAgICB9KTtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIHNlc3Npb25cbiAgICB9O1xuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgY29uc3QgcHJvamVjdGlvbiA9IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3Qoe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICBzZWxlY3RcbiAgICB9KTtcbiAgICBjb25zdCBhZ2dyZWdhdGUgPSBhd2FpdCBidWlsZEpvaW5BZ2dyZWdhdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICBjb2xsZWN0aW9uQ29uZmlnLFxuICAgICAgICBkcmFmdHNFbmFibGVkLFxuICAgICAgICBqb2lucyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBwcm9qZWN0aW9uLFxuICAgICAgICBxdWVyeVxuICAgIH0pO1xuICAgIGxldCBkb2M7XG4gICAgaWYgKGFnZ3JlZ2F0ZSkge1xuICAgICAgICBjb25zdCB7IGRvY3MgfSA9IGF3YWl0IGFnZ3JlZ2F0ZVBhZ2luYXRlKHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBqb2luQWdncmVnYXRpb246IGFnZ3JlZ2F0ZSxcbiAgICAgICAgICAgIGxpbWl0OiAxLFxuICAgICAgICAgICAgTW9kZWwsXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSk7XG4gICAgICAgIGRvYyA9IGRvY3NbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgO1xuICAgICAgICBvcHRpb25zLnByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuICAgICAgICBkb2MgPSBhd2FpdCBNb2RlbC5maW5kT25lKHF1ZXJ5LCB7fSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmICghZG9jKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiBkb2MsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5maWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIGRvYztcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpbmRPbmUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findOne.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findVersions.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findVersions.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findVersions: () => (/* binding */ findVersions)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\nconst findVersions = async function findVersions({ collection: collectionSlug, limit, locale, page, pagination, req = {}, select, skip, sort: sortArg, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const session = await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req);\n    const options = {\n        limit,\n        session,\n        skip\n    };\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    let sort;\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_3__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields: collectionConfig.flattenedFields,\n            locale,\n            sort: sortArg || '-updatedAt',\n            timestamps: true\n        });\n    }\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true);\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__.buildQuery)({\n        adapter: this,\n        fields,\n        locale,\n        where\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !query || Object.keys(query).length === 0;\n    const paginationOptions = {\n        lean: true,\n        leanWithId: true,\n        limit,\n        options,\n        page,\n        pagination,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_6__.buildProjectionFromSelect)({\n            adapter: this,\n            fields,\n            select\n        }),\n        sort,\n        useEstimatedCount\n    };\n    if (this.collation) {\n        const defaultLocale = 'en';\n        paginationOptions.collation = {\n            locale: locale && locale !== 'all' && locale !== '*' ? locale : defaultLocale,\n            ...this.collation\n        };\n    }\n    if (!useEstimatedCount && Object.keys(query).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        paginationOptions.useCustomCountFn = ()=>{\n            return Promise.resolve(Model.countDocuments(query, {\n                hint: {\n                    _id: 1\n                },\n                session\n            }));\n        };\n    }\n    if (limit && limit >= 0) {\n        paginationOptions.limit = limit;\n        // limit must also be set here, it's ignored when pagination is false\n        paginationOptions.options.limit = limit;\n        // Disable pagination if limit is 0\n        if (limit === 0) {\n            paginationOptions.pagination = false;\n        }\n    }\n    const result = await Model.paginate(query, paginationOptions);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_7__.transform)({\n        adapter: this,\n        data: result.docs,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collectionConfig),\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=findVersions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9maW5kVmVyc2lvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWdGO0FBQzNCO0FBQ1E7QUFDd0I7QUFDNUI7QUFDRjtBQUNGO0FBQzlDLG1EQUFtRCxxRUFBcUUsMkNBQTJDO0FBQzFLLFlBQVksMEJBQTBCLEVBQUUsc0VBQWE7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDBCQUEwQixvRUFBVTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnRUFBdUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBFQUFjO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLG1CQUFtQixxRUFBNEI7QUFDL0Msd0JBQXdCLGtFQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0EsZ0JBQWdCLHFFQUE0QjtBQUM1QztBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2ZpbmRWZXJzaW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzLCBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkU29ydFBhcmFtIH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLmpzJztcbmltcG9ydCB7IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QgfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBjb25zdCBmaW5kVmVyc2lvbnMgPSBhc3luYyBmdW5jdGlvbiBmaW5kVmVyc2lvbnMoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgbGltaXQsIGxvY2FsZSwgcGFnZSwgcGFnaW5hdGlvbiwgcmVxID0ge30sIHNlbGVjdCwgc2tpcCwgc29ydDogc29ydEFyZywgd2hlcmUgPSB7fSB9KSB7XG4gICAgY29uc3QgeyBjb2xsZWN0aW9uQ29uZmlnLCBNb2RlbCB9ID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICB2ZXJzaW9uczogdHJ1ZVxuICAgIH0pO1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHNlc3Npb24sXG4gICAgICAgIHNraXBcbiAgICB9O1xuICAgIGxldCBoYXNOZWFyQ29uc3RyYWludCA9IGZhbHNlO1xuICAgIGlmICh3aGVyZSkge1xuICAgICAgICBjb25zdCBjb25zdHJhaW50cyA9IGZsYXR0ZW5XaGVyZVRvT3BlcmF0b3JzKHdoZXJlKTtcbiAgICAgICAgaGFzTmVhckNvbnN0cmFpbnQgPSBjb25zdHJhaW50cy5zb21lKChwcm9wKT0+T2JqZWN0LmtleXMocHJvcCkuc29tZSgoa2V5KT0+a2V5ID09PSAnbmVhcicpKTtcbiAgICB9XG4gICAgbGV0IHNvcnQ7XG4gICAgaWYgKCFoYXNOZWFyQ29uc3RyYWludCkge1xuICAgICAgICBzb3J0ID0gYnVpbGRTb3J0UGFyYW0oe1xuICAgICAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5wYXlsb2FkLmNvbmZpZyxcbiAgICAgICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBzb3J0OiBzb3J0QXJnIHx8ICctdXBkYXRlZEF0JyxcbiAgICAgICAgICAgIHRpbWVzdGFtcHM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGZpZWxkcyA9IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgY29sbGVjdGlvbkNvbmZpZywgdHJ1ZSk7XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgLy8gdXNlRXN0aW1hdGVkQ291bnQgaXMgZmFzdGVyLCBidXQgbm90IGFjY3VyYXRlLCBhcyBpdCBpZ25vcmVzIGFueSBmaWx0ZXJzLiBJdCBpcyB0aHVzIHNldCB0byB0cnVlIGlmIHRoZXJlIGFyZSBubyBmaWx0ZXJzLlxuICAgIGNvbnN0IHVzZUVzdGltYXRlZENvdW50ID0gaGFzTmVhckNvbnN0cmFpbnQgfHwgIXF1ZXJ5IHx8IE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDA7XG4gICAgY29uc3QgcGFnaW5hdGlvbk9wdGlvbnMgPSB7XG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIGxlYW5XaXRoSWQ6IHRydWUsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBwYWdlLFxuICAgICAgICBwYWdpbmF0aW9uLFxuICAgICAgICBwcm9qZWN0aW9uOiBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICBzZWxlY3RcbiAgICAgICAgfSksXG4gICAgICAgIHNvcnQsXG4gICAgICAgIHVzZUVzdGltYXRlZENvdW50XG4gICAgfTtcbiAgICBpZiAodGhpcy5jb2xsYXRpb24pIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdExvY2FsZSA9ICdlbic7XG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLmNvbGxhdGlvbiA9IHtcbiAgICAgICAgICAgIGxvY2FsZTogbG9jYWxlICYmIGxvY2FsZSAhPT0gJ2FsbCcgJiYgbG9jYWxlICE9PSAnKicgPyBsb2NhbGUgOiBkZWZhdWx0TG9jYWxlLFxuICAgICAgICAgICAgLi4udGhpcy5jb2xsYXRpb25cbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCF1c2VFc3RpbWF0ZWRDb3VudCAmJiBPYmplY3Qua2V5cyhxdWVyeSkubGVuZ3RoID09PSAwICYmIHRoaXMuZGlzYWJsZUluZGV4SGludHMgIT09IHRydWUpIHtcbiAgICAgICAgLy8gSW1wcm92ZSB0aGUgcGVyZm9ybWFuY2Ugb2YgdGhlIGNvdW50RG9jdW1lbnRzIHF1ZXJ5IHdoaWNoIGlzIHVzZWQgaWYgdXNlRXN0aW1hdGVkQ291bnQgaXMgc2V0IHRvIGZhbHNlIGJ5IGFkZGluZ1xuICAgICAgICAvLyBhIGhpbnQuIEJ5IGRlZmF1bHQsIGlmIG5vIGhpbnQgaXMgcHJvdmlkZWQsIE1vbmdvREIgZG9lcyBub3QgdXNlIGFuIGluZGV4ZWQgZmllbGQgdG8gY291bnQgdGhlIHJldHVybmVkIGRvY3VtZW50cyxcbiAgICAgICAgLy8gd2hpY2ggbWFrZXMgcXVlcmllcyB2ZXJ5IHNsb3cuIFRoaXMgb25seSBoYXBwZW5zIHdoZW4gbm8gcXVlcnkgKGZpbHRlcikgaXMgcHJvdmlkZWQuIElmIG9uZSBpcyBwcm92aWRlZCwgaXQgdXNlc1xuICAgICAgICAvLyB0aGUgY29ycmVjdCBpbmRleGVkIGZpZWxkXG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLnVzZUN1c3RvbUNvdW50Rm4gPSAoKT0+e1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShNb2RlbC5jb3VudERvY3VtZW50cyhxdWVyeSwge1xuICAgICAgICAgICAgICAgIGhpbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChsaW1pdCAmJiBsaW1pdCA+PSAwKSB7XG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLmxpbWl0ID0gbGltaXQ7XG4gICAgICAgIC8vIGxpbWl0IG11c3QgYWxzbyBiZSBzZXQgaGVyZSwgaXQncyBpZ25vcmVkIHdoZW4gcGFnaW5hdGlvbiBpcyBmYWxzZVxuICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucy5vcHRpb25zLmxpbWl0ID0gbGltaXQ7XG4gICAgICAgIC8vIERpc2FibGUgcGFnaW5hdGlvbiBpZiBsaW1pdCBpcyAwXG4gICAgICAgIGlmIChsaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMucGFnaW5hdGlvbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IE1vZGVsLnBhZ2luYXRlKHF1ZXJ5LCBwYWdpbmF0aW9uT3B0aW9ucyk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogcmVzdWx0LmRvY3MsXG4gICAgICAgIGZpZWxkczogYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBjb2xsZWN0aW9uQ29uZmlnKSxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmluZFZlcnNpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findVersions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/index.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/index.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mongooseAdapter: () => (/* binding */ mongooseAdapter)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/createDatabaseAdapter.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/defaultBeginTransaction.js\");\n/* harmony import */ var _connect_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./connect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/connect.js\");\n/* harmony import */ var _count_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./count.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/count.js\");\n/* harmony import */ var _countGlobalVersions_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./countGlobalVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/countGlobalVersions.js\");\n/* harmony import */ var _countVersions_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./countVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/countVersions.js\");\n/* harmony import */ var _create_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./create.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/create.js\");\n/* harmony import */ var _createGlobal_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./createGlobal.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createGlobal.js\");\n/* harmony import */ var _createGlobalVersion_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./createGlobalVersion.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createGlobalVersion.js\");\n/* harmony import */ var _createMigration_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./createMigration.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createMigration.js\");\n/* harmony import */ var _createVersion_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./createVersion.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/createVersion.js\");\n/* harmony import */ var _deleteMany_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./deleteMany.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteMany.js\");\n/* harmony import */ var _deleteOne_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./deleteOne.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteOne.js\");\n/* harmony import */ var _deleteVersions_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./deleteVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/deleteVersions.js\");\n/* harmony import */ var _destroy_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./destroy.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/destroy.js\");\n/* harmony import */ var _find_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./find.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/find.js\");\n/* harmony import */ var _findGlobal_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./findGlobal.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findGlobal.js\");\n/* harmony import */ var _findGlobalVersions_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./findGlobalVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findGlobalVersions.js\");\n/* harmony import */ var _findOne_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./findOne.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findOne.js\");\n/* harmony import */ var _findVersions_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./findVersions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/findVersions.js\");\n/* harmony import */ var _init_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./init.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/init.js\");\n/* harmony import */ var _migrateFresh_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./migrateFresh.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/migrateFresh.js\");\n/* harmony import */ var _queryDrafts_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./queryDrafts.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queryDrafts.js\");\n/* harmony import */ var _transactions_beginTransaction_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./transactions/beginTransaction.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/beginTransaction.js\");\n/* harmony import */ var _transactions_commitTransaction_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./transactions/commitTransaction.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/commitTransaction.js\");\n/* harmony import */ var _transactions_rollbackTransaction_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./transactions/rollbackTransaction.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/rollbackTransaction.js\");\n/* harmony import */ var _updateGlobal_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./updateGlobal.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateGlobal.js\");\n/* harmony import */ var _updateGlobalVersion_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./updateGlobalVersion.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateGlobalVersion.js\");\n/* harmony import */ var _updateJobs_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./updateJobs.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateJobs.js\");\n/* harmony import */ var _updateMany_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./updateMany.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateMany.js\");\n/* harmony import */ var _updateOne_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./updateOne.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateOne.js\");\n/* harmony import */ var _updateVersion_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./updateVersion.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateVersion.js\");\n/* harmony import */ var _upsert_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./upsert.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/upsert.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mongooseAdapter({ allowAdditionalKeys = false, allowIDOnCreate = false, autoPluralization = true, collectionsSchemaOptions = {}, connectOptions, disableIndexHints = false, ensureIndexes = false, migrationDir: migrationDirArg, mongoMemoryServer, prodMigrations, transactionOptions = {}, url }) {\n    function adapter({ payload }) {\n        const migrationDir = findMigrationDir(migrationDirArg);\n        mongoose__WEBPACK_IMPORTED_MODULE_1__.set('strictQuery', false);\n        return (0,payload__WEBPACK_IMPORTED_MODULE_3__.createDatabaseAdapter)({\n            name: 'mongoose',\n            // Mongoose-specific\n            autoPluralization,\n            collections: {},\n            // @ts-expect-error initialize without a connection\n            connection: undefined,\n            connectOptions: connectOptions || {},\n            disableIndexHints,\n            ensureIndexes,\n            // @ts-expect-error don't have globals model yet\n            globals: undefined,\n            // @ts-expect-error Should not be required\n            mongoMemoryServer,\n            sessions: {},\n            transactionOptions: transactionOptions === false ? undefined : transactionOptions,\n            updateJobs: _updateJobs_js__WEBPACK_IMPORTED_MODULE_4__.updateJobs,\n            updateMany: _updateMany_js__WEBPACK_IMPORTED_MODULE_5__.updateMany,\n            url,\n            versions: {},\n            // DatabaseAdapter\n            allowAdditionalKeys,\n            allowIDOnCreate,\n            beginTransaction: transactionOptions === false ? (0,payload__WEBPACK_IMPORTED_MODULE_6__.defaultBeginTransaction)() : _transactions_beginTransaction_js__WEBPACK_IMPORTED_MODULE_7__.beginTransaction,\n            collectionsSchemaOptions,\n            commitTransaction: _transactions_commitTransaction_js__WEBPACK_IMPORTED_MODULE_8__.commitTransaction,\n            connect: _connect_js__WEBPACK_IMPORTED_MODULE_9__.connect,\n            count: _count_js__WEBPACK_IMPORTED_MODULE_10__.count,\n            countGlobalVersions: _countGlobalVersions_js__WEBPACK_IMPORTED_MODULE_11__.countGlobalVersions,\n            countVersions: _countVersions_js__WEBPACK_IMPORTED_MODULE_12__.countVersions,\n            create: _create_js__WEBPACK_IMPORTED_MODULE_13__.create,\n            createGlobal: _createGlobal_js__WEBPACK_IMPORTED_MODULE_14__.createGlobal,\n            createGlobalVersion: _createGlobalVersion_js__WEBPACK_IMPORTED_MODULE_15__.createGlobalVersion,\n            createMigration: _createMigration_js__WEBPACK_IMPORTED_MODULE_16__.createMigration,\n            createVersion: _createVersion_js__WEBPACK_IMPORTED_MODULE_17__.createVersion,\n            defaultIDType: 'text',\n            deleteMany: _deleteMany_js__WEBPACK_IMPORTED_MODULE_18__.deleteMany,\n            deleteOne: _deleteOne_js__WEBPACK_IMPORTED_MODULE_19__.deleteOne,\n            deleteVersions: _deleteVersions_js__WEBPACK_IMPORTED_MODULE_20__.deleteVersions,\n            destroy: _destroy_js__WEBPACK_IMPORTED_MODULE_21__.destroy,\n            find: _find_js__WEBPACK_IMPORTED_MODULE_22__.find,\n            findGlobal: _findGlobal_js__WEBPACK_IMPORTED_MODULE_23__.findGlobal,\n            findGlobalVersions: _findGlobalVersions_js__WEBPACK_IMPORTED_MODULE_24__.findGlobalVersions,\n            findOne: _findOne_js__WEBPACK_IMPORTED_MODULE_25__.findOne,\n            findVersions: _findVersions_js__WEBPACK_IMPORTED_MODULE_26__.findVersions,\n            init: _init_js__WEBPACK_IMPORTED_MODULE_27__.init,\n            migrateFresh: _migrateFresh_js__WEBPACK_IMPORTED_MODULE_28__.migrateFresh,\n            migrationDir,\n            packageName: '@payloadcms/db-mongodb',\n            payload,\n            prodMigrations,\n            queryDrafts: _queryDrafts_js__WEBPACK_IMPORTED_MODULE_29__.queryDrafts,\n            rollbackTransaction: _transactions_rollbackTransaction_js__WEBPACK_IMPORTED_MODULE_30__.rollbackTransaction,\n            updateGlobal: _updateGlobal_js__WEBPACK_IMPORTED_MODULE_31__.updateGlobal,\n            updateGlobalVersion: _updateGlobalVersion_js__WEBPACK_IMPORTED_MODULE_32__.updateGlobalVersion,\n            updateOne: _updateOne_js__WEBPACK_IMPORTED_MODULE_33__.updateOne,\n            updateVersion: _updateVersion_js__WEBPACK_IMPORTED_MODULE_34__.updateVersion,\n            upsert: _upsert_js__WEBPACK_IMPORTED_MODULE_35__.upsert\n        });\n    }\n    return {\n        name: 'mongoose',\n        allowIDOnCreate,\n        defaultIDType: 'text',\n        init: adapter\n    };\n}\n/**\n * Attempt to find migrations directory.\n *\n * Checks for the following directories in order:\n * - `migrationDir` argument from Payload config\n * - `src/migrations`\n * - `dist/migrations`\n * - `migrations`\n *\n * Defaults to `src/migrations`\n *\n * @param migrationDir\n * @returns\n */ function findMigrationDir(migrationDir) {\n    const cwd = process.cwd();\n    const srcDir = path__WEBPACK_IMPORTED_MODULE_2__.resolve(cwd, 'src/migrations');\n    const distDir = path__WEBPACK_IMPORTED_MODULE_2__.resolve(cwd, 'dist/migrations');\n    const relativeMigrations = path__WEBPACK_IMPORTED_MODULE_2__.resolve(cwd, 'migrations');\n    // Use arg if provided\n    if (migrationDir) {\n        return migrationDir;\n    }\n    // Check other common locations\n    if (fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(srcDir)) {\n        return srcDir;\n    }\n    if (fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(distDir)) {\n        return distDir;\n    }\n    if (fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(relativeMigrations)) {\n        return relativeMigrations;\n    }\n    return srcDir;\n}\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9CO0FBQ1k7QUFDUjtBQUNpRDtBQUNsQztBQUNKO0FBQzRCO0FBQ1o7QUFDZDtBQUNZO0FBQ2M7QUFDUjtBQUNKO0FBQ047QUFDRjtBQUNVO0FBQ2Q7QUFDTjtBQUNZO0FBQ2dCO0FBQ3RCO0FBQ1U7QUFDaEI7QUFDZ0I7QUFDRjtBQUN1QjtBQUNFO0FBQ0k7QUFDM0I7QUFDYztBQUNsQjtBQUNBO0FBQ0Y7QUFDUTtBQUNkO0FBQzlCLDJCQUEyQiw2R0FBNkcsNkpBQTZKLE9BQU87QUFDblQsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQSxRQUFRLHlDQUFZO0FBQ3BCLGVBQWUsOERBQXFCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLHNCQUFzQjtBQUN0QixzQkFBc0I7QUFDdEI7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGdFQUF1QixLQUFLLCtFQUFnQjtBQUN6RztBQUNBLDZCQUE2QjtBQUM3QixtQkFBbUI7QUFDbkIsaUJBQWlCO0FBQ2pCLCtCQUErQjtBQUMvQix5QkFBeUI7QUFDekIsa0JBQWtCO0FBQ2xCLHdCQUF3QjtBQUN4QiwrQkFBK0I7QUFDL0IsMkJBQTJCO0FBQzNCLHlCQUF5QjtBQUN6QjtBQUNBLHNCQUFzQjtBQUN0QixxQkFBcUI7QUFDckIsMEJBQTBCO0FBQzFCLG1CQUFtQjtBQUNuQixnQkFBZ0I7QUFDaEIsc0JBQXNCO0FBQ3RCLDhCQUE4QjtBQUM5QixtQkFBbUI7QUFDbkIsd0JBQXdCO0FBQ3hCLGdCQUFnQjtBQUNoQix3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsK0JBQStCO0FBQy9CLHdCQUF3QjtBQUN4QiwrQkFBK0I7QUFDL0IscUJBQXFCO0FBQ3JCLHlCQUF5QjtBQUN6QixrQkFBa0I7QUFDbEIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseUNBQVk7QUFDL0Isb0JBQW9CLHlDQUFZO0FBQ2hDLCtCQUErQix5Q0FBWTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwQ0FBYTtBQUNyQjtBQUNBO0FBQ0EsUUFBUSwwQ0FBYTtBQUNyQjtBQUNBO0FBQ0EsUUFBUSwwQ0FBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgY3JlYXRlRGF0YWJhc2VBZGFwdGVyLCBkZWZhdWx0QmVnaW5UcmFuc2FjdGlvbiB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJy4vY29ubmVjdC5qcyc7XG5pbXBvcnQgeyBjb3VudCB9IGZyb20gJy4vY291bnQuanMnO1xuaW1wb3J0IHsgY291bnRHbG9iYWxWZXJzaW9ucyB9IGZyb20gJy4vY291bnRHbG9iYWxWZXJzaW9ucy5qcyc7XG5pbXBvcnQgeyBjb3VudFZlcnNpb25zIH0gZnJvbSAnLi9jb3VudFZlcnNpb25zLmpzJztcbmltcG9ydCB7IGNyZWF0ZSB9IGZyb20gJy4vY3JlYXRlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUdsb2JhbCB9IGZyb20gJy4vY3JlYXRlR2xvYmFsLmpzJztcbmltcG9ydCB7IGNyZWF0ZUdsb2JhbFZlcnNpb24gfSBmcm9tICcuL2NyZWF0ZUdsb2JhbFZlcnNpb24uanMnO1xuaW1wb3J0IHsgY3JlYXRlTWlncmF0aW9uIH0gZnJvbSAnLi9jcmVhdGVNaWdyYXRpb24uanMnO1xuaW1wb3J0IHsgY3JlYXRlVmVyc2lvbiB9IGZyb20gJy4vY3JlYXRlVmVyc2lvbi5qcyc7XG5pbXBvcnQgeyBkZWxldGVNYW55IH0gZnJvbSAnLi9kZWxldGVNYW55LmpzJztcbmltcG9ydCB7IGRlbGV0ZU9uZSB9IGZyb20gJy4vZGVsZXRlT25lLmpzJztcbmltcG9ydCB7IGRlbGV0ZVZlcnNpb25zIH0gZnJvbSAnLi9kZWxldGVWZXJzaW9ucy5qcyc7XG5pbXBvcnQgeyBkZXN0cm95IH0gZnJvbSAnLi9kZXN0cm95LmpzJztcbmltcG9ydCB7IGZpbmQgfSBmcm9tICcuL2ZpbmQuanMnO1xuaW1wb3J0IHsgZmluZEdsb2JhbCB9IGZyb20gJy4vZmluZEdsb2JhbC5qcyc7XG5pbXBvcnQgeyBmaW5kR2xvYmFsVmVyc2lvbnMgfSBmcm9tICcuL2ZpbmRHbG9iYWxWZXJzaW9ucy5qcyc7XG5pbXBvcnQgeyBmaW5kT25lIH0gZnJvbSAnLi9maW5kT25lLmpzJztcbmltcG9ydCB7IGZpbmRWZXJzaW9ucyB9IGZyb20gJy4vZmluZFZlcnNpb25zLmpzJztcbmltcG9ydCB7IGluaXQgfSBmcm9tICcuL2luaXQuanMnO1xuaW1wb3J0IHsgbWlncmF0ZUZyZXNoIH0gZnJvbSAnLi9taWdyYXRlRnJlc2guanMnO1xuaW1wb3J0IHsgcXVlcnlEcmFmdHMgfSBmcm9tICcuL3F1ZXJ5RHJhZnRzLmpzJztcbmltcG9ydCB7IGJlZ2luVHJhbnNhY3Rpb24gfSBmcm9tICcuL3RyYW5zYWN0aW9ucy9iZWdpblRyYW5zYWN0aW9uLmpzJztcbmltcG9ydCB7IGNvbW1pdFRyYW5zYWN0aW9uIH0gZnJvbSAnLi90cmFuc2FjdGlvbnMvY29tbWl0VHJhbnNhY3Rpb24uanMnO1xuaW1wb3J0IHsgcm9sbGJhY2tUcmFuc2FjdGlvbiB9IGZyb20gJy4vdHJhbnNhY3Rpb25zL3JvbGxiYWNrVHJhbnNhY3Rpb24uanMnO1xuaW1wb3J0IHsgdXBkYXRlR2xvYmFsIH0gZnJvbSAnLi91cGRhdGVHbG9iYWwuanMnO1xuaW1wb3J0IHsgdXBkYXRlR2xvYmFsVmVyc2lvbiB9IGZyb20gJy4vdXBkYXRlR2xvYmFsVmVyc2lvbi5qcyc7XG5pbXBvcnQgeyB1cGRhdGVKb2JzIH0gZnJvbSAnLi91cGRhdGVKb2JzLmpzJztcbmltcG9ydCB7IHVwZGF0ZU1hbnkgfSBmcm9tICcuL3VwZGF0ZU1hbnkuanMnO1xuaW1wb3J0IHsgdXBkYXRlT25lIH0gZnJvbSAnLi91cGRhdGVPbmUuanMnO1xuaW1wb3J0IHsgdXBkYXRlVmVyc2lvbiB9IGZyb20gJy4vdXBkYXRlVmVyc2lvbi5qcyc7XG5pbXBvcnQgeyB1cHNlcnQgfSBmcm9tICcuL3Vwc2VydC5qcyc7XG5leHBvcnQgZnVuY3Rpb24gbW9uZ29vc2VBZGFwdGVyKHsgYWxsb3dBZGRpdGlvbmFsS2V5cyA9IGZhbHNlLCBhbGxvd0lET25DcmVhdGUgPSBmYWxzZSwgYXV0b1BsdXJhbGl6YXRpb24gPSB0cnVlLCBjb2xsZWN0aW9uc1NjaGVtYU9wdGlvbnMgPSB7fSwgY29ubmVjdE9wdGlvbnMsIGRpc2FibGVJbmRleEhpbnRzID0gZmFsc2UsIGVuc3VyZUluZGV4ZXMgPSBmYWxzZSwgbWlncmF0aW9uRGlyOiBtaWdyYXRpb25EaXJBcmcsIG1vbmdvTWVtb3J5U2VydmVyLCBwcm9kTWlncmF0aW9ucywgdHJhbnNhY3Rpb25PcHRpb25zID0ge30sIHVybCB9KSB7XG4gICAgZnVuY3Rpb24gYWRhcHRlcih7IHBheWxvYWQgfSkge1xuICAgICAgICBjb25zdCBtaWdyYXRpb25EaXIgPSBmaW5kTWlncmF0aW9uRGlyKG1pZ3JhdGlvbkRpckFyZyk7XG4gICAgICAgIG1vbmdvb3NlLnNldCgnc3RyaWN0UXVlcnknLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiBjcmVhdGVEYXRhYmFzZUFkYXB0ZXIoe1xuICAgICAgICAgICAgbmFtZTogJ21vbmdvb3NlJyxcbiAgICAgICAgICAgIC8vIE1vbmdvb3NlLXNwZWNpZmljXG4gICAgICAgICAgICBhdXRvUGx1cmFsaXphdGlvbixcbiAgICAgICAgICAgIGNvbGxlY3Rpb25zOiB7fSxcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgaW5pdGlhbGl6ZSB3aXRob3V0IGEgY29ubmVjdGlvblxuICAgICAgICAgICAgY29ubmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29ubmVjdE9wdGlvbnM6IGNvbm5lY3RPcHRpb25zIHx8IHt9LFxuICAgICAgICAgICAgZGlzYWJsZUluZGV4SGludHMsXG4gICAgICAgICAgICBlbnN1cmVJbmRleGVzLFxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBkb24ndCBoYXZlIGdsb2JhbHMgbW9kZWwgeWV0XG4gICAgICAgICAgICBnbG9iYWxzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFNob3VsZCBub3QgYmUgcmVxdWlyZWRcbiAgICAgICAgICAgIG1vbmdvTWVtb3J5U2VydmVyLFxuICAgICAgICAgICAgc2Vzc2lvbnM6IHt9LFxuICAgICAgICAgICAgdHJhbnNhY3Rpb25PcHRpb25zOiB0cmFuc2FjdGlvbk9wdGlvbnMgPT09IGZhbHNlID8gdW5kZWZpbmVkIDogdHJhbnNhY3Rpb25PcHRpb25zLFxuICAgICAgICAgICAgdXBkYXRlSm9icyxcbiAgICAgICAgICAgIHVwZGF0ZU1hbnksXG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICB2ZXJzaW9uczoge30sXG4gICAgICAgICAgICAvLyBEYXRhYmFzZUFkYXB0ZXJcbiAgICAgICAgICAgIGFsbG93QWRkaXRpb25hbEtleXMsXG4gICAgICAgICAgICBhbGxvd0lET25DcmVhdGUsXG4gICAgICAgICAgICBiZWdpblRyYW5zYWN0aW9uOiB0cmFuc2FjdGlvbk9wdGlvbnMgPT09IGZhbHNlID8gZGVmYXVsdEJlZ2luVHJhbnNhY3Rpb24oKSA6IGJlZ2luVHJhbnNhY3Rpb24sXG4gICAgICAgICAgICBjb2xsZWN0aW9uc1NjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICBjb21taXRUcmFuc2FjdGlvbixcbiAgICAgICAgICAgIGNvbm5lY3QsXG4gICAgICAgICAgICBjb3VudCxcbiAgICAgICAgICAgIGNvdW50R2xvYmFsVmVyc2lvbnMsXG4gICAgICAgICAgICBjb3VudFZlcnNpb25zLFxuICAgICAgICAgICAgY3JlYXRlLFxuICAgICAgICAgICAgY3JlYXRlR2xvYmFsLFxuICAgICAgICAgICAgY3JlYXRlR2xvYmFsVmVyc2lvbixcbiAgICAgICAgICAgIGNyZWF0ZU1pZ3JhdGlvbixcbiAgICAgICAgICAgIGNyZWF0ZVZlcnNpb24sXG4gICAgICAgICAgICBkZWZhdWx0SURUeXBlOiAndGV4dCcsXG4gICAgICAgICAgICBkZWxldGVNYW55LFxuICAgICAgICAgICAgZGVsZXRlT25lLFxuICAgICAgICAgICAgZGVsZXRlVmVyc2lvbnMsXG4gICAgICAgICAgICBkZXN0cm95LFxuICAgICAgICAgICAgZmluZCxcbiAgICAgICAgICAgIGZpbmRHbG9iYWwsXG4gICAgICAgICAgICBmaW5kR2xvYmFsVmVyc2lvbnMsXG4gICAgICAgICAgICBmaW5kT25lLFxuICAgICAgICAgICAgZmluZFZlcnNpb25zLFxuICAgICAgICAgICAgaW5pdCxcbiAgICAgICAgICAgIG1pZ3JhdGVGcmVzaCxcbiAgICAgICAgICAgIG1pZ3JhdGlvbkRpcixcbiAgICAgICAgICAgIHBhY2thZ2VOYW1lOiAnQHBheWxvYWRjbXMvZGItbW9uZ29kYicsXG4gICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgcHJvZE1pZ3JhdGlvbnMsXG4gICAgICAgICAgICBxdWVyeURyYWZ0cyxcbiAgICAgICAgICAgIHJvbGxiYWNrVHJhbnNhY3Rpb24sXG4gICAgICAgICAgICB1cGRhdGVHbG9iYWwsXG4gICAgICAgICAgICB1cGRhdGVHbG9iYWxWZXJzaW9uLFxuICAgICAgICAgICAgdXBkYXRlT25lLFxuICAgICAgICAgICAgdXBkYXRlVmVyc2lvbixcbiAgICAgICAgICAgIHVwc2VydFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogJ21vbmdvb3NlJyxcbiAgICAgICAgYWxsb3dJRE9uQ3JlYXRlLFxuICAgICAgICBkZWZhdWx0SURUeXBlOiAndGV4dCcsXG4gICAgICAgIGluaXQ6IGFkYXB0ZXJcbiAgICB9O1xufVxuLyoqXG4gKiBBdHRlbXB0IHRvIGZpbmQgbWlncmF0aW9ucyBkaXJlY3RvcnkuXG4gKlxuICogQ2hlY2tzIGZvciB0aGUgZm9sbG93aW5nIGRpcmVjdG9yaWVzIGluIG9yZGVyOlxuICogLSBgbWlncmF0aW9uRGlyYCBhcmd1bWVudCBmcm9tIFBheWxvYWQgY29uZmlnXG4gKiAtIGBzcmMvbWlncmF0aW9uc2BcbiAqIC0gYGRpc3QvbWlncmF0aW9uc2BcbiAqIC0gYG1pZ3JhdGlvbnNgXG4gKlxuICogRGVmYXVsdHMgdG8gYHNyYy9taWdyYXRpb25zYFxuICpcbiAqIEBwYXJhbSBtaWdyYXRpb25EaXJcbiAqIEByZXR1cm5zXG4gKi8gZnVuY3Rpb24gZmluZE1pZ3JhdGlvbkRpcihtaWdyYXRpb25EaXIpIHtcbiAgICBjb25zdCBjd2QgPSBwcm9jZXNzLmN3ZCgpO1xuICAgIGNvbnN0IHNyY0RpciA9IHBhdGgucmVzb2x2ZShjd2QsICdzcmMvbWlncmF0aW9ucycpO1xuICAgIGNvbnN0IGRpc3REaXIgPSBwYXRoLnJlc29sdmUoY3dkLCAnZGlzdC9taWdyYXRpb25zJyk7XG4gICAgY29uc3QgcmVsYXRpdmVNaWdyYXRpb25zID0gcGF0aC5yZXNvbHZlKGN3ZCwgJ21pZ3JhdGlvbnMnKTtcbiAgICAvLyBVc2UgYXJnIGlmIHByb3ZpZGVkXG4gICAgaWYgKG1pZ3JhdGlvbkRpcikge1xuICAgICAgICByZXR1cm4gbWlncmF0aW9uRGlyO1xuICAgIH1cbiAgICAvLyBDaGVjayBvdGhlciBjb21tb24gbG9jYXRpb25zXG4gICAgaWYgKGZzLmV4aXN0c1N5bmMoc3JjRGlyKSkge1xuICAgICAgICByZXR1cm4gc3JjRGlyO1xuICAgIH1cbiAgICBpZiAoZnMuZXhpc3RzU3luYyhkaXN0RGlyKSkge1xuICAgICAgICByZXR1cm4gZGlzdERpcjtcbiAgICB9XG4gICAgaWYgKGZzLmV4aXN0c1N5bmMocmVsYXRpdmVNaWdyYXRpb25zKSkge1xuICAgICAgICByZXR1cm4gcmVsYXRpdmVNaWdyYXRpb25zO1xuICAgIH1cbiAgICByZXR1cm4gc3JjRGlyO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/init.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/init.js ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   init: () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongoose-paginate-v2 */ \"(rsc)/./node_modules/.pnpm/mongoose-paginate-v2@1.8.5/node_modules/mongoose-paginate-v2/dist/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildVersionCompoundIndexes.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var _models_buildCollectionSchema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./models/buildCollectionSchema.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildCollectionSchema.js\");\n/* harmony import */ var _models_buildGlobalModel_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./models/buildGlobalModel.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildGlobalModel.js\");\n/* harmony import */ var _models_buildSchema_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./models/buildSchema.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js\");\n/* harmony import */ var _queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./queries/getBuildQueryPlugin.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js\");\n/* harmony import */ var _utilities_getDBName_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/getDBName.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getDBName.js\");\n\n\n\n\n\n\n\n\nconst init = function init() {\n    this.payload.config.collections.forEach((collection)=>{\n        const schemaOptions = this.collectionsSchemaOptions?.[collection.slug];\n        const schema = (0,_models_buildCollectionSchema_js__WEBPACK_IMPORTED_MODULE_2__.buildCollectionSchema)(collection, this.payload, schemaOptions);\n        if (collection.versions) {\n            const versionModelName = (0,_utilities_getDBName_js__WEBPACK_IMPORTED_MODULE_3__.getDBName)({\n                config: collection,\n                versions: true\n            });\n            const versionCollectionFields = (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collection);\n            const versionSchema = (0,_models_buildSchema_js__WEBPACK_IMPORTED_MODULE_5__.buildSchema)({\n                buildSchemaOptions: {\n                    disableUnique: true,\n                    draftsEnabled: true,\n                    indexSortableFields: this.payload.config.indexSortableFields,\n                    options: {\n                        minimize: false,\n                        timestamps: false,\n                        ...schemaOptions\n                    }\n                },\n                compoundIndexes: (0,payload__WEBPACK_IMPORTED_MODULE_6__.buildVersionCompoundIndexes)({\n                    indexes: collection.sanitizedIndexes\n                }),\n                configFields: versionCollectionFields,\n                payload: this.payload\n            });\n            versionSchema.plugin(mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_1__, {\n                useEstimatedCount: true\n            }).plugin((0,_queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_7__.getBuildQueryPlugin)({\n                collectionSlug: collection.slug,\n                versionsFields: (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(this.payload.config, collection, true)\n            }));\n            const versionCollectionName = this.autoPluralization === true && !collection.dbName ? undefined : versionModelName;\n            this.versions[collection.slug] = mongoose__WEBPACK_IMPORTED_MODULE_0__.model(versionModelName, versionSchema, versionCollectionName);\n        }\n        const modelName = (0,_utilities_getDBName_js__WEBPACK_IMPORTED_MODULE_3__.getDBName)({\n            config: collection\n        });\n        const collectionName = this.autoPluralization === true && !collection.dbName ? undefined : modelName;\n        this.collections[collection.slug] = mongoose__WEBPACK_IMPORTED_MODULE_0__.model(modelName, schema, collectionName);\n    });\n    this.globals = (0,_models_buildGlobalModel_js__WEBPACK_IMPORTED_MODULE_8__.buildGlobalModel)(this.payload);\n    this.payload.config.globals.forEach((global)=>{\n        if (global.versions) {\n            const versionModelName = (0,_utilities_getDBName_js__WEBPACK_IMPORTED_MODULE_3__.getDBName)({\n                config: global,\n                versions: true\n            });\n            const versionGlobalFields = (0,payload__WEBPACK_IMPORTED_MODULE_9__.buildVersionGlobalFields)(this.payload.config, global);\n            const versionSchema = (0,_models_buildSchema_js__WEBPACK_IMPORTED_MODULE_5__.buildSchema)({\n                buildSchemaOptions: {\n                    disableUnique: true,\n                    draftsEnabled: true,\n                    indexSortableFields: this.payload.config.indexSortableFields,\n                    options: {\n                        minimize: false,\n                        timestamps: false\n                    }\n                },\n                configFields: versionGlobalFields,\n                payload: this.payload\n            });\n            versionSchema.plugin(mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_1__, {\n                useEstimatedCount: true\n            }).plugin((0,_queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_7__.getBuildQueryPlugin)({\n                versionsFields: (0,payload__WEBPACK_IMPORTED_MODULE_9__.buildVersionGlobalFields)(this.payload.config, global, true)\n            }));\n            this.versions[global.slug] = mongoose__WEBPACK_IMPORTED_MODULE_0__.model(versionModelName, versionSchema, versionModelName);\n        }\n    });\n};\n\n//# sourceMappingURL=init.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9pbml0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWdDO0FBQ1k7QUFDa0U7QUFDcEM7QUFDVjtBQUNWO0FBQ2lCO0FBQ2xCO0FBQzlDO0FBQ1A7QUFDQTtBQUNBLHVCQUF1Qix1RkFBcUI7QUFDNUM7QUFDQSxxQ0FBcUMsa0VBQVM7QUFDOUM7QUFDQTtBQUNBLGFBQWE7QUFDYiw0Q0FBNEMscUVBQTRCO0FBQ3hFLGtDQUFrQyxtRUFBVztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsaUNBQWlDLG9FQUEyQjtBQUM1RDtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiLGlDQUFpQyxpREFBUTtBQUN6QztBQUNBLGFBQWEsU0FBUyxvRkFBbUI7QUFDekM7QUFDQSxnQ0FBZ0MscUVBQTRCO0FBQzVELGFBQWE7QUFDYjtBQUNBLDZDQUE2QywyQ0FBYztBQUMzRDtBQUNBLDBCQUEwQixrRUFBUztBQUNuQztBQUNBLFNBQVM7QUFDVDtBQUNBLDRDQUE0QywyQ0FBYztBQUMxRCxLQUFLO0FBQ0wsbUJBQW1CLDZFQUFnQjtBQUNuQztBQUNBO0FBQ0EscUNBQXFDLGtFQUFTO0FBQzlDO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isd0NBQXdDLGlFQUF3QjtBQUNoRSxrQ0FBa0MsbUVBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsYUFBYTtBQUNiLGlDQUFpQyxpREFBUTtBQUN6QztBQUNBLGFBQWEsU0FBUyxvRkFBbUI7QUFDekMsZ0NBQWdDLGlFQUF3QjtBQUN4RCxhQUFhO0FBQ2IseUNBQXlDLDJDQUFjO0FBQ3ZEO0FBQ0EsS0FBSztBQUNMOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L2luaXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBwYWdpbmF0ZSBmcm9tICdtb25nb29zZS1wYWdpbmF0ZS12Mic7XG5pbXBvcnQgeyBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzLCBidWlsZFZlcnNpb25Db21wb3VuZEluZGV4ZXMsIGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRDb2xsZWN0aW9uU2NoZW1hIH0gZnJvbSAnLi9tb2RlbHMvYnVpbGRDb2xsZWN0aW9uU2NoZW1hLmpzJztcbmltcG9ydCB7IGJ1aWxkR2xvYmFsTW9kZWwgfSBmcm9tICcuL21vZGVscy9idWlsZEdsb2JhbE1vZGVsLmpzJztcbmltcG9ydCB7IGJ1aWxkU2NoZW1hIH0gZnJvbSAnLi9tb2RlbHMvYnVpbGRTY2hlbWEuanMnO1xuaW1wb3J0IHsgZ2V0QnVpbGRRdWVyeVBsdWdpbiB9IGZyb20gJy4vcXVlcmllcy9nZXRCdWlsZFF1ZXJ5UGx1Z2luLmpzJztcbmltcG9ydCB7IGdldERCTmFtZSB9IGZyb20gJy4vdXRpbGl0aWVzL2dldERCTmFtZS5qcyc7XG5leHBvcnQgY29uc3QgaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdGhpcy5wYXlsb2FkLmNvbmZpZy5jb2xsZWN0aW9ucy5mb3JFYWNoKChjb2xsZWN0aW9uKT0+e1xuICAgICAgICBjb25zdCBzY2hlbWFPcHRpb25zID0gdGhpcy5jb2xsZWN0aW9uc1NjaGVtYU9wdGlvbnM/Lltjb2xsZWN0aW9uLnNsdWddO1xuICAgICAgICBjb25zdCBzY2hlbWEgPSBidWlsZENvbGxlY3Rpb25TY2hlbWEoY29sbGVjdGlvbiwgdGhpcy5wYXlsb2FkLCBzY2hlbWFPcHRpb25zKTtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24udmVyc2lvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25Nb2RlbE5hbWUgPSBnZXREQk5hbWUoe1xuICAgICAgICAgICAgICAgIGNvbmZpZzogY29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICB2ZXJzaW9uczogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyA9IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgY29sbGVjdGlvbik7XG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uU2NoZW1hID0gYnVpbGRTY2hlbWEoe1xuICAgICAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVW5pcXVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkcmFmdHNFbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpbmRleFNvcnRhYmxlRmllbGRzOiB0aGlzLnBheWxvYWQuY29uZmlnLmluZGV4U29ydGFibGVGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltaXplOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcHM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uc2NoZW1hT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb21wb3VuZEluZGV4ZXM6IGJ1aWxkVmVyc2lvbkNvbXBvdW5kSW5kZXhlcyh7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXM6IGNvbGxlY3Rpb24uc2FuaXRpemVkSW5kZXhlc1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGNvbmZpZ0ZpZWxkczogdmVyc2lvbkNvbGxlY3Rpb25GaWVsZHMsXG4gICAgICAgICAgICAgICAgcGF5bG9hZDogdGhpcy5wYXlsb2FkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZlcnNpb25TY2hlbWEucGx1Z2luKHBhZ2luYXRlLCB7XG4gICAgICAgICAgICAgICAgdXNlRXN0aW1hdGVkQ291bnQ6IHRydWVcbiAgICAgICAgICAgIH0pLnBsdWdpbihnZXRCdWlsZFF1ZXJ5UGx1Z2luKHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZzogY29sbGVjdGlvbi5zbHVnLFxuICAgICAgICAgICAgICAgIHZlcnNpb25zRmllbGRzOiBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGNvbGxlY3Rpb24sIHRydWUpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uQ29sbGVjdGlvbk5hbWUgPSB0aGlzLmF1dG9QbHVyYWxpemF0aW9uID09PSB0cnVlICYmICFjb2xsZWN0aW9uLmRiTmFtZSA/IHVuZGVmaW5lZCA6IHZlcnNpb25Nb2RlbE5hbWU7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb25zW2NvbGxlY3Rpb24uc2x1Z10gPSBtb25nb29zZS5tb2RlbCh2ZXJzaW9uTW9kZWxOYW1lLCB2ZXJzaW9uU2NoZW1hLCB2ZXJzaW9uQ29sbGVjdGlvbk5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZGVsTmFtZSA9IGdldERCTmFtZSh7XG4gICAgICAgICAgICBjb25maWc6IGNvbGxlY3Rpb25cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25OYW1lID0gdGhpcy5hdXRvUGx1cmFsaXphdGlvbiA9PT0gdHJ1ZSAmJiAhY29sbGVjdGlvbi5kYk5hbWUgPyB1bmRlZmluZWQgOiBtb2RlbE5hbWU7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbnNbY29sbGVjdGlvbi5zbHVnXSA9IG1vbmdvb3NlLm1vZGVsKG1vZGVsTmFtZSwgc2NoZW1hLCBjb2xsZWN0aW9uTmFtZSk7XG4gICAgfSk7XG4gICAgdGhpcy5nbG9iYWxzID0gYnVpbGRHbG9iYWxNb2RlbCh0aGlzLnBheWxvYWQpO1xuICAgIHRoaXMucGF5bG9hZC5jb25maWcuZ2xvYmFscy5mb3JFYWNoKChnbG9iYWwpPT57XG4gICAgICAgIGlmIChnbG9iYWwudmVyc2lvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25Nb2RlbE5hbWUgPSBnZXREQk5hbWUoe1xuICAgICAgICAgICAgICAgIGNvbmZpZzogZ2xvYmFsLFxuICAgICAgICAgICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25HbG9iYWxGaWVsZHMgPSBidWlsZFZlcnNpb25HbG9iYWxGaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgZ2xvYmFsKTtcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25TY2hlbWEgPSBidWlsZFNjaGVtYSh7XG4gICAgICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVVbmlxdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRyYWZ0c0VuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4U29ydGFibGVGaWVsZHM6IHRoaXMucGF5bG9hZC5jb25maWcuaW5kZXhTb3J0YWJsZUZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1pemU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wczogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29uZmlnRmllbGRzOiB2ZXJzaW9uR2xvYmFsRmllbGRzLFxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHRoaXMucGF5bG9hZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2ZXJzaW9uU2NoZW1hLnBsdWdpbihwYWdpbmF0ZSwge1xuICAgICAgICAgICAgICAgIHVzZUVzdGltYXRlZENvdW50OiB0cnVlXG4gICAgICAgICAgICB9KS5wbHVnaW4oZ2V0QnVpbGRRdWVyeVBsdWdpbih7XG4gICAgICAgICAgICAgICAgdmVyc2lvbnNGaWVsZHM6IGJ1aWxkVmVyc2lvbkdsb2JhbEZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBnbG9iYWwsIHRydWUpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb25zW2dsb2JhbC5zbHVnXSA9IG1vbmdvb3NlLm1vZGVsKHZlcnNpb25Nb2RlbE5hbWUsIHZlcnNpb25TY2hlbWEsIHZlcnNpb25Nb2RlbE5hbWUpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbml0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/init.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/migrateFresh.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/migrateFresh.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   migrateFresh: () => (/* binding */ migrateFresh)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/migrations/readMigrationFiles.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/initTransaction.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/commitTransaction.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/killTransaction.js\");\n/* harmony import */ var prompts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prompts */ \"(rsc)/./node_modules/.pnpm/prompts@2.4.2/node_modules/prompts/index.js\");\n\n\n/**\n * Drop the current database and run all migrate up functions\n */ async function migrateFresh({ forceAcceptWarning = false }) {\n    const { payload } = this;\n    if (!forceAcceptWarning) {\n        const { confirm: acceptWarning } = await prompts__WEBPACK_IMPORTED_MODULE_0__({\n            name: 'confirm',\n            type: 'confirm',\n            initial: false,\n            message: `WARNING: This will drop your database and run all migrations. Are you sure you want to proceed?`\n        }, {\n            onCancel: ()=>{\n                process.exit(0);\n            }\n        });\n        if (!acceptWarning) {\n            process.exit(0);\n        }\n    }\n    payload.logger.info({\n        msg: `Dropping database.`\n    });\n    await this.connection.dropDatabase();\n    const migrationFiles = await (0,payload__WEBPACK_IMPORTED_MODULE_1__.readMigrationFiles)({\n        payload\n    });\n    payload.logger.debug({\n        msg: `Found ${migrationFiles.length} migration files.`\n    });\n    const req = {\n        payload\n    };\n    // Run all migrate up\n    for (const migration of migrationFiles){\n        payload.logger.info({\n            msg: `Migrating: ${migration.name}`\n        });\n        try {\n            const start = Date.now();\n            await (0,payload__WEBPACK_IMPORTED_MODULE_2__.initTransaction)(req);\n            await migration.up({\n                payload,\n                req\n            });\n            await payload.create({\n                collection: 'payload-migrations',\n                data: {\n                    name: migration.name,\n                    batch: 1\n                },\n                req\n            });\n            await (0,payload__WEBPACK_IMPORTED_MODULE_3__.commitTransaction)(req);\n            payload.logger.info({\n                msg: `Migrated:  ${migration.name} (${Date.now() - start}ms)`\n            });\n        } catch (err) {\n            await (0,payload__WEBPACK_IMPORTED_MODULE_4__.killTransaction)(req);\n            payload.logger.error({\n                err,\n                msg: `Error running migration ${migration.name}. Rolling back.`\n            });\n            throw err;\n        }\n    }\n}\n\n//# sourceMappingURL=migrateFresh.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9taWdyYXRlRnJlc2guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWtHO0FBQ3BFO0FBQzlCO0FBQ0E7QUFDQSxJQUFXLDhCQUE4Qiw0QkFBNEI7QUFDckUsWUFBWSxVQUFVO0FBQ3RCO0FBQ0EsZ0JBQWdCLHlCQUF5QixRQUFRLG9DQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxpQ0FBaUMsMkRBQWtCO0FBQ25EO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0JBQXNCLHVCQUF1QjtBQUM3QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGVBQWU7QUFDOUMsU0FBUztBQUNUO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQWU7QUFDakM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2Isa0JBQWtCLDBEQUFpQjtBQUNuQztBQUNBLG1DQUFtQyxnQkFBZ0IsR0FBRyxtQkFBbUI7QUFDekUsYUFBYTtBQUNiLFVBQVU7QUFDVixrQkFBa0Isd0RBQWU7QUFDakM7QUFDQTtBQUNBLGdEQUFnRCxlQUFlO0FBQy9ELGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9taWdyYXRlRnJlc2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tbWl0VHJhbnNhY3Rpb24sIGluaXRUcmFuc2FjdGlvbiwga2lsbFRyYW5zYWN0aW9uLCByZWFkTWlncmF0aW9uRmlsZXMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCBwcm9tcHRzIGZyb20gJ3Byb21wdHMnO1xuLyoqXG4gKiBEcm9wIHRoZSBjdXJyZW50IGRhdGFiYXNlIGFuZCBydW4gYWxsIG1pZ3JhdGUgdXAgZnVuY3Rpb25zXG4gKi8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZ3JhdGVGcmVzaCh7IGZvcmNlQWNjZXB0V2FybmluZyA9IGZhbHNlIH0pIHtcbiAgICBjb25zdCB7IHBheWxvYWQgfSA9IHRoaXM7XG4gICAgaWYgKCFmb3JjZUFjY2VwdFdhcm5pbmcpIHtcbiAgICAgICAgY29uc3QgeyBjb25maXJtOiBhY2NlcHRXYXJuaW5nIH0gPSBhd2FpdCBwcm9tcHRzKHtcbiAgICAgICAgICAgIG5hbWU6ICdjb25maXJtJyxcbiAgICAgICAgICAgIHR5cGU6ICdjb25maXJtJyxcbiAgICAgICAgICAgIGluaXRpYWw6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogYFdBUk5JTkc6IFRoaXMgd2lsbCBkcm9wIHlvdXIgZGF0YWJhc2UgYW5kIHJ1biBhbGwgbWlncmF0aW9ucy4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHByb2NlZWQ/YFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBvbkNhbmNlbDogKCk9PntcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWFjY2VwdFdhcm5pbmcpIHtcbiAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXlsb2FkLmxvZ2dlci5pbmZvKHtcbiAgICAgICAgbXNnOiBgRHJvcHBpbmcgZGF0YWJhc2UuYFxuICAgIH0pO1xuICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5kcm9wRGF0YWJhc2UoKTtcbiAgICBjb25zdCBtaWdyYXRpb25GaWxlcyA9IGF3YWl0IHJlYWRNaWdyYXRpb25GaWxlcyh7XG4gICAgICAgIHBheWxvYWRcbiAgICB9KTtcbiAgICBwYXlsb2FkLmxvZ2dlci5kZWJ1Zyh7XG4gICAgICAgIG1zZzogYEZvdW5kICR7bWlncmF0aW9uRmlsZXMubGVuZ3RofSBtaWdyYXRpb24gZmlsZXMuYFxuICAgIH0pO1xuICAgIGNvbnN0IHJlcSA9IHtcbiAgICAgICAgcGF5bG9hZFxuICAgIH07XG4gICAgLy8gUnVuIGFsbCBtaWdyYXRlIHVwXG4gICAgZm9yIChjb25zdCBtaWdyYXRpb24gb2YgbWlncmF0aW9uRmlsZXMpe1xuICAgICAgICBwYXlsb2FkLmxvZ2dlci5pbmZvKHtcbiAgICAgICAgICAgIG1zZzogYE1pZ3JhdGluZzogJHttaWdyYXRpb24ubmFtZX1gXG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgYXdhaXQgaW5pdFRyYW5zYWN0aW9uKHJlcSk7XG4gICAgICAgICAgICBhd2FpdCBtaWdyYXRpb24udXAoe1xuICAgICAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICAgICAgcmVxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHBheWxvYWQuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uOiAncGF5bG9hZC1taWdyYXRpb25zJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG1pZ3JhdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBiYXRjaDogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IGNvbW1pdFRyYW5zYWN0aW9uKHJlcSk7XG4gICAgICAgICAgICBwYXlsb2FkLmxvZ2dlci5pbmZvKHtcbiAgICAgICAgICAgICAgICBtc2c6IGBNaWdyYXRlZDogICR7bWlncmF0aW9uLm5hbWV9ICgke0RhdGUubm93KCkgLSBzdGFydH1tcylgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBhd2FpdCBraWxsVHJhbnNhY3Rpb24ocmVxKTtcbiAgICAgICAgICAgIHBheWxvYWQubG9nZ2VyLmVycm9yKHtcbiAgICAgICAgICAgICAgICBlcnIsXG4gICAgICAgICAgICAgICAgbXNnOiBgRXJyb3IgcnVubmluZyBtaWdyYXRpb24gJHttaWdyYXRpb24ubmFtZX0uIFJvbGxpbmcgYmFjay5gXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlncmF0ZUZyZXNoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/migrateFresh.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildCollectionSchema.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildCollectionSchema.js ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildCollectionSchema: () => (/* binding */ buildCollectionSchema)\n/* harmony export */ });\n/* harmony import */ var mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose-paginate-v2 */ \"(rsc)/./node_modules/.pnpm/mongoose-paginate-v2@1.8.5/node_modules/mongoose-paginate-v2/dist/index.js\");\n/* harmony import */ var _queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../queries/getBuildQueryPlugin.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js\");\n/* harmony import */ var _buildSchema_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buildSchema.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js\");\n\n\n\nconst buildCollectionSchema = (collection, payload, schemaOptions = {})=>{\n    const schema = (0,_buildSchema_js__WEBPACK_IMPORTED_MODULE_1__.buildSchema)({\n        buildSchemaOptions: {\n            draftsEnabled: Boolean(typeof collection?.versions === 'object' && collection.versions.drafts),\n            indexSortableFields: payload.config.indexSortableFields,\n            options: {\n                minimize: false,\n                timestamps: collection.timestamps !== false,\n                ...schemaOptions\n            }\n        },\n        compoundIndexes: collection.sanitizedIndexes,\n        configFields: collection.fields,\n        payload\n    });\n    if (Array.isArray(collection.upload.filenameCompoundIndex)) {\n        const indexDefinition = collection.upload.filenameCompoundIndex.reduce((acc, index)=>{\n            acc[index] = 1;\n            return acc;\n        }, {});\n        schema.index(indexDefinition, {\n            unique: true\n        });\n    }\n    schema.plugin(mongoose_paginate_v2__WEBPACK_IMPORTED_MODULE_0__, {\n        useEstimatedCount: true\n    }).plugin((0,_queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_2__.getBuildQueryPlugin)({\n        collectionSlug: collection.slug\n    }));\n    return schema;\n};\n\n//# sourceMappingURL=buildCollectionSchema.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9tb2RlbHMvYnVpbGRDb2xsZWN0aW9uU2NoZW1hLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEM7QUFDNEI7QUFDekI7QUFDeEMsc0VBQXNFO0FBQzdFLG1CQUFtQiw0REFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsSUFBSTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrQkFBa0IsaURBQVE7QUFDMUI7QUFDQSxLQUFLLFNBQVMsb0ZBQW1CO0FBQ2pDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvbW9kZWxzL2J1aWxkQ29sbGVjdGlvblNjaGVtYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGFnaW5hdGUgZnJvbSAnbW9uZ29vc2UtcGFnaW5hdGUtdjInO1xuaW1wb3J0IHsgZ2V0QnVpbGRRdWVyeVBsdWdpbiB9IGZyb20gJy4uL3F1ZXJpZXMvZ2V0QnVpbGRRdWVyeVBsdWdpbi5qcyc7XG5pbXBvcnQgeyBidWlsZFNjaGVtYSB9IGZyb20gJy4vYnVpbGRTY2hlbWEuanMnO1xuZXhwb3J0IGNvbnN0IGJ1aWxkQ29sbGVjdGlvblNjaGVtYSA9IChjb2xsZWN0aW9uLCBwYXlsb2FkLCBzY2hlbWFPcHRpb25zID0ge30pPT57XG4gICAgY29uc3Qgc2NoZW1hID0gYnVpbGRTY2hlbWEoe1xuICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnM6IHtcbiAgICAgICAgICAgIGRyYWZ0c0VuYWJsZWQ6IEJvb2xlYW4odHlwZW9mIGNvbGxlY3Rpb24/LnZlcnNpb25zID09PSAnb2JqZWN0JyAmJiBjb2xsZWN0aW9uLnZlcnNpb25zLmRyYWZ0cyksXG4gICAgICAgICAgICBpbmRleFNvcnRhYmxlRmllbGRzOiBwYXlsb2FkLmNvbmZpZy5pbmRleFNvcnRhYmxlRmllbGRzLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIG1pbmltaXplOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBzOiBjb2xsZWN0aW9uLnRpbWVzdGFtcHMgIT09IGZhbHNlLFxuICAgICAgICAgICAgICAgIC4uLnNjaGVtYU9wdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY29tcG91bmRJbmRleGVzOiBjb2xsZWN0aW9uLnNhbml0aXplZEluZGV4ZXMsXG4gICAgICAgIGNvbmZpZ0ZpZWxkczogY29sbGVjdGlvbi5maWVsZHMsXG4gICAgICAgIHBheWxvYWRcbiAgICB9KTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb2xsZWN0aW9uLnVwbG9hZC5maWxlbmFtZUNvbXBvdW5kSW5kZXgpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4RGVmaW5pdGlvbiA9IGNvbGxlY3Rpb24udXBsb2FkLmZpbGVuYW1lQ29tcG91bmRJbmRleC5yZWR1Y2UoKGFjYywgaW5kZXgpPT57XG4gICAgICAgICAgICBhY2NbaW5kZXhdID0gMTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgc2NoZW1hLmluZGV4KGluZGV4RGVmaW5pdGlvbiwge1xuICAgICAgICAgICAgdW5pcXVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzY2hlbWEucGx1Z2luKHBhZ2luYXRlLCB7XG4gICAgICAgIHVzZUVzdGltYXRlZENvdW50OiB0cnVlXG4gICAgfSkucGx1Z2luKGdldEJ1aWxkUXVlcnlQbHVnaW4oe1xuICAgICAgICBjb2xsZWN0aW9uU2x1ZzogY29sbGVjdGlvbi5zbHVnXG4gICAgfSkpO1xuICAgIHJldHVybiBzY2hlbWE7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZENvbGxlY3Rpb25TY2hlbWEuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildCollectionSchema.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildGlobalModel.js":
/*!*********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildGlobalModel.js ***!
  \*********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildGlobalModel: () => (/* binding */ buildGlobalModel)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var _queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../queries/getBuildQueryPlugin.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js\");\n/* harmony import */ var _buildSchema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buildSchema.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js\");\n\n\n\nconst buildGlobalModel = (payload)=>{\n    if (payload.config.globals && payload.config.globals.length > 0) {\n        const globalsSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({}, {\n            discriminatorKey: 'globalType',\n            minimize: false,\n            timestamps: true\n        });\n        globalsSchema.plugin((0,_queries_getBuildQueryPlugin_js__WEBPACK_IMPORTED_MODULE_1__.getBuildQueryPlugin)());\n        const Globals = mongoose__WEBPACK_IMPORTED_MODULE_0__.model('globals', globalsSchema, 'globals');\n        Object.values(payload.config.globals).forEach((globalConfig)=>{\n            const globalSchema = (0,_buildSchema_js__WEBPACK_IMPORTED_MODULE_2__.buildSchema)({\n                buildSchemaOptions: {\n                    options: {\n                        minimize: false\n                    }\n                },\n                configFields: globalConfig.fields,\n                payload\n            });\n            Globals.discriminator(globalConfig.slug, globalSchema);\n        });\n        return Globals;\n    }\n    return null;\n};\n\n//# sourceMappingURL=buildGlobalModel.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9tb2RlbHMvYnVpbGRHbG9iYWxNb2RlbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBQ3dDO0FBQ3pCO0FBQ3hDO0FBQ1A7QUFDQSxrQ0FBa0MsNENBQWUsR0FBRztBQUNwRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsNkJBQTZCLG9GQUFtQjtBQUNoRCx3QkFBd0IsMkNBQWM7QUFDdEM7QUFDQSxpQ0FBaUMsNERBQVc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9tb2RlbHMvYnVpbGRHbG9iYWxNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgZ2V0QnVpbGRRdWVyeVBsdWdpbiB9IGZyb20gJy4uL3F1ZXJpZXMvZ2V0QnVpbGRRdWVyeVBsdWdpbi5qcyc7XG5pbXBvcnQgeyBidWlsZFNjaGVtYSB9IGZyb20gJy4vYnVpbGRTY2hlbWEuanMnO1xuZXhwb3J0IGNvbnN0IGJ1aWxkR2xvYmFsTW9kZWwgPSAocGF5bG9hZCk9PntcbiAgICBpZiAocGF5bG9hZC5jb25maWcuZ2xvYmFscyAmJiBwYXlsb2FkLmNvbmZpZy5nbG9iYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZ2xvYmFsc1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe30sIHtcbiAgICAgICAgICAgIGRpc2NyaW1pbmF0b3JLZXk6ICdnbG9iYWxUeXBlJyxcbiAgICAgICAgICAgIG1pbmltaXplOiBmYWxzZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcHM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGdsb2JhbHNTY2hlbWEucGx1Z2luKGdldEJ1aWxkUXVlcnlQbHVnaW4oKSk7XG4gICAgICAgIGNvbnN0IEdsb2JhbHMgPSBtb25nb29zZS5tb2RlbCgnZ2xvYmFscycsIGdsb2JhbHNTY2hlbWEsICdnbG9iYWxzJyk7XG4gICAgICAgIE9iamVjdC52YWx1ZXMocGF5bG9hZC5jb25maWcuZ2xvYmFscykuZm9yRWFjaCgoZ2xvYmFsQ29uZmlnKT0+e1xuICAgICAgICAgICAgY29uc3QgZ2xvYmFsU2NoZW1hID0gYnVpbGRTY2hlbWEoe1xuICAgICAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWl6ZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29uZmlnRmllbGRzOiBnbG9iYWxDb25maWcuZmllbGRzLFxuICAgICAgICAgICAgICAgIHBheWxvYWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgR2xvYmFscy5kaXNjcmltaW5hdG9yKGdsb2JhbENvbmZpZy5zbHVnLCBnbG9iYWxTY2hlbWEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEdsb2JhbHM7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVpbGRHbG9iYWxNb2RlbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildGlobalModel.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildSchema: () => (/* binding */ buildSchema)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/fields/config/types.js\");\n\n\n/**\n * get a field's defaultValue only if defined and not dynamic so that it can be set on the field schema\n * @param field\n */ const formatDefaultValue = (field)=>typeof field.defaultValue !== 'undefined' && typeof field.defaultValue !== 'function' ? field.defaultValue : undefined;\nconst formatBaseSchema = ({ buildSchemaOptions, field, parentIsLocalized })=>{\n    const { disableUnique, draftsEnabled, indexSortableFields } = buildSchemaOptions;\n    const schema = {\n        default: formatDefaultValue(field),\n        index: field.index || !disableUnique && field.unique || indexSortableFields || false,\n        required: false,\n        unique: !disableUnique && field.unique || false\n    };\n    if (schema.unique && ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field,\n        parentIsLocalized\n    }) || draftsEnabled || (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field) && field.type !== 'group' && field.type !== 'tab' && field.required !== true)) {\n        schema.sparse = true;\n    }\n    if (field.hidden) {\n        schema.hidden = true;\n    }\n    return schema;\n};\nconst localizeSchema = (entity, schema, localization, parentIsLocalized)=>{\n    if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field: entity,\n        parentIsLocalized\n    }) && localization && Array.isArray(localization.locales)) {\n        return {\n            type: localization.localeCodes.reduce((localeSchema, locale)=>({\n                    ...localeSchema,\n                    [locale]: schema\n                }), {\n                _id: false\n            }),\n            localized: true\n        };\n    }\n    return schema;\n};\nconst buildSchema = (args)=>{\n    const { buildSchemaOptions = {}, configFields, parentIsLocalized, payload } = args;\n    const { allowIDField, options } = buildSchemaOptions;\n    let fields = {};\n    let schemaFields = configFields;\n    if (!allowIDField) {\n        const idField = schemaFields.find((field)=>(0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field) && field.name === 'id');\n        if (idField) {\n            fields = {\n                _id: idField.type === 'number' ? Number : String\n            };\n            schemaFields = schemaFields.filter((field)=>!((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field) && field.name === 'id'));\n        }\n    }\n    const schema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema(fields, options);\n    schemaFields.forEach((field)=>{\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(field)) {\n            return;\n        }\n        if (!(0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsPresentationalOnly)(field)) {\n            const addFieldSchema = getSchemaGenerator(field.type);\n            if (addFieldSchema) {\n                addFieldSchema(field, schema, payload, buildSchemaOptions, parentIsLocalized ?? false);\n            }\n        }\n    });\n    if (args.compoundIndexes) {\n        for (const index of args.compoundIndexes){\n            const indexDefinition = {};\n            for (const field of index.fields){\n                if (field.pathHasLocalized && payload.config.localization) {\n                    for (const locale of payload.config.localization.locales){\n                        indexDefinition[field.localizedPath.replace('<locale>', locale.code)] = 1;\n                    }\n                } else {\n                    indexDefinition[field.path] = 1;\n                }\n            }\n            schema.index(indexDefinition, {\n                unique: args.buildSchemaOptions.disableUnique ? false : index.unique\n            });\n        }\n    }\n    return schema;\n};\nconst array = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: [\n            buildSchema({\n                buildSchemaOptions: {\n                    allowIDField: true,\n                    disableUnique: buildSchemaOptions.disableUnique,\n                    draftsEnabled: buildSchemaOptions.draftsEnabled,\n                    options: {\n                        _id: false,\n                        id: false,\n                        minimize: false\n                    }\n                },\n                configFields: field.fields,\n                parentIsLocalized: parentIsLocalized || field.localized,\n                payload\n            })\n        ]\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst blocks = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const fieldSchema = {\n        type: [\n            new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({}, {\n                _id: false,\n                discriminatorKey: 'blockType'\n            })\n        ]\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, fieldSchema, payload.config.localization, parentIsLocalized)\n    });\n    (field.blockReferences ?? field.blocks).forEach((blockItem)=>{\n        const blockSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({}, {\n            _id: false,\n            id: false\n        });\n        const block = typeof blockItem === 'string' ? payload.blocks[blockItem] : blockItem;\n        if (!block) {\n            return;\n        }\n        block.fields.forEach((blockField)=>{\n            const addFieldSchema = getSchemaGenerator(blockField.type);\n            if (addFieldSchema) {\n                addFieldSchema(blockField, blockSchema, payload, buildSchemaOptions, (parentIsLocalized || field.localized) ?? false);\n            }\n        });\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n            field,\n            parentIsLocalized\n        }) && payload.config.localization) {\n            payload.config.localization.localeCodes.forEach((localeCode)=>{\n                // @ts-expect-error Possible incorrect typing in mongoose types, this works\n                schema.path(`${field.name}.${localeCode}`).discriminator(block.slug, blockSchema);\n            });\n        } else {\n            // @ts-expect-error Possible incorrect typing in mongoose types, this works\n            schema.path(field.name).discriminator(block.slug, blockSchema);\n        }\n    });\n};\nconst checkbox = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: Boolean\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst code = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst collapsible = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    field.fields.forEach((subField)=>{\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(subField)) {\n            return;\n        }\n        const addFieldSchema = getSchemaGenerator(subField.type);\n        if (addFieldSchema) {\n            addFieldSchema(subField, schema, payload, buildSchemaOptions, parentIsLocalized);\n        }\n    });\n};\nconst date = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: Date\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst email = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst group = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field)) {\n        const formattedBaseSchema = formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        });\n        // carry indexSortableFields through to versions if drafts enabled\n        const indexSortableFields = buildSchemaOptions.indexSortableFields && field.name === 'version' && buildSchemaOptions.draftsEnabled;\n        const baseSchema = {\n            ...formattedBaseSchema,\n            type: buildSchema({\n                buildSchemaOptions: {\n                    disableUnique: buildSchemaOptions.disableUnique,\n                    draftsEnabled: buildSchemaOptions.draftsEnabled,\n                    indexSortableFields,\n                    options: {\n                        _id: false,\n                        id: false,\n                        minimize: false\n                    }\n                },\n                configFields: field.fields,\n                parentIsLocalized: parentIsLocalized || field.localized,\n                payload\n            })\n        };\n        schema.add({\n            [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n        });\n    } else {\n        field.fields.forEach((subField)=>{\n            if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(subField)) {\n                return;\n            }\n            const addFieldSchema = getSchemaGenerator(subField.type);\n            if (addFieldSchema) {\n                addFieldSchema(subField, schema, payload, buildSchemaOptions, (parentIsLocalized || field.localized) ?? false);\n            }\n        });\n    }\n};\nconst json = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst number = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: field.hasMany ? [\n            Number\n        ] : Number\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst point = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        type: {\n            type: String,\n            enum: [\n                'Point'\n            ],\n            ...typeof field.defaultValue !== 'undefined' && {\n                default: 'Point'\n            }\n        },\n        coordinates: {\n            type: [\n                Number\n            ],\n            default: formatDefaultValue(field),\n            required: false\n        }\n    };\n    if (buildSchemaOptions.disableUnique && field.unique && (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field,\n        parentIsLocalized\n    })) {\n        baseSchema.coordinates.sparse = true;\n    }\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n    if (field.index === true || field.index === undefined) {\n        const indexOptions = {};\n        if (!buildSchemaOptions.disableUnique && field.unique) {\n            indexOptions.sparse = true;\n            indexOptions.unique = true;\n        }\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n            field,\n            parentIsLocalized\n        }) && payload.config.localization) {\n            payload.config.localization.locales.forEach((locale)=>{\n                schema.index({\n                    [`${field.name}.${locale.code}`]: '2dsphere'\n                }, indexOptions);\n            });\n        } else {\n            schema.index({\n                [field.name]: '2dsphere'\n            }, indexOptions);\n        }\n    }\n};\nconst radio = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String,\n        enum: field.options.map((option)=>{\n            if (typeof option === 'object') {\n                return option.value;\n            }\n            return option;\n        })\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst relationship = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const hasManyRelations = Array.isArray(field.relationTo);\n    let schemaToReturn = {};\n    const valueType = getRelationshipValueType(field, payload);\n    if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field,\n        parentIsLocalized\n    }) && payload.config.localization) {\n        schemaToReturn = {\n            _id: false,\n            type: payload.config.localization.localeCodes.reduce((locales, locale)=>{\n                let localeSchema = {};\n                if (hasManyRelations) {\n                    localeSchema = {\n                        ...formatBaseSchema({\n                            buildSchemaOptions,\n                            field,\n                            parentIsLocalized\n                        }),\n                        _id: false,\n                        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed,\n                        relationTo: {\n                            type: String,\n                            enum: field.relationTo\n                        },\n                        value: {\n                            type: valueType,\n                            refPath: `${field.name}.${locale}.relationTo`\n                        }\n                    };\n                } else {\n                    localeSchema = {\n                        ...formatBaseSchema({\n                            buildSchemaOptions,\n                            field,\n                            parentIsLocalized\n                        }),\n                        type: valueType,\n                        ref: field.relationTo\n                    };\n                }\n                return {\n                    ...locales,\n                    [locale]: field.hasMany ? {\n                        type: [\n                            localeSchema\n                        ],\n                        default: formatDefaultValue(field)\n                    } : localeSchema\n                };\n            }, {}),\n            localized: true\n        };\n    } else if (hasManyRelations) {\n        schemaToReturn = {\n            ...formatBaseSchema({\n                buildSchemaOptions,\n                field,\n                parentIsLocalized\n            }),\n            _id: false,\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed,\n            relationTo: {\n                type: String,\n                enum: field.relationTo\n            },\n            value: {\n                type: valueType,\n                refPath: `${field.name}.relationTo`\n            }\n        };\n        if (field.hasMany) {\n            schemaToReturn = {\n                type: [\n                    schemaToReturn\n                ],\n                default: formatDefaultValue(field)\n            };\n        }\n    } else {\n        schemaToReturn = {\n            ...formatBaseSchema({\n                buildSchemaOptions,\n                field,\n                parentIsLocalized\n            }),\n            type: valueType,\n            ref: field.relationTo\n        };\n        if (field.hasMany) {\n            schemaToReturn = {\n                type: [\n                    schemaToReturn\n                ],\n                default: formatDefaultValue(field)\n            };\n        }\n    }\n    schema.add({\n        [field.name]: schemaToReturn\n    });\n};\nconst richText = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst row = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    field.fields.forEach((subField)=>{\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(subField)) {\n            return;\n        }\n        const addFieldSchema = getSchemaGenerator(subField.type);\n        if (addFieldSchema) {\n            addFieldSchema(subField, schema, payload, buildSchemaOptions, parentIsLocalized);\n        }\n    });\n};\nconst select = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String,\n        enum: field.options.map((option)=>{\n            if (typeof option === 'object') {\n                return option.value;\n            }\n            return option;\n        })\n    };\n    if (buildSchemaOptions.draftsEnabled || !field.required) {\n        ;\n        baseSchema.enum.push(null);\n    }\n    schema.add({\n        [field.name]: localizeSchema(field, field.hasMany ? [\n            baseSchema\n        ] : baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst tabs = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    field.tabs.forEach((tab)=>{\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.tabHasName)(tab)) {\n            if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(tab)) {\n                return;\n            }\n            const baseSchema = {\n                type: buildSchema({\n                    buildSchemaOptions: {\n                        disableUnique: buildSchemaOptions.disableUnique,\n                        draftsEnabled: buildSchemaOptions.draftsEnabled,\n                        options: {\n                            _id: false,\n                            id: false,\n                            minimize: false\n                        }\n                    },\n                    configFields: tab.fields,\n                    parentIsLocalized: parentIsLocalized || tab.localized,\n                    payload\n                })\n            };\n            schema.add({\n                [tab.name]: localizeSchema(tab, baseSchema, payload.config.localization, parentIsLocalized)\n            });\n        } else {\n            tab.fields.forEach((subField)=>{\n                if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldIsVirtual)(subField)) {\n                    return;\n                }\n                const addFieldSchema = getSchemaGenerator(subField.type);\n                if (addFieldSchema) {\n                    addFieldSchema(subField, schema, payload, buildSchemaOptions, (parentIsLocalized || tab.localized) ?? false);\n                }\n            });\n        }\n    });\n};\nconst text = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: field.hasMany ? [\n            String\n        ] : String\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst textarea = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const baseSchema = {\n        ...formatBaseSchema({\n            buildSchemaOptions,\n            field,\n            parentIsLocalized\n        }),\n        type: String\n    };\n    schema.add({\n        [field.name]: localizeSchema(field, baseSchema, payload.config.localization, parentIsLocalized)\n    });\n};\nconst upload = (field, schema, payload, buildSchemaOptions, parentIsLocalized)=>{\n    const hasManyRelations = Array.isArray(field.relationTo);\n    let schemaToReturn = {};\n    const valueType = getRelationshipValueType(field, payload);\n    if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n        field,\n        parentIsLocalized\n    }) && payload.config.localization) {\n        schemaToReturn = {\n            _id: false,\n            type: payload.config.localization.localeCodes.reduce((locales, locale)=>{\n                let localeSchema = {};\n                if (hasManyRelations) {\n                    localeSchema = {\n                        ...formatBaseSchema({\n                            buildSchemaOptions,\n                            field,\n                            parentIsLocalized\n                        }),\n                        _id: false,\n                        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed,\n                        relationTo: {\n                            type: String,\n                            enum: field.relationTo\n                        },\n                        value: {\n                            type: valueType,\n                            refPath: `${field.name}.${locale}.relationTo`\n                        }\n                    };\n                } else {\n                    localeSchema = {\n                        ...formatBaseSchema({\n                            buildSchemaOptions,\n                            field,\n                            parentIsLocalized\n                        }),\n                        type: valueType,\n                        ref: field.relationTo\n                    };\n                }\n                return {\n                    ...locales,\n                    [locale]: field.hasMany ? {\n                        type: [\n                            localeSchema\n                        ],\n                        default: formatDefaultValue(field)\n                    } : localeSchema\n                };\n            }, {}),\n            localized: true\n        };\n    } else if (hasManyRelations) {\n        schemaToReturn = {\n            ...formatBaseSchema({\n                buildSchemaOptions,\n                field,\n                parentIsLocalized\n            }),\n            _id: false,\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed,\n            relationTo: {\n                type: String,\n                enum: field.relationTo\n            },\n            value: {\n                type: valueType,\n                refPath: `${field.name}.relationTo`\n            }\n        };\n        if (field.hasMany) {\n            schemaToReturn = {\n                type: [\n                    schemaToReturn\n                ],\n                default: formatDefaultValue(field)\n            };\n        }\n    } else {\n        schemaToReturn = {\n            ...formatBaseSchema({\n                buildSchemaOptions,\n                field,\n                parentIsLocalized\n            }),\n            type: valueType,\n            ref: field.relationTo\n        };\n        if (field.hasMany) {\n            schemaToReturn = {\n                type: [\n                    schemaToReturn\n                ],\n                default: formatDefaultValue(field)\n            };\n        }\n    }\n    schema.add({\n        [field.name]: schemaToReturn\n    });\n};\nconst getSchemaGenerator = (fieldType)=>{\n    if (fieldType in fieldToSchemaMap) {\n        return fieldToSchemaMap[fieldType];\n    }\n    return null;\n};\nconst fieldToSchemaMap = {\n    array,\n    blocks,\n    checkbox,\n    code,\n    collapsible,\n    date,\n    email,\n    group,\n    json,\n    number,\n    point,\n    radio,\n    relationship,\n    richText,\n    row,\n    select,\n    tabs,\n    text,\n    textarea,\n    upload\n};\nconst getRelationshipValueType = (field, payload)=>{\n    if (typeof field.relationTo === 'string') {\n        const customIDType = payload.collections[field.relationTo]?.customIDType;\n        if (!customIDType) {\n            return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId;\n        }\n        if (customIDType === 'number') {\n            return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Number;\n        }\n        return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.String;\n    }\n    // has custom id relationTo\n    if (field.relationTo.some((relationTo)=>{\n        return !!payload.collections[relationTo]?.customIDType;\n    })) {\n        return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed;\n    }\n    return mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId;\n};\n\n//# sourceMappingURL=buildSchema.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9tb2RlbHMvYnVpbGRTY2hlbWEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBQ2lHO0FBQ2pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDhDQUE4QztBQUMxRSxZQUFZLG9EQUFvRDtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0VBQXNCO0FBQ2hEO0FBQ0E7QUFDQSxLQUFLLHNCQUFzQixnRUFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0VBQXNCO0FBQzlCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSx1QkFBdUIsNkNBQTZDO0FBQ2hGLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxnRUFBZ0I7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsZ0VBQWdCO0FBQzFFO0FBQ0E7QUFDQSx1QkFBdUIsNENBQWU7QUFDdEM7QUFDQSxZQUFZLDhEQUFjO0FBQzFCO0FBQ0E7QUFDQSxhQUFhLHlFQUF5QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw0Q0FBZSxHQUFHO0FBQ2xDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxnQ0FBZ0MsNENBQWUsR0FBRztBQUNsRDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxZQUFZLHNFQUFzQjtBQUNsQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwrQkFBK0IsV0FBVyxHQUFHLFdBQVc7QUFDeEQsYUFBYTtBQUNiLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFFBQVEsZ0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ047QUFDQSxnQkFBZ0IsOERBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsY0FBYyw0Q0FBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxzRUFBc0I7QUFDbEY7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHNFQUFzQjtBQUNsQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx3QkFBd0IsV0FBVyxHQUFHLFlBQVk7QUFDbEQsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYixVQUFVO0FBQ1Y7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzRUFBc0I7QUFDOUI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDhCQUE4Qiw0Q0FBZTtBQUM3QztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHdDQUF3QyxXQUFXLEdBQUcsT0FBTztBQUM3RDtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLGFBQWEsSUFBSTtBQUNqQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxrQkFBa0IsNENBQWU7QUFDakM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSw0QkFBNEIsV0FBVztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsY0FBYyw0Q0FBZTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBEQUFVO0FBQ3RCLGdCQUFnQiw4REFBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixVQUFVO0FBQ1Y7QUFDQSxvQkFBb0IsOERBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzRUFBc0I7QUFDOUI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDhCQUE4Qiw0Q0FBZTtBQUM3QztBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLHdDQUF3QyxXQUFXLEdBQUcsT0FBTztBQUM3RDtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLGFBQWEsSUFBSTtBQUNqQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxrQkFBa0IsNENBQWU7QUFDakM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSw0QkFBNEIsV0FBVztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRDQUFlO0FBQ2xDO0FBQ0E7QUFDQSxtQkFBbUIsNENBQWU7QUFDbEM7QUFDQSxlQUFlLDRDQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGVBQWUsNENBQWU7QUFDOUI7QUFDQSxXQUFXLDRDQUFlO0FBQzFCOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L21vZGVscy9idWlsZFNjaGVtYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgZmllbGRBZmZlY3RzRGF0YSwgZmllbGRJc1ByZXNlbnRhdGlvbmFsT25seSwgZmllbGRJc1ZpcnR1YWwsIGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQsIHRhYkhhc05hbWUgfSBmcm9tICdwYXlsb2FkL3NoYXJlZCc7XG4vKipcbiAqIGdldCBhIGZpZWxkJ3MgZGVmYXVsdFZhbHVlIG9ubHkgaWYgZGVmaW5lZCBhbmQgbm90IGR5bmFtaWMgc28gdGhhdCBpdCBjYW4gYmUgc2V0IG9uIHRoZSBmaWVsZCBzY2hlbWFcbiAqIEBwYXJhbSBmaWVsZFxuICovIGNvbnN0IGZvcm1hdERlZmF1bHRWYWx1ZSA9IChmaWVsZCk9PnR5cGVvZiBmaWVsZC5kZWZhdWx0VmFsdWUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBmaWVsZC5kZWZhdWx0VmFsdWUgIT09ICdmdW5jdGlvbicgPyBmaWVsZC5kZWZhdWx0VmFsdWUgOiB1bmRlZmluZWQ7XG5jb25zdCBmb3JtYXRCYXNlU2NoZW1hID0gKHsgYnVpbGRTY2hlbWFPcHRpb25zLCBmaWVsZCwgcGFyZW50SXNMb2NhbGl6ZWQgfSk9PntcbiAgICBjb25zdCB7IGRpc2FibGVVbmlxdWUsIGRyYWZ0c0VuYWJsZWQsIGluZGV4U29ydGFibGVGaWVsZHMgfSA9IGJ1aWxkU2NoZW1hT3B0aW9ucztcbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIGRlZmF1bHQ6IGZvcm1hdERlZmF1bHRWYWx1ZShmaWVsZCksXG4gICAgICAgIGluZGV4OiBmaWVsZC5pbmRleCB8fCAhZGlzYWJsZVVuaXF1ZSAmJiBmaWVsZC51bmlxdWUgfHwgaW5kZXhTb3J0YWJsZUZpZWxkcyB8fCBmYWxzZSxcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB1bmlxdWU6ICFkaXNhYmxlVW5pcXVlICYmIGZpZWxkLnVuaXF1ZSB8fCBmYWxzZVxuICAgIH07XG4gICAgaWYgKHNjaGVtYS51bmlxdWUgJiYgKGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICBmaWVsZCxcbiAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICB9KSB8fCBkcmFmdHNFbmFibGVkIHx8IGZpZWxkQWZmZWN0c0RhdGEoZmllbGQpICYmIGZpZWxkLnR5cGUgIT09ICdncm91cCcgJiYgZmllbGQudHlwZSAhPT0gJ3RhYicgJiYgZmllbGQucmVxdWlyZWQgIT09IHRydWUpKSB7XG4gICAgICAgIHNjaGVtYS5zcGFyc2UgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoZmllbGQuaGlkZGVuKSB7XG4gICAgICAgIHNjaGVtYS5oaWRkZW4gPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufTtcbmNvbnN0IGxvY2FsaXplU2NoZW1hID0gKGVudGl0eSwgc2NoZW1hLCBsb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGlmIChmaWVsZFNob3VsZEJlTG9jYWxpemVkKHtcbiAgICAgICAgZmllbGQ6IGVudGl0eSxcbiAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICB9KSAmJiBsb2NhbGl6YXRpb24gJiYgQXJyYXkuaXNBcnJheShsb2NhbGl6YXRpb24ubG9jYWxlcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IGxvY2FsaXphdGlvbi5sb2NhbGVDb2Rlcy5yZWR1Y2UoKGxvY2FsZVNjaGVtYSwgbG9jYWxlKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgLi4ubG9jYWxlU2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICBbbG9jYWxlXTogc2NoZW1hXG4gICAgICAgICAgICAgICAgfSksIHtcbiAgICAgICAgICAgICAgICBfaWQ6IGZhbHNlXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGxvY2FsaXplZDogdHJ1ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufTtcbmV4cG9ydCBjb25zdCBidWlsZFNjaGVtYSA9IChhcmdzKT0+e1xuICAgIGNvbnN0IHsgYnVpbGRTY2hlbWFPcHRpb25zID0ge30sIGNvbmZpZ0ZpZWxkcywgcGFyZW50SXNMb2NhbGl6ZWQsIHBheWxvYWQgfSA9IGFyZ3M7XG4gICAgY29uc3QgeyBhbGxvd0lERmllbGQsIG9wdGlvbnMgfSA9IGJ1aWxkU2NoZW1hT3B0aW9ucztcbiAgICBsZXQgZmllbGRzID0ge307XG4gICAgbGV0IHNjaGVtYUZpZWxkcyA9IGNvbmZpZ0ZpZWxkcztcbiAgICBpZiAoIWFsbG93SURGaWVsZCkge1xuICAgICAgICBjb25zdCBpZEZpZWxkID0gc2NoZW1hRmllbGRzLmZpbmQoKGZpZWxkKT0+ZmllbGRBZmZlY3RzRGF0YShmaWVsZCkgJiYgZmllbGQubmFtZSA9PT0gJ2lkJyk7XG4gICAgICAgIGlmIChpZEZpZWxkKSB7XG4gICAgICAgICAgICBmaWVsZHMgPSB7XG4gICAgICAgICAgICAgICAgX2lkOiBpZEZpZWxkLnR5cGUgPT09ICdudW1iZXInID8gTnVtYmVyIDogU3RyaW5nXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2NoZW1hRmllbGRzID0gc2NoZW1hRmllbGRzLmZpbHRlcigoZmllbGQpPT4hKGZpZWxkQWZmZWN0c0RhdGEoZmllbGQpICYmIGZpZWxkLm5hbWUgPT09ICdpZCcpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKGZpZWxkcywgb3B0aW9ucyk7XG4gICAgc2NoZW1hRmllbGRzLmZvckVhY2goKGZpZWxkKT0+e1xuICAgICAgICBpZiAoZmllbGRJc1ZpcnR1YWwoZmllbGQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmaWVsZElzUHJlc2VudGF0aW9uYWxPbmx5KGZpZWxkKSkge1xuICAgICAgICAgICAgY29uc3QgYWRkRmllbGRTY2hlbWEgPSBnZXRTY2hlbWFHZW5lcmF0b3IoZmllbGQudHlwZSk7XG4gICAgICAgICAgICBpZiAoYWRkRmllbGRTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICBhZGRGaWVsZFNjaGVtYShmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkID8/IGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChhcmdzLmNvbXBvdW5kSW5kZXhlcykge1xuICAgICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIGFyZ3MuY29tcG91bmRJbmRleGVzKXtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4RGVmaW5pdGlvbiA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBpbmRleC5maWVsZHMpe1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5wYXRoSGFzTG9jYWxpemVkICYmIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxvY2FsZSBvZiBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24ubG9jYWxlcyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleERlZmluaXRpb25bZmllbGQubG9jYWxpemVkUGF0aC5yZXBsYWNlKCc8bG9jYWxlPicsIGxvY2FsZS5jb2RlKV0gPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhEZWZpbml0aW9uW2ZpZWxkLnBhdGhdID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzY2hlbWEuaW5kZXgoaW5kZXhEZWZpbml0aW9uLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiBhcmdzLmJ1aWxkU2NoZW1hT3B0aW9ucy5kaXNhYmxlVW5pcXVlID8gZmFsc2UgOiBpbmRleC51bmlxdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59O1xuY29uc3QgYXJyYXkgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IFtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hKHtcbiAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dJREZpZWxkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlVW5pcXVlOiBidWlsZFNjaGVtYU9wdGlvbnMuZGlzYWJsZVVuaXF1ZSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZnRzRW5hYmxlZDogYnVpbGRTY2hlbWFPcHRpb25zLmRyYWZ0c0VuYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWl6ZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29uZmlnRmllbGRzOiBmaWVsZC5maWVsZHMsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQ6IHBhcmVudElzTG9jYWxpemVkIHx8IGZpZWxkLmxvY2FsaXplZCxcbiAgICAgICAgICAgICAgICBwYXlsb2FkXG4gICAgICAgICAgICB9KVxuICAgICAgICBdXG4gICAgfTtcbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCBibG9ja3MgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogW1xuICAgICAgICAgICAgbmV3IG1vbmdvb3NlLlNjaGVtYSh7fSwge1xuICAgICAgICAgICAgICAgIF9pZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGlzY3JpbWluYXRvcktleTogJ2Jsb2NrVHlwZSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgIF1cbiAgICB9O1xuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBmaWVsZFNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbiAgICAoZmllbGQuYmxvY2tSZWZlcmVuY2VzID8/IGZpZWxkLmJsb2NrcykuZm9yRWFjaCgoYmxvY2tJdGVtKT0+e1xuICAgICAgICBjb25zdCBibG9ja1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe30sIHtcbiAgICAgICAgICAgIF9pZDogZmFsc2UsXG4gICAgICAgICAgICBpZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJsb2NrID0gdHlwZW9mIGJsb2NrSXRlbSA9PT0gJ3N0cmluZycgPyBwYXlsb2FkLmJsb2Nrc1tibG9ja0l0ZW1dIDogYmxvY2tJdGVtO1xuICAgICAgICBpZiAoIWJsb2NrKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYmxvY2suZmllbGRzLmZvckVhY2goKGJsb2NrRmllbGQpPT57XG4gICAgICAgICAgICBjb25zdCBhZGRGaWVsZFNjaGVtYSA9IGdldFNjaGVtYUdlbmVyYXRvcihibG9ja0ZpZWxkLnR5cGUpO1xuICAgICAgICAgICAgaWYgKGFkZEZpZWxkU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgYWRkRmllbGRTY2hlbWEoYmxvY2tGaWVsZCwgYmxvY2tTY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgKHBhcmVudElzTG9jYWxpemVkIHx8IGZpZWxkLmxvY2FsaXplZCkgPz8gZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSAmJiBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbi5sb2NhbGVDb2Rlcy5mb3JFYWNoKChsb2NhbGVDb2RlKT0+e1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgUG9zc2libGUgaW5jb3JyZWN0IHR5cGluZyBpbiBtb25nb29zZSB0eXBlcywgdGhpcyB3b3Jrc1xuICAgICAgICAgICAgICAgIHNjaGVtYS5wYXRoKGAke2ZpZWxkLm5hbWV9LiR7bG9jYWxlQ29kZX1gKS5kaXNjcmltaW5hdG9yKGJsb2NrLnNsdWcsIGJsb2NrU2NoZW1hKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBQb3NzaWJsZSBpbmNvcnJlY3QgdHlwaW5nIGluIG1vbmdvb3NlIHR5cGVzLCB0aGlzIHdvcmtzXG4gICAgICAgICAgICBzY2hlbWEucGF0aChmaWVsZC5uYW1lKS5kaXNjcmltaW5hdG9yKGJsb2NrLnNsdWcsIGJsb2NrU2NoZW1hKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmNvbnN0IGNoZWNrYm94ID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgIH0pLFxuICAgICAgICB0eXBlOiBCb29sZWFuXG4gICAgfTtcbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCBjb2RlID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgIH0pLFxuICAgICAgICB0eXBlOiBTdHJpbmdcbiAgICB9O1xuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgIH0pO1xufTtcbmNvbnN0IGNvbGxhcHNpYmxlID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgZmllbGQuZmllbGRzLmZvckVhY2goKHN1YkZpZWxkKT0+e1xuICAgICAgICBpZiAoZmllbGRJc1ZpcnR1YWwoc3ViRmllbGQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRkRmllbGRTY2hlbWEgPSBnZXRTY2hlbWFHZW5lcmF0b3Ioc3ViRmllbGQudHlwZSk7XG4gICAgICAgIGlmIChhZGRGaWVsZFNjaGVtYSkge1xuICAgICAgICAgICAgYWRkRmllbGRTY2hlbWEoc3ViRmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5jb25zdCBkYXRlID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgIH0pLFxuICAgICAgICB0eXBlOiBEYXRlXG4gICAgfTtcbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCBlbWFpbCA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgfTtcbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCBncm91cCA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGlmIChmaWVsZEFmZmVjdHNEYXRhKGZpZWxkKSkge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRCYXNlU2NoZW1hID0gZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjYXJyeSBpbmRleFNvcnRhYmxlRmllbGRzIHRocm91Z2ggdG8gdmVyc2lvbnMgaWYgZHJhZnRzIGVuYWJsZWRcbiAgICAgICAgY29uc3QgaW5kZXhTb3J0YWJsZUZpZWxkcyA9IGJ1aWxkU2NoZW1hT3B0aW9ucy5pbmRleFNvcnRhYmxlRmllbGRzICYmIGZpZWxkLm5hbWUgPT09ICd2ZXJzaW9uJyAmJiBidWlsZFNjaGVtYU9wdGlvbnMuZHJhZnRzRW5hYmxlZDtcbiAgICAgICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgICAgIC4uLmZvcm1hdHRlZEJhc2VTY2hlbWEsXG4gICAgICAgICAgICB0eXBlOiBidWlsZFNjaGVtYSh7XG4gICAgICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVVbmlxdWU6IGJ1aWxkU2NoZW1hT3B0aW9ucy5kaXNhYmxlVW5pcXVlLFxuICAgICAgICAgICAgICAgICAgICBkcmFmdHNFbmFibGVkOiBidWlsZFNjaGVtYU9wdGlvbnMuZHJhZnRzRW5hYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhTb3J0YWJsZUZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltaXplOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb25maWdGaWVsZHM6IGZpZWxkLmZpZWxkcyxcbiAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZDogcGFyZW50SXNMb2NhbGl6ZWQgfHwgZmllbGQubG9jYWxpemVkLFxuICAgICAgICAgICAgICAgIHBheWxvYWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmllbGQuZmllbGRzLmZvckVhY2goKHN1YkZpZWxkKT0+e1xuICAgICAgICAgICAgaWYgKGZpZWxkSXNWaXJ0dWFsKHN1YkZpZWxkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFkZEZpZWxkU2NoZW1hID0gZ2V0U2NoZW1hR2VuZXJhdG9yKHN1YkZpZWxkLnR5cGUpO1xuICAgICAgICAgICAgaWYgKGFkZEZpZWxkU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgYWRkRmllbGRTY2hlbWEoc3ViRmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCAocGFyZW50SXNMb2NhbGl6ZWQgfHwgZmllbGQubG9jYWxpemVkKSA/PyBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5jb25zdCBqc29uID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgY29uc3QgYmFzZVNjaGVtYSA9IHtcbiAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgIH0pLFxuICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuTWl4ZWRcbiAgICB9O1xuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IGxvY2FsaXplU2NoZW1hKGZpZWxkLCBiYXNlU2NoZW1hLCBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24sIHBhcmVudElzTG9jYWxpemVkKVxuICAgIH0pO1xufTtcbmNvbnN0IG51bWJlciA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSxcbiAgICAgICAgdHlwZTogZmllbGQuaGFzTWFueSA/IFtcbiAgICAgICAgICAgIE51bWJlclxuICAgICAgICBdIDogTnVtYmVyXG4gICAgfTtcbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCBwb2ludCA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgIGVudW06IFtcbiAgICAgICAgICAgICAgICAnUG9pbnQnXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgLi4udHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiYge1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICdQb2ludCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY29vcmRpbmF0ZXM6IHtcbiAgICAgICAgICAgIHR5cGU6IFtcbiAgICAgICAgICAgICAgICBOdW1iZXJcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBkZWZhdWx0OiBmb3JtYXREZWZhdWx0VmFsdWUoZmllbGQpLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmIChidWlsZFNjaGVtYU9wdGlvbnMuZGlzYWJsZVVuaXF1ZSAmJiBmaWVsZC51bmlxdWUgJiYgZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgIGZpZWxkLFxuICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgIH0pKSB7XG4gICAgICAgIGJhc2VTY2hlbWEuY29vcmRpbmF0ZXMuc3BhcnNlID0gdHJ1ZTtcbiAgICB9XG4gICAgc2NoZW1hLmFkZCh7XG4gICAgICAgIFtmaWVsZC5uYW1lXTogbG9jYWxpemVTY2hlbWEoZmllbGQsIGJhc2VTY2hlbWEsIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiwgcGFyZW50SXNMb2NhbGl6ZWQpXG4gICAgfSk7XG4gICAgaWYgKGZpZWxkLmluZGV4ID09PSB0cnVlIHx8IGZpZWxkLmluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgaW5kZXhPcHRpb25zID0ge307XG4gICAgICAgIGlmICghYnVpbGRTY2hlbWFPcHRpb25zLmRpc2FibGVVbmlxdWUgJiYgZmllbGQudW5pcXVlKSB7XG4gICAgICAgICAgICBpbmRleE9wdGlvbnMuc3BhcnNlID0gdHJ1ZTtcbiAgICAgICAgICAgIGluZGV4T3B0aW9ucy51bmlxdWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZFNob3VsZEJlTG9jYWxpemVkKHtcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSkgJiYgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uKSB7XG4gICAgICAgICAgICBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24ubG9jYWxlcy5mb3JFYWNoKChsb2NhbGUpPT57XG4gICAgICAgICAgICAgICAgc2NoZW1hLmluZGV4KHtcbiAgICAgICAgICAgICAgICAgICAgW2Ake2ZpZWxkLm5hbWV9LiR7bG9jYWxlLmNvZGV9YF06ICcyZHNwaGVyZSdcbiAgICAgICAgICAgICAgICB9LCBpbmRleE9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY2hlbWEuaW5kZXgoe1xuICAgICAgICAgICAgICAgIFtmaWVsZC5uYW1lXTogJzJkc3BoZXJlJ1xuICAgICAgICAgICAgfSwgaW5kZXhPcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCByYWRpbyA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICB9KSxcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBlbnVtOiBmaWVsZC5vcHRpb25zLm1hcCgob3B0aW9uKT0+e1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvcHRpb247XG4gICAgICAgIH0pXG4gICAgfTtcbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICB9KTtcbn07XG5jb25zdCByZWxhdGlvbnNoaXAgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBoYXNNYW55UmVsYXRpb25zID0gQXJyYXkuaXNBcnJheShmaWVsZC5yZWxhdGlvblRvKTtcbiAgICBsZXQgc2NoZW1hVG9SZXR1cm4gPSB7fTtcbiAgICBjb25zdCB2YWx1ZVR5cGUgPSBnZXRSZWxhdGlvbnNoaXBWYWx1ZVR5cGUoZmllbGQsIHBheWxvYWQpO1xuICAgIGlmIChmaWVsZFNob3VsZEJlTG9jYWxpemVkKHtcbiAgICAgICAgZmllbGQsXG4gICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgfSkgJiYgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uKSB7XG4gICAgICAgIHNjaGVtYVRvUmV0dXJuID0ge1xuICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgIHR5cGU6IHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbi5sb2NhbGVDb2Rlcy5yZWR1Y2UoKGxvY2FsZXMsIGxvY2FsZSk9PntcbiAgICAgICAgICAgICAgICBsZXQgbG9jYWxlU2NoZW1hID0ge307XG4gICAgICAgICAgICAgICAgaWYgKGhhc01hbnlSZWxhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlU2NoZW1hID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuTWl4ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvblRvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW06IGZpZWxkLnJlbGF0aW9uVG9cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHZhbHVlVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZQYXRoOiBgJHtmaWVsZC5uYW1lfS4ke2xvY2FsZX0ucmVsYXRpb25Ub2BcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGVTY2hlbWEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdmFsdWVUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmOiBmaWVsZC5yZWxhdGlvblRvXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmxvY2FsZXMsXG4gICAgICAgICAgICAgICAgICAgIFtsb2NhbGVdOiBmaWVsZC5oYXNNYW55ID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZVNjaGVtYVxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZvcm1hdERlZmF1bHRWYWx1ZShmaWVsZClcbiAgICAgICAgICAgICAgICAgICAgfSA6IGxvY2FsZVNjaGVtYVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgICBsb2NhbGl6ZWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGhhc01hbnlSZWxhdGlvbnMpIHtcbiAgICAgICAgc2NoZW1hVG9SZXR1cm4gPSB7XG4gICAgICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5NaXhlZCxcbiAgICAgICAgICAgIHJlbGF0aW9uVG86IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICAgICAgZW51bTogZmllbGQucmVsYXRpb25Ub1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogdmFsdWVUeXBlLFxuICAgICAgICAgICAgICAgIHJlZlBhdGg6IGAke2ZpZWxkLm5hbWV9LnJlbGF0aW9uVG9gXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChmaWVsZC5oYXNNYW55KSB7XG4gICAgICAgICAgICBzY2hlbWFUb1JldHVybiA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBbXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYVRvUmV0dXJuXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBmb3JtYXREZWZhdWx0VmFsdWUoZmllbGQpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2NoZW1hVG9SZXR1cm4gPSB7XG4gICAgICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgdHlwZTogdmFsdWVUeXBlLFxuICAgICAgICAgICAgcmVmOiBmaWVsZC5yZWxhdGlvblRvXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmaWVsZC5oYXNNYW55KSB7XG4gICAgICAgICAgICBzY2hlbWFUb1JldHVybiA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBbXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYVRvUmV0dXJuXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBmb3JtYXREZWZhdWx0VmFsdWUoZmllbGQpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICBbZmllbGQubmFtZV06IHNjaGVtYVRvUmV0dXJuXG4gICAgfSk7XG59O1xuY29uc3QgcmljaFRleHQgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5NaXhlZFxuICAgIH07XG4gICAgc2NoZW1hLmFkZCh7XG4gICAgICAgIFtmaWVsZC5uYW1lXTogbG9jYWxpemVTY2hlbWEoZmllbGQsIGJhc2VTY2hlbWEsIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiwgcGFyZW50SXNMb2NhbGl6ZWQpXG4gICAgfSk7XG59O1xuY29uc3Qgcm93ID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgZmllbGQuZmllbGRzLmZvckVhY2goKHN1YkZpZWxkKT0+e1xuICAgICAgICBpZiAoZmllbGRJc1ZpcnR1YWwoc3ViRmllbGQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRkRmllbGRTY2hlbWEgPSBnZXRTY2hlbWFHZW5lcmF0b3Ioc3ViRmllbGQudHlwZSk7XG4gICAgICAgIGlmIChhZGRGaWVsZFNjaGVtYSkge1xuICAgICAgICAgICAgYWRkRmllbGRTY2hlbWEoc3ViRmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5jb25zdCBzZWxlY3QgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZW51bTogZmllbGQub3B0aW9ucy5tYXAoKG9wdGlvbik9PntcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uO1xuICAgICAgICB9KVxuICAgIH07XG4gICAgaWYgKGJ1aWxkU2NoZW1hT3B0aW9ucy5kcmFmdHNFbmFibGVkIHx8ICFmaWVsZC5yZXF1aXJlZCkge1xuICAgICAgICA7XG4gICAgICAgIGJhc2VTY2hlbWEuZW51bS5wdXNoKG51bGwpO1xuICAgIH1cbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBsb2NhbGl6ZVNjaGVtYShmaWVsZCwgZmllbGQuaGFzTWFueSA/IFtcbiAgICAgICAgICAgIGJhc2VTY2hlbWFcbiAgICAgICAgXSA6IGJhc2VTY2hlbWEsIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiwgcGFyZW50SXNMb2NhbGl6ZWQpXG4gICAgfSk7XG59O1xuY29uc3QgdGFicyA9IChmaWVsZCwgc2NoZW1hLCBwYXlsb2FkLCBidWlsZFNjaGVtYU9wdGlvbnMsIHBhcmVudElzTG9jYWxpemVkKT0+e1xuICAgIGZpZWxkLnRhYnMuZm9yRWFjaCgodGFiKT0+e1xuICAgICAgICBpZiAodGFiSGFzTmFtZSh0YWIpKSB7XG4gICAgICAgICAgICBpZiAoZmllbGRJc1ZpcnR1YWwodGFiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJhc2VTY2hlbWEgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogYnVpbGRTY2hlbWEoe1xuICAgICAgICAgICAgICAgICAgICBidWlsZFNjaGVtYU9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVVbmlxdWU6IGJ1aWxkU2NoZW1hT3B0aW9ucy5kaXNhYmxlVW5pcXVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZnRzRW5hYmxlZDogYnVpbGRTY2hlbWFPcHRpb25zLmRyYWZ0c0VuYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1pemU6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ0ZpZWxkczogdGFiLmZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQ6IHBhcmVudElzTG9jYWxpemVkIHx8IHRhYi5sb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNjaGVtYS5hZGQoe1xuICAgICAgICAgICAgICAgIFt0YWIubmFtZV06IGxvY2FsaXplU2NoZW1hKHRhYiwgYmFzZVNjaGVtYSwgcGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLCBwYXJlbnRJc0xvY2FsaXplZClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFiLmZpZWxkcy5mb3JFYWNoKChzdWJGaWVsZCk9PntcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRJc1ZpcnR1YWwoc3ViRmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYWRkRmllbGRTY2hlbWEgPSBnZXRTY2hlbWFHZW5lcmF0b3Ioc3ViRmllbGQudHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKGFkZEZpZWxkU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEZpZWxkU2NoZW1hKHN1YkZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgKHBhcmVudElzTG9jYWxpemVkIHx8IHRhYi5sb2NhbGl6ZWQpID8/IGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmNvbnN0IHRleHQgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IGZpZWxkLmhhc01hbnkgPyBbXG4gICAgICAgICAgICBTdHJpbmdcbiAgICAgICAgXSA6IFN0cmluZ1xuICAgIH07XG4gICAgc2NoZW1hLmFkZCh7XG4gICAgICAgIFtmaWVsZC5uYW1lXTogbG9jYWxpemVTY2hlbWEoZmllbGQsIGJhc2VTY2hlbWEsIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiwgcGFyZW50SXNMb2NhbGl6ZWQpXG4gICAgfSk7XG59O1xuY29uc3QgdGV4dGFyZWEgPSAoZmllbGQsIHNjaGVtYSwgcGF5bG9hZCwgYnVpbGRTY2hlbWFPcHRpb25zLCBwYXJlbnRJc0xvY2FsaXplZCk9PntcbiAgICBjb25zdCBiYXNlU2NoZW1hID0ge1xuICAgICAgICAuLi5mb3JtYXRCYXNlU2NoZW1hKHtcbiAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgfSksXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH07XG4gICAgc2NoZW1hLmFkZCh7XG4gICAgICAgIFtmaWVsZC5uYW1lXTogbG9jYWxpemVTY2hlbWEoZmllbGQsIGJhc2VTY2hlbWEsIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiwgcGFyZW50SXNMb2NhbGl6ZWQpXG4gICAgfSk7XG59O1xuY29uc3QgdXBsb2FkID0gKGZpZWxkLCBzY2hlbWEsIHBheWxvYWQsIGJ1aWxkU2NoZW1hT3B0aW9ucywgcGFyZW50SXNMb2NhbGl6ZWQpPT57XG4gICAgY29uc3QgaGFzTWFueVJlbGF0aW9ucyA9IEFycmF5LmlzQXJyYXkoZmllbGQucmVsYXRpb25Ubyk7XG4gICAgbGV0IHNjaGVtYVRvUmV0dXJuID0ge307XG4gICAgY29uc3QgdmFsdWVUeXBlID0gZ2V0UmVsYXRpb25zaGlwVmFsdWVUeXBlKGZpZWxkLCBwYXlsb2FkKTtcbiAgICBpZiAoZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgIGZpZWxkLFxuICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgIH0pICYmIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbikge1xuICAgICAgICBzY2hlbWFUb1JldHVybiA9IHtcbiAgICAgICAgICAgIF9pZDogZmFsc2UsXG4gICAgICAgICAgICB0eXBlOiBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24ubG9jYWxlQ29kZXMucmVkdWNlKChsb2NhbGVzLCBsb2NhbGUpPT57XG4gICAgICAgICAgICAgICAgbGV0IGxvY2FsZVNjaGVtYSA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChoYXNNYW55UmVsYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZVNjaGVtYSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZvcm1hdEJhc2VTY2hlbWEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkU2NoZW1hT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25Ubzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtOiBmaWVsZC5yZWxhdGlvblRvXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB2YWx1ZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmUGF0aDogYCR7ZmllbGQubmFtZX0uJHtsb2NhbGV9LnJlbGF0aW9uVG9gXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlU2NoZW1hID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHZhbHVlVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogZmllbGQucmVsYXRpb25Ub1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5sb2NhbGVzLFxuICAgICAgICAgICAgICAgICAgICBbbG9jYWxlXTogZmllbGQuaGFzTWFueSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGVTY2hlbWFcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBmb3JtYXREZWZhdWx0VmFsdWUoZmllbGQpXG4gICAgICAgICAgICAgICAgICAgIH0gOiBsb2NhbGVTY2hlbWFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSwge30pLFxuICAgICAgICAgICAgbG9jYWxpemVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgfSBlbHNlIGlmIChoYXNNYW55UmVsYXRpb25zKSB7XG4gICAgICAgIHNjaGVtYVRvUmV0dXJuID0ge1xuICAgICAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF9pZDogZmFsc2UsXG4gICAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuTWl4ZWQsXG4gICAgICAgICAgICByZWxhdGlvblRvOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgICAgIGVudW06IGZpZWxkLnJlbGF0aW9uVG9cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgIHR5cGU6IHZhbHVlVHlwZSxcbiAgICAgICAgICAgICAgICByZWZQYXRoOiBgJHtmaWVsZC5uYW1lfS5yZWxhdGlvblRvYFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZmllbGQuaGFzTWFueSkge1xuICAgICAgICAgICAgc2NoZW1hVG9SZXR1cm4gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogW1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWFUb1JldHVyblxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogZm9ybWF0RGVmYXVsdFZhbHVlKGZpZWxkKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHNjaGVtYVRvUmV0dXJuID0ge1xuICAgICAgICAgICAgLi4uZm9ybWF0QmFzZVNjaGVtYSh7XG4gICAgICAgICAgICAgICAgYnVpbGRTY2hlbWFPcHRpb25zLFxuICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGU6IHZhbHVlVHlwZSxcbiAgICAgICAgICAgIHJlZjogZmllbGQucmVsYXRpb25Ub1xuICAgICAgICB9O1xuICAgICAgICBpZiAoZmllbGQuaGFzTWFueSkge1xuICAgICAgICAgICAgc2NoZW1hVG9SZXR1cm4gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogW1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWFUb1JldHVyblxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogZm9ybWF0RGVmYXVsdFZhbHVlKGZpZWxkKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzY2hlbWEuYWRkKHtcbiAgICAgICAgW2ZpZWxkLm5hbWVdOiBzY2hlbWFUb1JldHVyblxuICAgIH0pO1xufTtcbmNvbnN0IGdldFNjaGVtYUdlbmVyYXRvciA9IChmaWVsZFR5cGUpPT57XG4gICAgaWYgKGZpZWxkVHlwZSBpbiBmaWVsZFRvU2NoZW1hTWFwKSB7XG4gICAgICAgIHJldHVybiBmaWVsZFRvU2NoZW1hTWFwW2ZpZWxkVHlwZV07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcbmNvbnN0IGZpZWxkVG9TY2hlbWFNYXAgPSB7XG4gICAgYXJyYXksXG4gICAgYmxvY2tzLFxuICAgIGNoZWNrYm94LFxuICAgIGNvZGUsXG4gICAgY29sbGFwc2libGUsXG4gICAgZGF0ZSxcbiAgICBlbWFpbCxcbiAgICBncm91cCxcbiAgICBqc29uLFxuICAgIG51bWJlcixcbiAgICBwb2ludCxcbiAgICByYWRpbyxcbiAgICByZWxhdGlvbnNoaXAsXG4gICAgcmljaFRleHQsXG4gICAgcm93LFxuICAgIHNlbGVjdCxcbiAgICB0YWJzLFxuICAgIHRleHQsXG4gICAgdGV4dGFyZWEsXG4gICAgdXBsb2FkXG59O1xuY29uc3QgZ2V0UmVsYXRpb25zaGlwVmFsdWVUeXBlID0gKGZpZWxkLCBwYXlsb2FkKT0+e1xuICAgIGlmICh0eXBlb2YgZmllbGQucmVsYXRpb25UbyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tSURUeXBlID0gcGF5bG9hZC5jb2xsZWN0aW9uc1tmaWVsZC5yZWxhdGlvblRvXT8uY3VzdG9tSURUeXBlO1xuICAgICAgICBpZiAoIWN1c3RvbUlEVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VzdG9tSURUeXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuIG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5OdW1iZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5TdHJpbmc7XG4gICAgfVxuICAgIC8vIGhhcyBjdXN0b20gaWQgcmVsYXRpb25Ub1xuICAgIGlmIChmaWVsZC5yZWxhdGlvblRvLnNvbWUoKHJlbGF0aW9uVG8pPT57XG4gICAgICAgIHJldHVybiAhIXBheWxvYWQuY29sbGVjdGlvbnNbcmVsYXRpb25Ub10/LmN1c3RvbUlEVHlwZTtcbiAgICB9KSkge1xuICAgICAgICByZXR1cm4gbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkO1xuICAgIH1cbiAgICByZXR1cm4gbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVpbGRTY2hlbWEuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/models/buildSchema.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildAndOrConditions.js":
/*!**************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildAndOrConditions.js ***!
  \**************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildAndOrConditions: () => (/* binding */ buildAndOrConditions)\n/* harmony export */ });\n/* harmony import */ var _parseParams_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parseParams.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js\");\n\nasync function buildAndOrConditions({ collectionSlug, fields, globalSlug, locale, parentIsLocalized, payload, where }) {\n    const completedConditions = [];\n    // Loop over all AND / OR operations and add them to the AND / OR query param\n    // Operations should come through as an array\n    for (const condition of where){\n        // If the operation is properly formatted as an object\n        if (typeof condition === 'object') {\n            const result = await (0,_parseParams_js__WEBPACK_IMPORTED_MODULE_0__.parseParams)({\n                collectionSlug,\n                fields,\n                globalSlug,\n                locale,\n                parentIsLocalized,\n                payload,\n                where: condition\n            });\n            if (Object.keys(result).length > 0) {\n                completedConditions.push(result);\n            }\n        }\n    }\n    return completedConditions;\n}\n\n//# sourceMappingURL=buildAndOrConditions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2J1aWxkQW5kT3JDb25kaXRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStDO0FBQ3hDLHNDQUFzQywrRUFBK0U7QUFDNUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDREQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3F1ZXJpZXMvYnVpbGRBbmRPckNvbmRpdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VQYXJhbXMgfSBmcm9tICcuL3BhcnNlUGFyYW1zLmpzJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWlsZEFuZE9yQ29uZGl0aW9ucyh7IGNvbGxlY3Rpb25TbHVnLCBmaWVsZHMsIGdsb2JhbFNsdWcsIGxvY2FsZSwgcGFyZW50SXNMb2NhbGl6ZWQsIHBheWxvYWQsIHdoZXJlIH0pIHtcbiAgICBjb25zdCBjb21wbGV0ZWRDb25kaXRpb25zID0gW107XG4gICAgLy8gTG9vcCBvdmVyIGFsbCBBTkQgLyBPUiBvcGVyYXRpb25zIGFuZCBhZGQgdGhlbSB0byB0aGUgQU5EIC8gT1IgcXVlcnkgcGFyYW1cbiAgICAvLyBPcGVyYXRpb25zIHNob3VsZCBjb21lIHRocm91Z2ggYXMgYW4gYXJyYXlcbiAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbiBvZiB3aGVyZSl7XG4gICAgICAgIC8vIElmIHRoZSBvcGVyYXRpb24gaXMgcHJvcGVybHkgZm9ybWF0dGVkIGFzIGFuIG9iamVjdFxuICAgICAgICBpZiAodHlwZW9mIGNvbmRpdGlvbiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBhcnNlUGFyYW1zKHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgICB3aGVyZTogY29uZGl0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhyZXN1bHQpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRDb25kaXRpb25zLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29tcGxldGVkQ29uZGl0aW9ucztcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVpbGRBbmRPckNvbmRpdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildAndOrConditions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js":
/*!****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js ***!
  \****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildQuery: () => (/* binding */ buildQuery)\n/* harmony export */ });\n/* harmony import */ var _parseParams_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parseParams.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js\");\n\nconst buildQuery = async ({ adapter, collectionSlug, fields, globalSlug, locale, where })=>{\n    const result = await (0,_parseParams_js__WEBPACK_IMPORTED_MODULE_0__.parseParams)({\n        collectionSlug,\n        fields,\n        globalSlug,\n        locale,\n        parentIsLocalized: false,\n        payload: adapter.payload,\n        where\n    });\n    return result;\n};\n\n//# sourceMappingURL=buildQuery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2J1aWxkUXVlcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBK0M7QUFDeEMsNEJBQTRCLDREQUE0RDtBQUMvRix5QkFBeUIsNERBQVc7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2J1aWxkUXVlcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VQYXJhbXMgfSBmcm9tICcuL3BhcnNlUGFyYW1zLmpzJztcbmV4cG9ydCBjb25zdCBidWlsZFF1ZXJ5ID0gYXN5bmMgKHsgYWRhcHRlciwgY29sbGVjdGlvblNsdWcsIGZpZWxkcywgZ2xvYmFsU2x1ZywgbG9jYWxlLCB3aGVyZSB9KT0+e1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBhcnNlUGFyYW1zKHtcbiAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBwYXJlbnRJc0xvY2FsaXplZDogZmFsc2UsXG4gICAgICAgIHBheWxvYWQ6IGFkYXB0ZXIucGF5bG9hZCxcbiAgICAgICAgd2hlcmVcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVpbGRRdWVyeS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSearchParams.js":
/*!***********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSearchParams.js ***!
  \***********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildSearchParam: () => (/* binding */ buildSearchParam)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/getLocalizedPaths.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/getFieldByPath.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/types/constants.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _operatorMap_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./operatorMap.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/operatorMap.js\");\n/* harmony import */ var _sanitizeQueryValue_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sanitizeQueryValue.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/sanitizeQueryValue.js\");\n\n\n\n\n\n\nconst subQueryOptions = {\n    lean: true\n};\n/**\n * Convert the Payload key / value / operator into a MongoDB query\n */ async function buildSearchParam({ collectionSlug, fields, globalSlug, incomingPath, locale, operator, parentIsLocalized, payload, val }) {\n    // Replace GraphQL nested field double underscore formatting\n    let sanitizedPath = incomingPath.replace(/__/g, '.');\n    if (sanitizedPath === 'id') {\n        sanitizedPath = '_id';\n    }\n    let paths = [];\n    let hasCustomID = false;\n    if (sanitizedPath === '_id') {\n        const customIDFieldType = collectionSlug ? payload.collections[collectionSlug]?.customIDType : undefined;\n        let idFieldType = 'text';\n        if (customIDFieldType) {\n            idFieldType = customIDFieldType;\n            hasCustomID = true;\n        }\n        paths.push({\n            collectionSlug,\n            complete: true,\n            field: {\n                name: 'id',\n                type: idFieldType\n            },\n            parentIsLocalized: parentIsLocalized ?? false,\n            path: '_id'\n        });\n    } else {\n        paths = (0,payload__WEBPACK_IMPORTED_MODULE_1__.getLocalizedPaths)({\n            collectionSlug,\n            fields,\n            globalSlug,\n            incomingPath: sanitizedPath,\n            locale,\n            parentIsLocalized,\n            payload\n        });\n    }\n    if (!paths[0]) {\n        return undefined;\n    }\n    const [{ field, path }] = paths;\n    if (path) {\n        const sanitizedQueryValue = (0,_sanitizeQueryValue_js__WEBPACK_IMPORTED_MODULE_2__.sanitizeQueryValue)({\n            field,\n            hasCustomID,\n            locale,\n            operator,\n            parentIsLocalized,\n            path,\n            payload,\n            val\n        });\n        if (!sanitizedQueryValue) {\n            return undefined;\n        }\n        const { operator: formattedOperator, rawQuery, val: formattedValue } = sanitizedQueryValue;\n        if (rawQuery) {\n            return {\n                value: rawQuery\n            };\n        }\n        if (!formattedOperator) {\n            return undefined;\n        }\n        // If there are multiple collections to search through,\n        // Recursively build up a list of query constraints\n        if (paths.length > 1) {\n            // Remove top collection and reverse array\n            // to work backwards from top\n            const pathsToQuery = paths.slice(1).reverse();\n            let relationshipQuery = {\n                value: {}\n            };\n            for (const [i, { collectionSlug, path: subPath }] of pathsToQuery.entries()){\n                if (!collectionSlug) {\n                    throw new payload__WEBPACK_IMPORTED_MODULE_3__.APIError(`Collection with the slug ${collectionSlug} was not found.`);\n                }\n                const { collectionConfig, Model: SubModel } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_4__.getCollection)({\n                    adapter: payload.db,\n                    collectionSlug\n                });\n                if (i === 0) {\n                    const subQuery = await SubModel.buildQuery({\n                        locale,\n                        payload,\n                        where: {\n                            [subPath]: {\n                                [formattedOperator]: val\n                            }\n                        }\n                    });\n                    const field = paths[0].field;\n                    const select = {\n                        _id: true\n                    };\n                    let joinPath = null;\n                    if (field.type === 'join') {\n                        const relationshipField = (0,payload__WEBPACK_IMPORTED_MODULE_5__.getFieldByPath)({\n                            fields: collectionConfig.flattenedFields,\n                            path: field.on\n                        });\n                        if (!relationshipField) {\n                            throw new payload__WEBPACK_IMPORTED_MODULE_3__.APIError('Relationship field was not found');\n                        }\n                        let path = relationshipField.localizedPath;\n                        if (relationshipField.pathHasLocalized && payload.config.localization) {\n                            path = path.replace('<locale>', locale || payload.config.localization.defaultLocale);\n                        }\n                        select[path] = true;\n                        joinPath = path;\n                    }\n                    if (joinPath) {\n                        select[joinPath] = true;\n                    }\n                    const result = await SubModel.find(subQuery).lean().select(select);\n                    const $in = [];\n                    result.forEach((doc)=>{\n                        if (joinPath) {\n                            let ref = doc;\n                            for (const segment of joinPath.split('.')){\n                                if (typeof ref === 'object' && ref) {\n                                    ref = ref[segment];\n                                }\n                            }\n                            if (Array.isArray(ref)) {\n                                for (const item of ref){\n                                    if (item instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n                                        $in.push(item);\n                                    }\n                                }\n                            } else if (ref instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n                                $in.push(ref);\n                            }\n                        } else {\n                            const stringID = doc._id.toString();\n                            $in.push(stringID);\n                            if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(stringID)) {\n                                $in.push(doc._id);\n                            }\n                        }\n                    });\n                    if (pathsToQuery.length === 1) {\n                        return {\n                            path: joinPath ? '_id' : path,\n                            value: {\n                                $in\n                            }\n                        };\n                    }\n                    const nextSubPath = pathsToQuery[i + 1]?.path;\n                    if (nextSubPath) {\n                        relationshipQuery = {\n                            value: {\n                                [nextSubPath]: $in\n                            }\n                        };\n                    }\n                    continue;\n                }\n                const subQuery = relationshipQuery.value;\n                const result = await SubModel.find(subQuery, subQueryOptions);\n                const $in = result.map((doc)=>doc._id);\n                // If it is the last recursion\n                // then pass through the search param\n                if (i + 1 === pathsToQuery.length) {\n                    relationshipQuery = {\n                        path,\n                        value: {\n                            $in\n                        }\n                    };\n                } else {\n                    const nextSubPath = pathsToQuery[i + 1]?.path;\n                    if (nextSubPath) {\n                        relationshipQuery = {\n                            value: {\n                                [nextSubPath]: {\n                                    $in\n                                }\n                            }\n                        };\n                    }\n                }\n            }\n            return relationshipQuery;\n        }\n        if (formattedOperator && payload_shared__WEBPACK_IMPORTED_MODULE_6__.validOperatorSet.has(formattedOperator)) {\n            const operatorKey = _operatorMap_js__WEBPACK_IMPORTED_MODULE_7__.operatorMap[formattedOperator];\n            if (field.type === 'relationship' || field.type === 'upload') {\n                let hasNumberIDRelation;\n                let multiIDCondition = '$or';\n                if (operatorKey === '$ne') {\n                    multiIDCondition = '$and';\n                }\n                const result = {\n                    value: {\n                        [multiIDCondition]: [\n                            {\n                                [path]: {\n                                    [operatorKey]: formattedValue\n                                }\n                            }\n                        ]\n                    }\n                };\n                if (typeof formattedValue === 'string') {\n                    if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(formattedValue)) {\n                        result.value[multiIDCondition]?.push({\n                            [path]: {\n                                [operatorKey]: new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(formattedValue)\n                            }\n                        });\n                    } else {\n                        ;\n                        (Array.isArray(field.relationTo) ? field.relationTo : [\n                            field.relationTo\n                        ]).forEach((relationTo)=>{\n                            const isRelatedToCustomNumberID = payload.collections[relationTo]?.customIDType === 'number';\n                            if (isRelatedToCustomNumberID) {\n                                hasNumberIDRelation = true;\n                            }\n                        });\n                        if (hasNumberIDRelation) {\n                            result.value[multiIDCondition]?.push({\n                                [path]: {\n                                    [operatorKey]: parseFloat(formattedValue)\n                                }\n                            });\n                        }\n                    }\n                }\n                const length = result.value[multiIDCondition]?.length;\n                if (typeof length === 'number' && length > 1) {\n                    return result;\n                }\n            }\n            if (formattedOperator === 'like' && typeof formattedValue === 'string') {\n                const words = formattedValue.split(' ');\n                const result = {\n                    value: {\n                        $and: words.map((word)=>({\n                                [path]: {\n                                    $options: 'i',\n                                    $regex: word.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n                                }\n                            }))\n                    }\n                };\n                return result;\n            }\n            if (formattedOperator === 'not_like' && typeof formattedValue === 'string') {\n                const words = formattedValue.split(' ');\n                const result = {\n                    value: {\n                        $and: words.map((word)=>({\n                                [path]: {\n                                    $not: {\n                                        $options: 'i',\n                                        $regex: word.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n                                    }\n                                }\n                            }))\n                    }\n                };\n                return result;\n            }\n            // Some operators like 'near' need to define a full query\n            // so if there is no operator key, just return the value\n            if (!operatorKey) {\n                return {\n                    path,\n                    value: formattedValue\n                };\n            }\n            return {\n                path,\n                value: {\n                    [operatorKey]: formattedValue\n                }\n            };\n        }\n    }\n    return undefined;\n}\n\n//# sourceMappingURL=buildSearchParams.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2J1aWxkU2VhcmNoUGFyYW1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFpQztBQUNxQztBQUNwQjtBQUNRO0FBQ1g7QUFDYztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBVyxrQ0FBa0MscUdBQXFHO0FBQ2xKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ04sZ0JBQWdCLDBEQUFpQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsYUFBYTtBQUMxQjtBQUNBLG9DQUFvQywwRUFBa0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNkRBQTZEO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsK0JBQStCO0FBQzVEO0FBQ0EsOEJBQThCLDZDQUFRLDZCQUE2QixnQkFBZ0I7QUFDbkY7QUFDQSx3QkFBd0Isb0NBQW9DLEVBQUUsc0VBQWE7QUFDM0U7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHVEQUFjO0FBQ2hFO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxzQ0FBc0MsNkNBQVE7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCwyQ0FBSztBQUM3RDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsd0JBQXdCLDJDQUFLO0FBQzNEO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBLGdDQUFnQywyQ0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNERBQWdCO0FBQ2pELGdDQUFnQyx3REFBVztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQUs7QUFDN0I7QUFDQTtBQUNBLG1EQUFtRCwyQ0FBSztBQUN4RDtBQUNBLHlCQUF5QjtBQUN6QixzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRTtBQUMzRTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0U7QUFDL0U7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2J1aWxkU2VhcmNoUGFyYW1zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFR5cGVzIH0gZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHsgQVBJRXJyb3IsIGdldEZpZWxkQnlQYXRoLCBnZXRMb2NhbGl6ZWRQYXRocyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgdmFsaWRPcGVyYXRvclNldCB9IGZyb20gJ3BheWxvYWQvc2hhcmVkJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IG9wZXJhdG9yTWFwIH0gZnJvbSAnLi9vcGVyYXRvck1hcC5qcyc7XG5pbXBvcnQgeyBzYW5pdGl6ZVF1ZXJ5VmFsdWUgfSBmcm9tICcuL3Nhbml0aXplUXVlcnlWYWx1ZS5qcyc7XG5jb25zdCBzdWJRdWVyeU9wdGlvbnMgPSB7XG4gICAgbGVhbjogdHJ1ZVxufTtcbi8qKlxuICogQ29udmVydCB0aGUgUGF5bG9hZCBrZXkgLyB2YWx1ZSAvIG9wZXJhdG9yIGludG8gYSBNb25nb0RCIHF1ZXJ5XG4gKi8gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkU2VhcmNoUGFyYW0oeyBjb2xsZWN0aW9uU2x1ZywgZmllbGRzLCBnbG9iYWxTbHVnLCBpbmNvbWluZ1BhdGgsIGxvY2FsZSwgb3BlcmF0b3IsIHBhcmVudElzTG9jYWxpemVkLCBwYXlsb2FkLCB2YWwgfSkge1xuICAgIC8vIFJlcGxhY2UgR3JhcGhRTCBuZXN0ZWQgZmllbGQgZG91YmxlIHVuZGVyc2NvcmUgZm9ybWF0dGluZ1xuICAgIGxldCBzYW5pdGl6ZWRQYXRoID0gaW5jb21pbmdQYXRoLnJlcGxhY2UoL19fL2csICcuJyk7XG4gICAgaWYgKHNhbml0aXplZFBhdGggPT09ICdpZCcpIHtcbiAgICAgICAgc2FuaXRpemVkUGF0aCA9ICdfaWQnO1xuICAgIH1cbiAgICBsZXQgcGF0aHMgPSBbXTtcbiAgICBsZXQgaGFzQ3VzdG9tSUQgPSBmYWxzZTtcbiAgICBpZiAoc2FuaXRpemVkUGF0aCA9PT0gJ19pZCcpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tSURGaWVsZFR5cGUgPSBjb2xsZWN0aW9uU2x1ZyA/IHBheWxvYWQuY29sbGVjdGlvbnNbY29sbGVjdGlvblNsdWddPy5jdXN0b21JRFR5cGUgOiB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBpZEZpZWxkVHlwZSA9ICd0ZXh0JztcbiAgICAgICAgaWYgKGN1c3RvbUlERmllbGRUeXBlKSB7XG4gICAgICAgICAgICBpZEZpZWxkVHlwZSA9IGN1c3RvbUlERmllbGRUeXBlO1xuICAgICAgICAgICAgaGFzQ3VzdG9tSUQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdGhzLnB1c2goe1xuICAgICAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgICAgICBjb21wbGV0ZTogdHJ1ZSxcbiAgICAgICAgICAgIGZpZWxkOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2lkJyxcbiAgICAgICAgICAgICAgICB0eXBlOiBpZEZpZWxkVHlwZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkOiBwYXJlbnRJc0xvY2FsaXplZCA/PyBmYWxzZSxcbiAgICAgICAgICAgIHBhdGg6ICdfaWQnXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGhzID0gZ2V0TG9jYWxpemVkUGF0aHMoe1xuICAgICAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICAgICAgaW5jb21pbmdQYXRoOiBzYW5pdGl6ZWRQYXRoLFxuICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQsXG4gICAgICAgICAgICBwYXlsb2FkXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIXBhdGhzWzBdKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IFt7IGZpZWxkLCBwYXRoIH1dID0gcGF0aHM7XG4gICAgaWYgKHBhdGgpIHtcbiAgICAgICAgY29uc3Qgc2FuaXRpemVkUXVlcnlWYWx1ZSA9IHNhbml0aXplUXVlcnlWYWx1ZSh7XG4gICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgIGhhc0N1c3RvbUlELFxuICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgb3BlcmF0b3IsXG4gICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZCxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgdmFsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXNhbml0aXplZFF1ZXJ5VmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBvcGVyYXRvcjogZm9ybWF0dGVkT3BlcmF0b3IsIHJhd1F1ZXJ5LCB2YWw6IGZvcm1hdHRlZFZhbHVlIH0gPSBzYW5pdGl6ZWRRdWVyeVZhbHVlO1xuICAgICAgICBpZiAocmF3UXVlcnkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHJhd1F1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghZm9ybWF0dGVkT3BlcmF0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG11bHRpcGxlIGNvbGxlY3Rpb25zIHRvIHNlYXJjaCB0aHJvdWdoLFxuICAgICAgICAvLyBSZWN1cnNpdmVseSBidWlsZCB1cCBhIGxpc3Qgb2YgcXVlcnkgY29uc3RyYWludHNcbiAgICAgICAgaWYgKHBhdGhzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0b3AgY29sbGVjdGlvbiBhbmQgcmV2ZXJzZSBhcnJheVxuICAgICAgICAgICAgLy8gdG8gd29yayBiYWNrd2FyZHMgZnJvbSB0b3BcbiAgICAgICAgICAgIGNvbnN0IHBhdGhzVG9RdWVyeSA9IHBhdGhzLnNsaWNlKDEpLnJldmVyc2UoKTtcbiAgICAgICAgICAgIGxldCByZWxhdGlvbnNoaXBRdWVyeSA9IHtcbiAgICAgICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtpLCB7IGNvbGxlY3Rpb25TbHVnLCBwYXRoOiBzdWJQYXRoIH1dIG9mIHBhdGhzVG9RdWVyeS5lbnRyaWVzKCkpe1xuICAgICAgICAgICAgICAgIGlmICghY29sbGVjdGlvblNsdWcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBDb2xsZWN0aW9uIHdpdGggdGhlIHNsdWcgJHtjb2xsZWN0aW9uU2x1Z30gd2FzIG5vdCBmb3VuZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb2xsZWN0aW9uQ29uZmlnLCBNb2RlbDogU3ViTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICBhZGFwdGVyOiBwYXlsb2FkLmRiLFxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uU2x1Z1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YlF1ZXJ5ID0gYXdhaXQgU3ViTW9kZWwuYnVpbGRRdWVyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc3ViUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Zvcm1hdHRlZE9wZXJhdG9yXTogdmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGQgPSBwYXRoc1swXS5maWVsZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2lkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGxldCBqb2luUGF0aCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnam9pbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbGF0aW9uc2hpcEZpZWxkID0gZ2V0RmllbGRCeVBhdGgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogZmllbGQub25cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWxhdGlvbnNoaXBGaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBUElFcnJvcignUmVsYXRpb25zaGlwIGZpZWxkIHdhcyBub3QgZm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXRoID0gcmVsYXRpb25zaGlwRmllbGQubG9jYWxpemVkUGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxhdGlvbnNoaXBGaWVsZC5wYXRoSGFzTG9jYWxpemVkICYmIHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoJzxsb2NhbGU+JywgbG9jYWxlIHx8IHBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbi5kZWZhdWx0TG9jYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdFtwYXRoXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2luUGF0aCA9IHBhdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGpvaW5QYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rbam9pblBhdGhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBTdWJNb2RlbC5maW5kKHN1YlF1ZXJ5KS5sZWFuKCkuc2VsZWN0KHNlbGVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0ICRpbiA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZm9yRWFjaCgoZG9jKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpvaW5QYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZiA9IGRvYztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygam9pblBhdGguc3BsaXQoJy4nKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVmID09PSAnb2JqZWN0JyAmJiByZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZiA9IHJlZltzZWdtZW50XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWYpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByZWYpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBUeXBlcy5PYmplY3RJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbi5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWYgaW5zdGFuY2VvZiBUeXBlcy5PYmplY3RJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW4ucHVzaChyZWYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nSUQgPSBkb2MuX2lkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGluLnB1c2goc3RyaW5nSUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKHN0cmluZ0lEKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW4ucHVzaChkb2MuX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGF0aHNUb1F1ZXJ5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBqb2luUGF0aCA/ICdfaWQnIDogcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTdWJQYXRoID0gcGF0aHNUb1F1ZXJ5W2kgKyAxXT8ucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRTdWJQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBRdWVyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbmV4dFN1YlBhdGhdOiAkaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzdWJRdWVyeSA9IHJlbGF0aW9uc2hpcFF1ZXJ5LnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFN1Yk1vZGVsLmZpbmQoc3ViUXVlcnksIHN1YlF1ZXJ5T3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgY29uc3QgJGluID0gcmVzdWx0Lm1hcCgoZG9jKT0+ZG9jLl9pZCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgaXQgaXMgdGhlIGxhc3QgcmVjdXJzaW9uXG4gICAgICAgICAgICAgICAgLy8gdGhlbiBwYXNzIHRocm91Z2ggdGhlIHNlYXJjaCBwYXJhbVxuICAgICAgICAgICAgICAgIGlmIChpICsgMSA9PT0gcGF0aHNUb1F1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBRdWVyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTdWJQYXRoID0gcGF0aHNUb1F1ZXJ5W2kgKyAxXT8ucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRTdWJQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvbnNoaXBRdWVyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbmV4dFN1YlBhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVsYXRpb25zaGlwUXVlcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdHRlZE9wZXJhdG9yICYmIHZhbGlkT3BlcmF0b3JTZXQuaGFzKGZvcm1hdHRlZE9wZXJhdG9yKSkge1xuICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3JLZXkgPSBvcGVyYXRvck1hcFtmb3JtYXR0ZWRPcGVyYXRvcl07XG4gICAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ3JlbGF0aW9uc2hpcCcgfHwgZmllbGQudHlwZSA9PT0gJ3VwbG9hZCcpIHtcbiAgICAgICAgICAgICAgICBsZXQgaGFzTnVtYmVySURSZWxhdGlvbjtcbiAgICAgICAgICAgICAgICBsZXQgbXVsdGlJRENvbmRpdGlvbiA9ICckb3InO1xuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvcktleSA9PT0gJyRuZScpIHtcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlJRENvbmRpdGlvbiA9ICckYW5kJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgW211bHRpSURDb25kaXRpb25dOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtvcGVyYXRvcktleV06IGZvcm1hdHRlZFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZm9ybWF0dGVkVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGZvcm1hdHRlZFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnZhbHVlW211bHRpSURDb25kaXRpb25dPy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW29wZXJhdG9yS2V5XTogbmV3IFR5cGVzLk9iamVjdElkKGZvcm1hdHRlZFZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkoZmllbGQucmVsYXRpb25UbykgPyBmaWVsZC5yZWxhdGlvblRvIDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnJlbGF0aW9uVG9cbiAgICAgICAgICAgICAgICAgICAgICAgIF0pLmZvckVhY2goKHJlbGF0aW9uVG8pPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSZWxhdGVkVG9DdXN0b21OdW1iZXJJRCA9IHBheWxvYWQuY29sbGVjdGlvbnNbcmVsYXRpb25Ub10/LmN1c3RvbUlEVHlwZSA9PT0gJ251bWJlcic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVsYXRlZFRvQ3VzdG9tTnVtYmVySUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzTnVtYmVySURSZWxhdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzTnVtYmVySURSZWxhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC52YWx1ZVttdWx0aUlEQ29uZGl0aW9uXT8ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW29wZXJhdG9yS2V5XTogcGFyc2VGbG9hdChmb3JtYXR0ZWRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IHJlc3VsdC52YWx1ZVttdWx0aUlEQ29uZGl0aW9uXT8ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJyAmJiBsZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvcm1hdHRlZE9wZXJhdG9yID09PSAnbGlrZScgJiYgdHlwZW9mIGZvcm1hdHRlZFZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRzID0gZm9ybWF0dGVkVmFsdWUuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkYW5kOiB3b3Jkcy5tYXAoKHdvcmQpPT4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvcHRpb25zOiAnaScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVnZXg6IHdvcmQucmVwbGFjZSgvW1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9ybWF0dGVkT3BlcmF0b3IgPT09ICdub3RfbGlrZScgJiYgdHlwZW9mIGZvcm1hdHRlZFZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmRzID0gZm9ybWF0dGVkVmFsdWUuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkYW5kOiB3b3Jkcy5tYXAoKHdvcmQpPT4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRub3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkb3B0aW9uczogJ2knLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWdleDogd29yZC5yZXBsYWNlKC9bXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNvbWUgb3BlcmF0b3JzIGxpa2UgJ25lYXInIG5lZWQgdG8gZGVmaW5lIGEgZnVsbCBxdWVyeVxuICAgICAgICAgICAgLy8gc28gaWYgdGhlcmUgaXMgbm8gb3BlcmF0b3Iga2V5LCBqdXN0IHJldHVybiB0aGUgdmFsdWVcbiAgICAgICAgICAgIGlmICghb3BlcmF0b3JLZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZm9ybWF0dGVkVmFsdWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIFtvcGVyYXRvcktleV06IGZvcm1hdHRlZFZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZFNlYXJjaFBhcmFtcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSearchParams.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildSortParam: () => (/* binding */ buildSortParam)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/getFieldByPath.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _getLocalizedSortProperty_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getLocalizedSortProperty.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getLocalizedSortProperty.js\");\n\n\n\nconst relationshipSort = ({ adapter, fields, locale, path, sort, sortAggregation, sortDirection, versions })=>{\n    let currentFields = fields;\n    const segments = path.split('.');\n    if (segments.length < 2) {\n        return false;\n    }\n    for(let i = 0; i < segments.length; i++){\n        const segment = segments[i];\n        const field = currentFields.find((each)=>each.name === segment);\n        if (!field) {\n            return false;\n        }\n        if ('fields' in field) {\n            currentFields = field.flattenedFields;\n            if (field.name === 'version' && versions && i === 0) {\n                segments.shift();\n                i--;\n            }\n        } else if ((field.type === 'relationship' || field.type === 'upload') && i !== segments.length - 1) {\n            const relationshipPath = segments.slice(0, i + 1).join('.');\n            let sortFieldPath = segments.slice(i + 1, segments.length).join('.');\n            if (Array.isArray(field.relationTo)) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('Not supported');\n            }\n            const foreignCollection = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n                adapter,\n                collectionSlug: field.relationTo\n            });\n            const foreignFieldPath = (0,payload__WEBPACK_IMPORTED_MODULE_2__.getFieldByPath)({\n                fields: foreignCollection.collectionConfig.flattenedFields,\n                path: sortFieldPath\n            });\n            if (!foreignFieldPath) {\n                return false;\n            }\n            if (foreignFieldPath.pathHasLocalized && locale) {\n                sortFieldPath = foreignFieldPath.localizedPath.replace('<locale>', locale);\n            }\n            if (!sortAggregation.some((each)=>{\n                return '$lookup' in each && each.$lookup.as === `__${path}`;\n            })) {\n                sortAggregation.push({\n                    $lookup: {\n                        as: `__${path}`,\n                        foreignField: '_id',\n                        from: foreignCollection.Model.collection.name,\n                        localField: versions ? `version.${relationshipPath}` : relationshipPath,\n                        pipeline: [\n                            {\n                                $project: {\n                                    [sortFieldPath]: true\n                                }\n                            }\n                        ]\n                    }\n                });\n                sort[`__${path}.${sortFieldPath}`] = sortDirection;\n                return true;\n            }\n        }\n    }\n    return false;\n};\nconst buildSortParam = ({ adapter, config, fields, locale, parentIsLocalized = false, sort, sortAggregation, timestamps, versions })=>{\n    if (!sort) {\n        if (timestamps) {\n            sort = '-createdAt';\n        } else {\n            sort = '-id';\n        }\n    }\n    if (typeof sort === 'string') {\n        sort = [\n            sort\n        ];\n    }\n    // In the case of Mongo, when sorting by a field that is not unique, the results are not guaranteed to be in the same order each time.\n    // So we add a fallback sort to ensure that the results are always in the same order.\n    let fallbackSort = '-id';\n    if (timestamps) {\n        fallbackSort = '-createdAt';\n    }\n    if (!(sort.includes(fallbackSort) || sort.includes(fallbackSort.replace('-', '')))) {\n        sort.push(fallbackSort);\n    }\n    const sorting = sort.reduce((acc, item)=>{\n        let sortProperty;\n        let sortDirection;\n        if (item.indexOf('-') === 0) {\n            sortProperty = item.substring(1);\n            sortDirection = 'desc';\n        } else {\n            sortProperty = item;\n            sortDirection = 'asc';\n        }\n        if (sortProperty === 'id') {\n            acc['_id'] = sortDirection;\n            return acc;\n        }\n        if (sortAggregation && relationshipSort({\n            adapter,\n            fields,\n            locale,\n            path: sortProperty,\n            sort: acc,\n            sortAggregation,\n            sortDirection,\n            versions\n        })) {\n            return acc;\n        }\n        const localizedProperty = (0,_getLocalizedSortProperty_js__WEBPACK_IMPORTED_MODULE_3__.getLocalizedSortProperty)({\n            config,\n            fields,\n            locale,\n            parentIsLocalized,\n            segments: sortProperty.split('.')\n        });\n        acc[localizedProperty] = sortDirection;\n        return acc;\n    }, {});\n    return sorting;\n};\n\n//# sourceMappingURL=buildSortParam.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW1EO0FBQ087QUFDZTtBQUN6RSw0QkFBNEIsK0VBQStFO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUJBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZDQUFRO0FBQ2xDO0FBQ0Esc0NBQXNDLHNFQUFhO0FBQ25EO0FBQ0E7QUFDQSxhQUFhO0FBQ2IscUNBQXFDLHVEQUFjO0FBQ25EO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsS0FBSztBQUMxRSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGlDQUFpQyxLQUFLO0FBQ3RDO0FBQ0E7QUFDQSwwREFBMEQsaUJBQWlCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsMEJBQTBCLEtBQUssR0FBRyxjQUFjO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDBCQUEwQix5R0FBeUc7QUFDMUk7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGtDQUFrQyxzRkFBd0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yLCBnZXRGaWVsZEJ5UGF0aCB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4uL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0TG9jYWxpemVkU29ydFByb3BlcnR5IH0gZnJvbSAnLi9nZXRMb2NhbGl6ZWRTb3J0UHJvcGVydHkuanMnO1xuY29uc3QgcmVsYXRpb25zaGlwU29ydCA9ICh7IGFkYXB0ZXIsIGZpZWxkcywgbG9jYWxlLCBwYXRoLCBzb3J0LCBzb3J0QWdncmVnYXRpb24sIHNvcnREaXJlY3Rpb24sIHZlcnNpb25zIH0pPT57XG4gICAgbGV0IGN1cnJlbnRGaWVsZHMgPSBmaWVsZHM7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcuJyk7XG4gICAgaWYgKHNlZ21lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspe1xuICAgICAgICBjb25zdCBzZWdtZW50ID0gc2VnbWVudHNbaV07XG4gICAgICAgIGNvbnN0IGZpZWxkID0gY3VycmVudEZpZWxkcy5maW5kKChlYWNoKT0+ZWFjaC5uYW1lID09PSBzZWdtZW50KTtcbiAgICAgICAgaWYgKCFmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnZmllbGRzJyBpbiBmaWVsZCkge1xuICAgICAgICAgICAgY3VycmVudEZpZWxkcyA9IGZpZWxkLmZsYXR0ZW5lZEZpZWxkcztcbiAgICAgICAgICAgIGlmIChmaWVsZC5uYW1lID09PSAndmVyc2lvbicgJiYgdmVyc2lvbnMgJiYgaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHNlZ21lbnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKChmaWVsZC50eXBlID09PSAncmVsYXRpb25zaGlwJyB8fCBmaWVsZC50eXBlID09PSAndXBsb2FkJykgJiYgaSAhPT0gc2VnbWVudHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgY29uc3QgcmVsYXRpb25zaGlwUGF0aCA9IHNlZ21lbnRzLnNsaWNlKDAsIGkgKyAxKS5qb2luKCcuJyk7XG4gICAgICAgICAgICBsZXQgc29ydEZpZWxkUGF0aCA9IHNlZ21lbnRzLnNsaWNlKGkgKyAxLCBzZWdtZW50cy5sZW5ndGgpLmpvaW4oJy4nKTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpZWxkLnJlbGF0aW9uVG8pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKCdOb3Qgc3VwcG9ydGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmb3JlaWduQ29sbGVjdGlvbiA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICAgICAgICAgIGFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvblNsdWc6IGZpZWxkLnJlbGF0aW9uVG9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZm9yZWlnbkZpZWxkUGF0aCA9IGdldEZpZWxkQnlQYXRoKHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGZvcmVpZ25Db2xsZWN0aW9uLmNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICAgICAgICAgIHBhdGg6IHNvcnRGaWVsZFBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFmb3JlaWduRmllbGRQYXRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvcmVpZ25GaWVsZFBhdGgucGF0aEhhc0xvY2FsaXplZCAmJiBsb2NhbGUpIHtcbiAgICAgICAgICAgICAgICBzb3J0RmllbGRQYXRoID0gZm9yZWlnbkZpZWxkUGF0aC5sb2NhbGl6ZWRQYXRoLnJlcGxhY2UoJzxsb2NhbGU+JywgbG9jYWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc29ydEFnZ3JlZ2F0aW9uLnNvbWUoKGVhY2gpPT57XG4gICAgICAgICAgICAgICAgcmV0dXJuICckbG9va3VwJyBpbiBlYWNoICYmIGVhY2guJGxvb2t1cC5hcyA9PT0gYF9fJHtwYXRofWA7XG4gICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgIHNvcnRBZ2dyZWdhdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgJGxvb2t1cDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXM6IGBfXyR7cGF0aH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWlnbkZpZWxkOiAnX2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IGZvcmVpZ25Db2xsZWN0aW9uLk1vZGVsLmNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsRmllbGQ6IHZlcnNpb25zID8gYHZlcnNpb24uJHtyZWxhdGlvbnNoaXBQYXRofWAgOiByZWxhdGlvbnNoaXBQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwcm9qZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc29ydEZpZWxkUGF0aF06IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNvcnRbYF9fJHtwYXRofS4ke3NvcnRGaWVsZFBhdGh9YF0gPSBzb3J0RGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5leHBvcnQgY29uc3QgYnVpbGRTb3J0UGFyYW0gPSAoeyBhZGFwdGVyLCBjb25maWcsIGZpZWxkcywgbG9jYWxlLCBwYXJlbnRJc0xvY2FsaXplZCA9IGZhbHNlLCBzb3J0LCBzb3J0QWdncmVnYXRpb24sIHRpbWVzdGFtcHMsIHZlcnNpb25zIH0pPT57XG4gICAgaWYgKCFzb3J0KSB7XG4gICAgICAgIGlmICh0aW1lc3RhbXBzKSB7XG4gICAgICAgICAgICBzb3J0ID0gJy1jcmVhdGVkQXQnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc29ydCA9ICctaWQnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc29ydCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc29ydCA9IFtcbiAgICAgICAgICAgIHNvcnRcbiAgICAgICAgXTtcbiAgICB9XG4gICAgLy8gSW4gdGhlIGNhc2Ugb2YgTW9uZ28sIHdoZW4gc29ydGluZyBieSBhIGZpZWxkIHRoYXQgaXMgbm90IHVuaXF1ZSwgdGhlIHJlc3VsdHMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlIGluIHRoZSBzYW1lIG9yZGVyIGVhY2ggdGltZS5cbiAgICAvLyBTbyB3ZSBhZGQgYSBmYWxsYmFjayBzb3J0IHRvIGVuc3VyZSB0aGF0IHRoZSByZXN1bHRzIGFyZSBhbHdheXMgaW4gdGhlIHNhbWUgb3JkZXIuXG4gICAgbGV0IGZhbGxiYWNrU29ydCA9ICctaWQnO1xuICAgIGlmICh0aW1lc3RhbXBzKSB7XG4gICAgICAgIGZhbGxiYWNrU29ydCA9ICctY3JlYXRlZEF0JztcbiAgICB9XG4gICAgaWYgKCEoc29ydC5pbmNsdWRlcyhmYWxsYmFja1NvcnQpIHx8IHNvcnQuaW5jbHVkZXMoZmFsbGJhY2tTb3J0LnJlcGxhY2UoJy0nLCAnJykpKSkge1xuICAgICAgICBzb3J0LnB1c2goZmFsbGJhY2tTb3J0KTtcbiAgICB9XG4gICAgY29uc3Qgc29ydGluZyA9IHNvcnQucmVkdWNlKChhY2MsIGl0ZW0pPT57XG4gICAgICAgIGxldCBzb3J0UHJvcGVydHk7XG4gICAgICAgIGxldCBzb3J0RGlyZWN0aW9uO1xuICAgICAgICBpZiAoaXRlbS5pbmRleE9mKCctJykgPT09IDApIHtcbiAgICAgICAgICAgIHNvcnRQcm9wZXJ0eSA9IGl0ZW0uc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgc29ydERpcmVjdGlvbiA9ICdkZXNjJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvcnRQcm9wZXJ0eSA9IGl0ZW07XG4gICAgICAgICAgICBzb3J0RGlyZWN0aW9uID0gJ2FzYyc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvcnRQcm9wZXJ0eSA9PT0gJ2lkJykge1xuICAgICAgICAgICAgYWNjWydfaWQnXSA9IHNvcnREaXJlY3Rpb247XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3J0QWdncmVnYXRpb24gJiYgcmVsYXRpb25zaGlwU29ydCh7XG4gICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgcGF0aDogc29ydFByb3BlcnR5LFxuICAgICAgICAgICAgc29ydDogYWNjLFxuICAgICAgICAgICAgc29ydEFnZ3JlZ2F0aW9uLFxuICAgICAgICAgICAgc29ydERpcmVjdGlvbixcbiAgICAgICAgICAgIHZlcnNpb25zXG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2FsaXplZFByb3BlcnR5ID0gZ2V0TG9jYWxpemVkU29ydFByb3BlcnR5KHtcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkLFxuICAgICAgICAgICAgc2VnbWVudHM6IHNvcnRQcm9wZXJ0eS5zcGxpdCgnLicpXG4gICAgICAgIH0pO1xuICAgICAgICBhY2NbbG9jYWxpemVkUHJvcGVydHldID0gc29ydERpcmVjdGlvbjtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG4gICAgcmV0dXJuIHNvcnRpbmc7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZFNvcnRQYXJhbS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBuildQueryPlugin: () => (/* binding */ getBuildQueryPlugin)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var _parseParams_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parseParams.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js\");\n\n\n// This plugin asynchronously builds a list of Mongoose query constraints\n// which can then be used in subsequent Mongoose queries.\n// Deprecated in favor of using simpler buildQuery directly\nconst getBuildQueryPlugin = ({ collectionSlug, versionsFields } = {})=>{\n    return function buildQueryPlugin(schema) {\n        const modifiedSchema = schema;\n        async function schemaBuildQuery({ globalSlug, locale, payload, where }) {\n            let fields = null;\n            if (versionsFields) {\n                fields = versionsFields;\n            } else {\n                if (globalSlug) {\n                    const globalConfig = payload.globals.config.find(({ slug })=>slug === globalSlug);\n                    if (!globalConfig) {\n                        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Global with the slug ${globalSlug} was not found`);\n                    }\n                    fields = globalConfig.flattenedFields;\n                }\n                if (collectionSlug) {\n                    const collectionConfig = payload.collections[collectionSlug]?.config;\n                    if (!collectionConfig) {\n                        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Collection with the slug ${globalSlug} was not found`);\n                    }\n                    fields = collectionConfig.flattenedFields;\n                }\n            }\n            if (fields === null) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('Fields are not initialized.');\n            }\n            const result = await (0,_parseParams_js__WEBPACK_IMPORTED_MODULE_1__.parseParams)({\n                collectionSlug,\n                fields,\n                globalSlug,\n                locale,\n                parentIsLocalized: false,\n                payload,\n                where\n            });\n            return result;\n        }\n        modifiedSchema.statics.buildQuery = schemaBuildQuery;\n    };\n};\n\n//# sourceMappingURL=getBuildQueryPlugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2dldEJ1aWxkUXVlcnlQbHVnaW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DO0FBQ1k7QUFDL0M7QUFDQTtBQUNBO0FBQ08sK0JBQStCLGlDQUFpQyxJQUFJO0FBQzNFO0FBQ0E7QUFDQSwwQ0FBMEMsb0NBQW9DO0FBQzlFO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLHdFQUF3RSxNQUFNO0FBQzlFO0FBQ0Esa0NBQWtDLDZDQUFRLHlCQUF5QixZQUFZO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyw2Q0FBUSw2QkFBNkIsWUFBWTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZDQUFRO0FBQ2xDO0FBQ0EsaUNBQWlDLDREQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9nZXRCdWlsZFF1ZXJ5UGx1Z2luLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBwYXJzZVBhcmFtcyB9IGZyb20gJy4vcGFyc2VQYXJhbXMuanMnO1xuLy8gVGhpcyBwbHVnaW4gYXN5bmNocm9ub3VzbHkgYnVpbGRzIGEgbGlzdCBvZiBNb25nb29zZSBxdWVyeSBjb25zdHJhaW50c1xuLy8gd2hpY2ggY2FuIHRoZW4gYmUgdXNlZCBpbiBzdWJzZXF1ZW50IE1vbmdvb3NlIHF1ZXJpZXMuXG4vLyBEZXByZWNhdGVkIGluIGZhdm9yIG9mIHVzaW5nIHNpbXBsZXIgYnVpbGRRdWVyeSBkaXJlY3RseVxuZXhwb3J0IGNvbnN0IGdldEJ1aWxkUXVlcnlQbHVnaW4gPSAoeyBjb2xsZWN0aW9uU2x1ZywgdmVyc2lvbnNGaWVsZHMgfSA9IHt9KT0+e1xuICAgIHJldHVybiBmdW5jdGlvbiBidWlsZFF1ZXJ5UGx1Z2luKHNjaGVtYSkge1xuICAgICAgICBjb25zdCBtb2RpZmllZFNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2NoZW1hQnVpbGRRdWVyeSh7IGdsb2JhbFNsdWcsIGxvY2FsZSwgcGF5bG9hZCwgd2hlcmUgfSkge1xuICAgICAgICAgICAgbGV0IGZpZWxkcyA9IG51bGw7XG4gICAgICAgICAgICBpZiAodmVyc2lvbnNGaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBmaWVsZHMgPSB2ZXJzaW9uc0ZpZWxkcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGdsb2JhbFNsdWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsQ29uZmlnID0gcGF5bG9hZC5nbG9iYWxzLmNvbmZpZy5maW5kKCh7IHNsdWcgfSk9PnNsdWcgPT09IGdsb2JhbFNsdWcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWdsb2JhbENvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBHbG9iYWwgd2l0aCB0aGUgc2x1ZyAke2dsb2JhbFNsdWd9IHdhcyBub3QgZm91bmRgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaWVsZHMgPSBnbG9iYWxDb25maWcuZmxhdHRlbmVkRmllbGRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29sbGVjdGlvblNsdWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sbGVjdGlvbkNvbmZpZyA9IHBheWxvYWQuY29sbGVjdGlvbnNbY29sbGVjdGlvblNsdWddPy5jb25maWc7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29sbGVjdGlvbkNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBDb2xsZWN0aW9uIHdpdGggdGhlIHNsdWcgJHtnbG9iYWxTbHVnfSB3YXMgbm90IGZvdW5kYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmllbGRzID0gY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpZWxkcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBUElFcnJvcignRmllbGRzIGFyZSBub3QgaW5pdGlhbGl6ZWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwYXJzZVBhcmFtcyh7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIHdoZXJlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgbW9kaWZpZWRTY2hlbWEuc3RhdGljcy5idWlsZFF1ZXJ5ID0gc2NoZW1hQnVpbGRRdWVyeTtcbiAgICB9O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0QnVpbGRRdWVyeVBsdWdpbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getBuildQueryPlugin.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getLocalizedSortProperty.js":
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getLocalizedSortProperty.js ***!
  \******************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getLocalizedSortProperty: () => (/* binding */ getLocalizedSortProperty)\n/* harmony export */ });\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/fields/config/types.js\");\n\nconst getLocalizedSortProperty = ({ config, fields, locale, parentIsLocalized, result: incomingResult, segments: incomingSegments })=>{\n    // If localization is not enabled, accept exactly\n    // what is sent in\n    if (!config.localization) {\n        return incomingSegments.join('.');\n    }\n    const segments = [\n        ...incomingSegments\n    ];\n    // Retrieve first segment, and remove from segments\n    const firstSegment = segments.shift();\n    // Attempt to find a matched field\n    const matchedField = fields.find((field)=>(0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(field) && field.name === firstSegment);\n    if (matchedField && !(0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldIsPresentationalOnly)(matchedField)) {\n        let nextFields = null;\n        let nextParentIsLocalized = parentIsLocalized;\n        const remainingSegments = [\n            ...segments\n        ];\n        let localizedSegment = matchedField.name;\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldShouldBeLocalized)({\n            field: matchedField,\n            parentIsLocalized: parentIsLocalized ?? false\n        })) {\n            // Check to see if next segment is a locale\n            if (segments.length > 0 && remainingSegments[0]) {\n                const nextSegmentIsLocale = config.localization.localeCodes.includes(remainingSegments[0]);\n                // If next segment is locale, remove it from remaining segments\n                // and use it to localize the current segment\n                if (nextSegmentIsLocale) {\n                    const nextSegment = remainingSegments.shift();\n                    localizedSegment = `${matchedField.name}.${nextSegment}`;\n                }\n            } else {\n                // If no more segments, but field is localized, use default locale\n                localizedSegment = `${matchedField.name}.${locale}`;\n            }\n        }\n        // If there are subfields, pass them through\n        if (matchedField.type === 'tab' || matchedField.type === 'group' || matchedField.type === 'array') {\n            nextFields = matchedField.flattenedFields;\n            if (!nextParentIsLocalized) {\n                nextParentIsLocalized = matchedField.localized ?? false;\n            }\n        }\n        if (matchedField.type === 'blocks') {\n            nextFields = (matchedField.blockReferences ?? matchedField.blocks).reduce((flattenedBlockFields, _block)=>{\n                // TODO: iterate over blocks mapped to block slug in v4, or pass through payload.blocks\n                const block = typeof _block === 'string' ? config.blocks?.find((b)=>b.slug === _block) : _block;\n                if (!block) {\n                    return [\n                        ...flattenedBlockFields\n                    ];\n                }\n                return [\n                    ...flattenedBlockFields,\n                    ...block.flattenedFields.filter((blockField)=>(0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(blockField) && blockField.name !== 'blockType' && blockField.name !== 'blockName' || !(0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(blockField))\n                ];\n            }, []);\n        }\n        const result = incomingResult ? `${incomingResult}.${localizedSegment}` : localizedSegment;\n        if (nextFields !== null) {\n            return getLocalizedSortProperty({\n                config,\n                fields: nextFields,\n                locale,\n                parentIsLocalized: nextParentIsLocalized,\n                result,\n                segments: remainingSegments\n            });\n        }\n        return result;\n    }\n    return incomingSegments.join('.');\n};\n\n//# sourceMappingURL=getLocalizedSortProperty.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2dldExvY2FsaXplZFNvcnRQcm9wZXJ0eS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxRztBQUM5RixvQ0FBb0MsK0ZBQStGO0FBQzFJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsZ0VBQWdCO0FBQzlELHlCQUF5Qix5RUFBeUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzRUFBc0I7QUFDbEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxrQkFBa0IsR0FBRyxZQUFZO0FBQzNFO0FBQ0EsY0FBYztBQUNkO0FBQ0Esc0NBQXNDLGtCQUFrQixHQUFHLE9BQU87QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxnRUFBZ0IsdUZBQXVGLGdFQUFnQjtBQUN6TDtBQUNBLGFBQWE7QUFDYjtBQUNBLDJDQUEyQyxlQUFlLEdBQUcsaUJBQWlCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL2dldExvY2FsaXplZFNvcnRQcm9wZXJ0eS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmaWVsZEFmZmVjdHNEYXRhLCBmaWVsZElzUHJlc2VudGF0aW9uYWxPbmx5LCBmaWVsZFNob3VsZEJlTG9jYWxpemVkIH0gZnJvbSAncGF5bG9hZC9zaGFyZWQnO1xuZXhwb3J0IGNvbnN0IGdldExvY2FsaXplZFNvcnRQcm9wZXJ0eSA9ICh7IGNvbmZpZywgZmllbGRzLCBsb2NhbGUsIHBhcmVudElzTG9jYWxpemVkLCByZXN1bHQ6IGluY29taW5nUmVzdWx0LCBzZWdtZW50czogaW5jb21pbmdTZWdtZW50cyB9KT0+e1xuICAgIC8vIElmIGxvY2FsaXphdGlvbiBpcyBub3QgZW5hYmxlZCwgYWNjZXB0IGV4YWN0bHlcbiAgICAvLyB3aGF0IGlzIHNlbnQgaW5cbiAgICBpZiAoIWNvbmZpZy5sb2NhbGl6YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGluY29taW5nU2VnbWVudHMuam9pbignLicpO1xuICAgIH1cbiAgICBjb25zdCBzZWdtZW50cyA9IFtcbiAgICAgICAgLi4uaW5jb21pbmdTZWdtZW50c1xuICAgIF07XG4gICAgLy8gUmV0cmlldmUgZmlyc3Qgc2VnbWVudCwgYW5kIHJlbW92ZSBmcm9tIHNlZ21lbnRzXG4gICAgY29uc3QgZmlyc3RTZWdtZW50ID0gc2VnbWVudHMuc2hpZnQoKTtcbiAgICAvLyBBdHRlbXB0IHRvIGZpbmQgYSBtYXRjaGVkIGZpZWxkXG4gICAgY29uc3QgbWF0Y2hlZEZpZWxkID0gZmllbGRzLmZpbmQoKGZpZWxkKT0+ZmllbGRBZmZlY3RzRGF0YShmaWVsZCkgJiYgZmllbGQubmFtZSA9PT0gZmlyc3RTZWdtZW50KTtcbiAgICBpZiAobWF0Y2hlZEZpZWxkICYmICFmaWVsZElzUHJlc2VudGF0aW9uYWxPbmx5KG1hdGNoZWRGaWVsZCkpIHtcbiAgICAgICAgbGV0IG5leHRGaWVsZHMgPSBudWxsO1xuICAgICAgICBsZXQgbmV4dFBhcmVudElzTG9jYWxpemVkID0gcGFyZW50SXNMb2NhbGl6ZWQ7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ1NlZ21lbnRzID0gW1xuICAgICAgICAgICAgLi4uc2VnbWVudHNcbiAgICAgICAgXTtcbiAgICAgICAgbGV0IGxvY2FsaXplZFNlZ21lbnQgPSBtYXRjaGVkRmllbGQubmFtZTtcbiAgICAgICAgaWYgKGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICAgICAgZmllbGQ6IG1hdGNoZWRGaWVsZCxcbiAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkOiBwYXJlbnRJc0xvY2FsaXplZCA/PyBmYWxzZVxuICAgICAgICB9KSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIG5leHQgc2VnbWVudCBpcyBhIGxvY2FsZVxuICAgICAgICAgICAgaWYgKHNlZ21lbnRzLmxlbmd0aCA+IDAgJiYgcmVtYWluaW5nU2VnbWVudHNbMF0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0U2VnbWVudElzTG9jYWxlID0gY29uZmlnLmxvY2FsaXphdGlvbi5sb2NhbGVDb2Rlcy5pbmNsdWRlcyhyZW1haW5pbmdTZWdtZW50c1swXSk7XG4gICAgICAgICAgICAgICAgLy8gSWYgbmV4dCBzZWdtZW50IGlzIGxvY2FsZSwgcmVtb3ZlIGl0IGZyb20gcmVtYWluaW5nIHNlZ21lbnRzXG4gICAgICAgICAgICAgICAgLy8gYW5kIHVzZSBpdCB0byBsb2NhbGl6ZSB0aGUgY3VycmVudCBzZWdtZW50XG4gICAgICAgICAgICAgICAgaWYgKG5leHRTZWdtZW50SXNMb2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFNlZ21lbnQgPSByZW1haW5pbmdTZWdtZW50cy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGl6ZWRTZWdtZW50ID0gYCR7bWF0Y2hlZEZpZWxkLm5hbWV9LiR7bmV4dFNlZ21lbnR9YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIG5vIG1vcmUgc2VnbWVudHMsIGJ1dCBmaWVsZCBpcyBsb2NhbGl6ZWQsIHVzZSBkZWZhdWx0IGxvY2FsZVxuICAgICAgICAgICAgICAgIGxvY2FsaXplZFNlZ21lbnQgPSBgJHttYXRjaGVkRmllbGQubmFtZX0uJHtsb2NhbGV9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgc3ViZmllbGRzLCBwYXNzIHRoZW0gdGhyb3VnaFxuICAgICAgICBpZiAobWF0Y2hlZEZpZWxkLnR5cGUgPT09ICd0YWInIHx8IG1hdGNoZWRGaWVsZC50eXBlID09PSAnZ3JvdXAnIHx8IG1hdGNoZWRGaWVsZC50eXBlID09PSAnYXJyYXknKSB7XG4gICAgICAgICAgICBuZXh0RmllbGRzID0gbWF0Y2hlZEZpZWxkLmZsYXR0ZW5lZEZpZWxkcztcbiAgICAgICAgICAgIGlmICghbmV4dFBhcmVudElzTG9jYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgbmV4dFBhcmVudElzTG9jYWxpemVkID0gbWF0Y2hlZEZpZWxkLmxvY2FsaXplZCA/PyBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0Y2hlZEZpZWxkLnR5cGUgPT09ICdibG9ja3MnKSB7XG4gICAgICAgICAgICBuZXh0RmllbGRzID0gKG1hdGNoZWRGaWVsZC5ibG9ja1JlZmVyZW5jZXMgPz8gbWF0Y2hlZEZpZWxkLmJsb2NrcykucmVkdWNlKChmbGF0dGVuZWRCbG9ja0ZpZWxkcywgX2Jsb2NrKT0+e1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IGl0ZXJhdGUgb3ZlciBibG9ja3MgbWFwcGVkIHRvIGJsb2NrIHNsdWcgaW4gdjQsIG9yIHBhc3MgdGhyb3VnaCBwYXlsb2FkLmJsb2Nrc1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gdHlwZW9mIF9ibG9jayA9PT0gJ3N0cmluZycgPyBjb25maWcuYmxvY2tzPy5maW5kKChiKT0+Yi5zbHVnID09PSBfYmxvY2spIDogX2Jsb2NrO1xuICAgICAgICAgICAgICAgIGlmICghYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZsYXR0ZW5lZEJsb2NrRmllbGRzXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLmZsYXR0ZW5lZEJsb2NrRmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAuLi5ibG9jay5mbGF0dGVuZWRGaWVsZHMuZmlsdGVyKChibG9ja0ZpZWxkKT0+ZmllbGRBZmZlY3RzRGF0YShibG9ja0ZpZWxkKSAmJiBibG9ja0ZpZWxkLm5hbWUgIT09ICdibG9ja1R5cGUnICYmIGJsb2NrRmllbGQubmFtZSAhPT0gJ2Jsb2NrTmFtZScgfHwgIWZpZWxkQWZmZWN0c0RhdGEoYmxvY2tGaWVsZCkpXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH0sIFtdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBpbmNvbWluZ1Jlc3VsdCA/IGAke2luY29taW5nUmVzdWx0fS4ke2xvY2FsaXplZFNlZ21lbnR9YCA6IGxvY2FsaXplZFNlZ21lbnQ7XG4gICAgICAgIGlmIChuZXh0RmllbGRzICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TG9jYWxpemVkU29ydFByb3BlcnR5KHtcbiAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBuZXh0RmllbGRzLFxuICAgICAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgICAgICBwYXJlbnRJc0xvY2FsaXplZDogbmV4dFBhcmVudElzTG9jYWxpemVkLFxuICAgICAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICAgICAgICBzZWdtZW50czogcmVtYWluaW5nU2VnbWVudHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBpbmNvbWluZ1NlZ21lbnRzLmpvaW4oJy4nKTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldExvY2FsaXplZFNvcnRQcm9wZXJ0eS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/getLocalizedSortProperty.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/operatorMap.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/operatorMap.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   operatorMap: () => (/* binding */ operatorMap)\n/* harmony export */ });\nconst operatorMap = {\n    all: '$all',\n    equals: '$eq',\n    exists: '$exists',\n    greater_than: '$gt',\n    greater_than_equal: '$gte',\n    in: '$in',\n    intersects: '$geoIntersects',\n    less_than: '$lt',\n    less_than_equal: '$lte',\n    near: '$near',\n    not_equals: '$ne',\n    not_in: '$nin',\n    within: '$geoWithin'\n};\n\n//# sourceMappingURL=operatorMap.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL29wZXJhdG9yTWFwLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9vcGVyYXRvck1hcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgb3BlcmF0b3JNYXAgPSB7XG4gICAgYWxsOiAnJGFsbCcsXG4gICAgZXF1YWxzOiAnJGVxJyxcbiAgICBleGlzdHM6ICckZXhpc3RzJyxcbiAgICBncmVhdGVyX3RoYW46ICckZ3QnLFxuICAgIGdyZWF0ZXJfdGhhbl9lcXVhbDogJyRndGUnLFxuICAgIGluOiAnJGluJyxcbiAgICBpbnRlcnNlY3RzOiAnJGdlb0ludGVyc2VjdHMnLFxuICAgIGxlc3NfdGhhbjogJyRsdCcsXG4gICAgbGVzc190aGFuX2VxdWFsOiAnJGx0ZScsXG4gICAgbmVhcjogJyRuZWFyJyxcbiAgICBub3RfZXF1YWxzOiAnJG5lJyxcbiAgICBub3RfaW46ICckbmluJyxcbiAgICB3aXRoaW46ICckZ2VvV2l0aGluJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlcmF0b3JNYXAuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/operatorMap.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseParams: () => (/* binding */ parseParams)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/deepMerge.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/types/constants.js\");\n/* harmony import */ var _buildAndOrConditions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buildAndOrConditions.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildAndOrConditions.js\");\n/* harmony import */ var _buildSearchParams_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buildSearchParams.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSearchParams.js\");\n\n\n\n\nasync function parseParams({ collectionSlug, fields, globalSlug, locale, parentIsLocalized, payload, where }) {\n    let result = {};\n    if (typeof where === 'object') {\n        // We need to determine if the whereKey is an AND, OR, or a schema path\n        for (const relationOrPath of Object.keys(where)){\n            const condition = where[relationOrPath];\n            let conditionOperator = null;\n            if (relationOrPath.toLowerCase() === 'and') {\n                conditionOperator = '$and';\n            } else if (relationOrPath.toLowerCase() === 'or') {\n                conditionOperator = '$or';\n            }\n            if (Array.isArray(condition)) {\n                const builtConditions = await (0,_buildAndOrConditions_js__WEBPACK_IMPORTED_MODULE_0__.buildAndOrConditions)({\n                    collectionSlug,\n                    fields,\n                    globalSlug,\n                    locale,\n                    parentIsLocalized,\n                    payload,\n                    where: condition\n                });\n                if (builtConditions.length > 0 && conditionOperator !== null) {\n                    result[conditionOperator] = builtConditions;\n                }\n            } else {\n                // It's a path - and there can be multiple comparisons on a single path.\n                // For example - title like 'test' and title not equal to 'tester'\n                // So we need to loop on keys again here to handle each operator independently\n                const pathOperators = where[relationOrPath];\n                if (typeof pathOperators === 'object') {\n                    const validOperators = Object.keys(pathOperators).filter((operator)=>payload_shared__WEBPACK_IMPORTED_MODULE_1__.validOperatorSet.has(operator));\n                    for (const operator of validOperators){\n                        const searchParam = await (0,_buildSearchParams_js__WEBPACK_IMPORTED_MODULE_2__.buildSearchParam)({\n                            collectionSlug,\n                            fields,\n                            globalSlug,\n                            incomingPath: relationOrPath,\n                            locale,\n                            operator,\n                            parentIsLocalized,\n                            payload,\n                            val: pathOperators[operator]\n                        });\n                        if (searchParam?.value && searchParam?.path) {\n                            if (validOperators.length > 1) {\n                                if (!result.$and) {\n                                    result.$and = [];\n                                }\n                                result.$and.push({\n                                    [searchParam.path]: searchParam.value\n                                });\n                            } else {\n                                if (result[searchParam.path]) {\n                                    if (!result.$and) {\n                                        result.$and = [];\n                                    }\n                                    result.$and.push({\n                                        [searchParam.path]: result[searchParam.path]\n                                    });\n                                    result.$and.push({\n                                        [searchParam.path]: searchParam.value\n                                    });\n                                    delete result[searchParam.path];\n                                } else {\n                                    result[searchParam.path] = searchParam.value;\n                                }\n                            }\n                        } else if (typeof searchParam?.value === 'object') {\n                            result = (0,payload__WEBPACK_IMPORTED_MODULE_3__.deepMergeWithCombinedArrays)(result, searchParam.value ?? {}, {\n                                // dont clone Types.ObjectIDs\n                                clone: false\n                            });\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return result;\n}\n\n//# sourceMappingURL=parseParams.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL3BhcnNlUGFyYW1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXNEO0FBQ0o7QUFDZTtBQUNQO0FBQ25ELDZCQUE2QiwrRUFBK0U7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsOEVBQW9CO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUZBQXlGLDREQUFnQjtBQUN6RztBQUNBLGtEQUFrRCx1RUFBZ0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIscUNBQXFDLG9FQUEyQixnQ0FBZ0M7QUFDaEc7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3F1ZXJpZXMvcGFyc2VQYXJhbXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVlcE1lcmdlV2l0aENvbWJpbmVkQXJyYXlzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyB2YWxpZE9wZXJhdG9yU2V0IH0gZnJvbSAncGF5bG9hZC9zaGFyZWQnO1xuaW1wb3J0IHsgYnVpbGRBbmRPckNvbmRpdGlvbnMgfSBmcm9tICcuL2J1aWxkQW5kT3JDb25kaXRpb25zLmpzJztcbmltcG9ydCB7IGJ1aWxkU2VhcmNoUGFyYW0gfSBmcm9tICcuL2J1aWxkU2VhcmNoUGFyYW1zLmpzJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXJzZVBhcmFtcyh7IGNvbGxlY3Rpb25TbHVnLCBmaWVsZHMsIGdsb2JhbFNsdWcsIGxvY2FsZSwgcGFyZW50SXNMb2NhbGl6ZWQsIHBheWxvYWQsIHdoZXJlIH0pIHtcbiAgICBsZXQgcmVzdWx0ID0ge307XG4gICAgaWYgKHR5cGVvZiB3aGVyZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byBkZXRlcm1pbmUgaWYgdGhlIHdoZXJlS2V5IGlzIGFuIEFORCwgT1IsIG9yIGEgc2NoZW1hIHBhdGhcbiAgICAgICAgZm9yIChjb25zdCByZWxhdGlvbk9yUGF0aCBvZiBPYmplY3Qua2V5cyh3aGVyZSkpe1xuICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gd2hlcmVbcmVsYXRpb25PclBhdGhdO1xuICAgICAgICAgICAgbGV0IGNvbmRpdGlvbk9wZXJhdG9yID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChyZWxhdGlvbk9yUGF0aC50b0xvd2VyQ2FzZSgpID09PSAnYW5kJykge1xuICAgICAgICAgICAgICAgIGNvbmRpdGlvbk9wZXJhdG9yID0gJyRhbmQnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbk9yUGF0aC50b0xvd2VyQ2FzZSgpID09PSAnb3InKSB7XG4gICAgICAgICAgICAgICAgY29uZGl0aW9uT3BlcmF0b3IgPSAnJG9yJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbmRpdGlvbikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidWlsdENvbmRpdGlvbnMgPSBhd2FpdCBidWlsZEFuZE9yQ29uZGl0aW9ucyh7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiBjb25kaXRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoYnVpbHRDb25kaXRpb25zLmxlbmd0aCA+IDAgJiYgY29uZGl0aW9uT3BlcmF0b3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2NvbmRpdGlvbk9wZXJhdG9yXSA9IGJ1aWx0Q29uZGl0aW9ucztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEl0J3MgYSBwYXRoIC0gYW5kIHRoZXJlIGNhbiBiZSBtdWx0aXBsZSBjb21wYXJpc29ucyBvbiBhIHNpbmdsZSBwYXRoLlxuICAgICAgICAgICAgICAgIC8vIEZvciBleGFtcGxlIC0gdGl0bGUgbGlrZSAndGVzdCcgYW5kIHRpdGxlIG5vdCBlcXVhbCB0byAndGVzdGVyJ1xuICAgICAgICAgICAgICAgIC8vIFNvIHdlIG5lZWQgdG8gbG9vcCBvbiBrZXlzIGFnYWluIGhlcmUgdG8gaGFuZGxlIGVhY2ggb3BlcmF0b3IgaW5kZXBlbmRlbnRseVxuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGhPcGVyYXRvcnMgPSB3aGVyZVtyZWxhdGlvbk9yUGF0aF07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXRoT3BlcmF0b3JzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxpZE9wZXJhdG9ycyA9IE9iamVjdC5rZXlzKHBhdGhPcGVyYXRvcnMpLmZpbHRlcigob3BlcmF0b3IpPT52YWxpZE9wZXJhdG9yU2V0LmhhcyhvcGVyYXRvcikpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9wZXJhdG9yIG9mIHZhbGlkT3BlcmF0b3JzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtID0gYXdhaXQgYnVpbGRTZWFyY2hQYXJhbSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jb21pbmdQYXRoOiByZWxhdGlvbk9yUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHBhdGhPcGVyYXRvcnNbb3BlcmF0b3JdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hQYXJhbT8udmFsdWUgJiYgc2VhcmNoUGFyYW0/LnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRPcGVyYXRvcnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC4kYW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuJGFuZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC4kYW5kLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NlYXJjaFBhcmFtLnBhdGhdOiBzZWFyY2hQYXJhbS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0W3NlYXJjaFBhcmFtLnBhdGhdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC4kYW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LiRhbmQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC4kYW5kLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzZWFyY2hQYXJhbS5wYXRoXTogcmVzdWx0W3NlYXJjaFBhcmFtLnBhdGhdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC4kYW5kLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzZWFyY2hQYXJhbS5wYXRoXTogc2VhcmNoUGFyYW0udmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdFtzZWFyY2hQYXJhbS5wYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtzZWFyY2hQYXJhbS5wYXRoXSA9IHNlYXJjaFBhcmFtLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VhcmNoUGFyYW0/LnZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlZXBNZXJnZVdpdGhDb21iaW5lZEFycmF5cyhyZXN1bHQsIHNlYXJjaFBhcmFtLnZhbHVlID8/IHt9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbnQgY2xvbmUgVHlwZXMuT2JqZWN0SURzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlUGFyYW1zLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/parseParams.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/sanitizeQueryValue.js":
/*!************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/sanitizeQueryValue.js ***!
  \************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sanitizeQueryValue: () => (/* binding */ sanitizeQueryValue)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/createArrayFromCommaDelineated.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/fields/config/types.js\");\n\n\n\nconst buildExistsQuery = (formattedValue, path, treatEmptyString = true)=>{\n    if (formattedValue) {\n        return {\n            rawQuery: {\n                $and: [\n                    {\n                        [path]: {\n                            $exists: true\n                        }\n                    },\n                    {\n                        [path]: {\n                            $ne: null\n                        }\n                    },\n                    ...treatEmptyString ? [\n                        {\n                            [path]: {\n                                $ne: ''\n                            }\n                        }\n                    ] : []\n                ]\n            }\n        };\n    } else {\n        return {\n            rawQuery: {\n                $or: [\n                    {\n                        [path]: {\n                            $exists: false\n                        }\n                    },\n                    {\n                        [path]: {\n                            $eq: null\n                        }\n                    },\n                    ...treatEmptyString ? [\n                        {\n                            [path]: {\n                                $eq: ''\n                            }\n                        }\n                    ] : []\n                ]\n            }\n        };\n    }\n};\n// returns nestedField Field object from blocks.nestedField path because getLocalizedPaths splits them only for relationships\nconst getFieldFromSegments = ({ field, payload, segments })=>{\n    if ('blocks' in field || 'blockReferences' in field) {\n        const _field = field;\n        for (const _block of _field.blockReferences ?? _field.blocks){\n            const block = typeof _block === 'string' ? payload.blocks[_block] : _block;\n            if (block) {\n                const field = getFieldFromSegments({\n                    field: block,\n                    payload,\n                    segments\n                });\n                if (field) {\n                    return field;\n                }\n            }\n        }\n    }\n    if ('fields' in field) {\n        for(let i = 0; i < segments.length; i++){\n            const foundField = field.flattenedFields.find((each)=>each.name === segments[i]);\n            if (!foundField) {\n                break;\n            }\n            if (foundField && segments.length - 1 === i) {\n                return foundField;\n            }\n            segments.shift();\n            return getFieldFromSegments({\n                field: foundField,\n                payload,\n                segments\n            });\n        }\n    }\n};\nconst sanitizeQueryValue = ({ field, hasCustomID, locale, operator, parentIsLocalized, path, payload, val })=>{\n    let formattedValue = val;\n    let formattedOperator = operator;\n    if ([\n        'array',\n        'blocks',\n        'group',\n        'tab'\n    ].includes(field.type) && path.includes('.')) {\n        const segments = path.split('.');\n        segments.shift();\n        const foundField = getFieldFromSegments({\n            field,\n            payload,\n            segments\n        });\n        if (foundField) {\n            field = foundField;\n        }\n    }\n    // Disregard invalid _ids\n    if (path === '_id') {\n        if (typeof val === 'string' && val.split(',').length === 1) {\n            if (!hasCustomID) {\n                const isValid = mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(val);\n                if (!isValid) {\n                    return {\n                        operator: formattedOperator,\n                        val: undefined\n                    };\n                } else {\n                    if ([\n                        'in',\n                        'not_in'\n                    ].includes(operator)) {\n                        formattedValue = (0,payload__WEBPACK_IMPORTED_MODULE_1__.createArrayFromCommaDelineated)(formattedValue).map((id)=>new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(id));\n                    } else {\n                        formattedValue = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(val);\n                    }\n                }\n            }\n            if (field.type === 'number') {\n                const parsedNumber = parseFloat(val);\n                if (Number.isNaN(parsedNumber)) {\n                    return {\n                        operator: formattedOperator,\n                        val: undefined\n                    };\n                }\n            }\n        } else if (Array.isArray(val) || typeof val === 'string' && val.split(',').length > 1) {\n            if (typeof val === 'string') {\n                formattedValue = (0,payload__WEBPACK_IMPORTED_MODULE_1__.createArrayFromCommaDelineated)(val);\n            }\n            if (Array.isArray(formattedValue)) {\n                formattedValue = formattedValue.reduce((formattedValues, inVal)=>{\n                    if (!hasCustomID) {\n                        if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(inVal)) {\n                            formattedValues.push(new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(inVal));\n                        }\n                    }\n                    if (field.type === 'number') {\n                        const parsedNumber = parseFloat(inVal);\n                        if (!Number.isNaN(parsedNumber)) {\n                            formattedValues.push(parsedNumber);\n                        }\n                    } else {\n                        formattedValues.push(inVal);\n                    }\n                    return formattedValues;\n                }, []);\n            }\n        }\n    }\n    // Cast incoming values as proper searchable types\n    if (field.type === 'checkbox' && typeof val === 'string') {\n        if (val.toLowerCase() === 'true') {\n            formattedValue = true;\n        }\n        if (val.toLowerCase() === 'false') {\n            formattedValue = false;\n        }\n    }\n    if ([\n        'all',\n        'in',\n        'not_in'\n    ].includes(operator) && typeof formattedValue === 'string') {\n        formattedValue = (0,payload__WEBPACK_IMPORTED_MODULE_1__.createArrayFromCommaDelineated)(formattedValue);\n        if (field.type === 'number' && Array.isArray(formattedValue)) {\n            formattedValue = formattedValue.map((arrayVal)=>parseFloat(arrayVal));\n        }\n    }\n    if (field.type === 'number') {\n        if (typeof formattedValue === 'string' && operator !== 'exists') {\n            formattedValue = Number(val);\n        }\n        if (operator === 'exists') {\n            formattedValue = val === 'true' ? true : val === 'false' ? false : Boolean(val);\n            return buildExistsQuery(formattedValue, path);\n        }\n    }\n    if (field.type === 'date' && typeof val === 'string' && operator !== 'exists') {\n        formattedValue = new Date(val);\n        if (Number.isNaN(Date.parse(formattedValue))) {\n            return undefined;\n        }\n    }\n    if ([\n        'relationship',\n        'upload'\n    ].includes(field.type)) {\n        if (val === 'null') {\n            formattedValue = null;\n        }\n        // Object equality requires the value to be the first key in the object that is being queried.\n        if (operator === 'equals' && formattedValue && typeof formattedValue === 'object' && formattedValue.value && formattedValue.relationTo) {\n            const { value } = formattedValue;\n            const isValid = mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(value);\n            if (isValid) {\n                formattedValue.value = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(value);\n            }\n            let localizedPath = path;\n            if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_2__.fieldShouldBeLocalized)({\n                field,\n                parentIsLocalized\n            }) && payload.config.localization && locale) {\n                localizedPath = `${path}.${locale}`;\n            }\n            return {\n                rawQuery: {\n                    $or: [\n                        {\n                            [localizedPath]: {\n                                $eq: {\n                                    // disable auto sort\n                                    /* eslint-disable */ value: formattedValue.value,\n                                    relationTo: formattedValue.relationTo\n                                }\n                            }\n                        },\n                        {\n                            [localizedPath]: {\n                                $eq: {\n                                    relationTo: formattedValue.relationTo,\n                                    value: formattedValue.value\n                                }\n                            }\n                        }\n                    ]\n                }\n            };\n        }\n        const relationTo = field.relationTo;\n        if ([\n            'in',\n            'not_in'\n        ].includes(operator) && Array.isArray(formattedValue)) {\n            formattedValue = formattedValue.reduce((formattedValues, inVal)=>{\n                if (!inVal) {\n                    return formattedValues;\n                }\n                if (typeof relationTo === 'string' && payload.collections[relationTo]?.customIDType) {\n                    if (payload.collections[relationTo].customIDType === 'number') {\n                        const parsedNumber = parseFloat(inVal);\n                        if (!Number.isNaN(parsedNumber)) {\n                            formattedValues.push(parsedNumber);\n                            return formattedValues;\n                        }\n                    }\n                    formattedValues.push(inVal);\n                    return formattedValues;\n                }\n                if (Array.isArray(relationTo) && relationTo.some((relationTo)=>!!payload.collections[relationTo]?.customIDType)) {\n                    if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(inVal.toString())) {\n                        formattedValues.push(new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(inVal));\n                    } else {\n                        formattedValues.push(inVal);\n                    }\n                    return formattedValues;\n                }\n                if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(inVal.toString())) {\n                    formattedValues.push(new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(inVal));\n                }\n                return formattedValues;\n            }, []);\n        }\n        if ([\n            'contains',\n            'equals',\n            'like',\n            'not_equals'\n        ].includes(operator) && (!Array.isArray(relationTo) || !path.endsWith('.relationTo'))) {\n            if (typeof relationTo === 'string') {\n                const customIDType = payload.collections[relationTo]?.customIDType;\n                if (customIDType) {\n                    if (customIDType === 'number') {\n                        formattedValue = parseFloat(val);\n                        if (Number.isNaN(formattedValue)) {\n                            return {\n                                operator: formattedOperator,\n                                val: undefined\n                            };\n                        }\n                    }\n                } else {\n                    if (!mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(formattedValue)) {\n                        return {\n                            operator: formattedOperator,\n                            val: undefined\n                        };\n                    }\n                    formattedValue = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(formattedValue);\n                }\n            } else {\n                const hasCustomIDType = relationTo.some((relationTo)=>!!payload.collections[relationTo]?.customIDType);\n                if (hasCustomIDType) {\n                    if (typeof val === 'string') {\n                        const formattedNumber = Number(val);\n                        formattedValue = [\n                            mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(val) ? new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(val) : val\n                        ];\n                        formattedOperator = operator === 'not_equals' ? 'not_in' : 'in';\n                        if (!Number.isNaN(formattedNumber)) {\n                            formattedValue.push(formattedNumber);\n                        }\n                    }\n                } else {\n                    if (!mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(formattedValue)) {\n                        return {\n                            operator: formattedOperator,\n                            val: undefined\n                        };\n                    }\n                    formattedValue = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(formattedValue);\n                }\n            }\n        }\n        if (operator === 'all' && Array.isArray(relationTo) && path.endsWith('.value') && Array.isArray(formattedValue)) {\n            formattedValue.forEach((v, i)=>{\n                if (mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(v)) {\n                    formattedValue[i] = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(v);\n                }\n            });\n        }\n    }\n    // Set up specific formatting necessary by operators\n    if (operator === 'near') {\n        let lng;\n        let lat;\n        let maxDistance;\n        let minDistance;\n        if (Array.isArray(formattedValue)) {\n            ;\n            [lng, lat, maxDistance, minDistance] = formattedValue;\n        }\n        if (typeof formattedValue === 'string') {\n            ;\n            [lng, lat, maxDistance, minDistance] = (0,payload__WEBPACK_IMPORTED_MODULE_1__.createArrayFromCommaDelineated)(formattedValue);\n        }\n        if (lng == null || lat == null || maxDistance == null && minDistance == null) {\n            formattedValue = undefined;\n        } else {\n            formattedValue = {\n                $geometry: {\n                    type: 'Point',\n                    coordinates: [\n                        parseFloat(lng),\n                        parseFloat(lat)\n                    ]\n                }\n            };\n            if (maxDistance && !Number.isNaN(Number(maxDistance))) {\n                formattedValue.$maxDistance = parseFloat(maxDistance);\n            }\n            if (minDistance && !Number.isNaN(Number(minDistance))) {\n                formattedValue.$minDistance = parseFloat(minDistance);\n            }\n        }\n    }\n    if (operator === 'within' || operator === 'intersects') {\n        formattedValue = {\n            $geometry: formattedValue\n        };\n    }\n    if (path !== '_id' || path === '_id' && hasCustomID && field.type === 'text') {\n        if (operator === 'contains' && !mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId.isValid(formattedValue)) {\n            formattedValue = {\n                $options: 'i',\n                $regex: formattedValue.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n            };\n        }\n        if (operator === 'exists') {\n            formattedValue = formattedValue === 'true' || formattedValue === true;\n            // _id can't be empty string, will error Cast to ObjectId failed for value \"\"\n            return buildExistsQuery(formattedValue, path, ![\n                'checkbox',\n                'relationship',\n                'upload'\n            ].includes(field.type));\n        }\n    }\n    if ((path === '_id' || path === 'parent') && operator === 'like' && formattedValue.length === 24 && !hasCustomID) {\n        formattedOperator = 'equals';\n    }\n    if (operator === 'exists') {\n        formattedValue = formattedValue === 'true' || formattedValue === true;\n        // Clearable fields\n        if ([\n            'relationship',\n            'select',\n            'upload'\n        ].includes(field.type)) {\n            if (formattedValue) {\n                return {\n                    rawQuery: {\n                        $and: [\n                            {\n                                [path]: {\n                                    $exists: true\n                                }\n                            },\n                            {\n                                [path]: {\n                                    $ne: null\n                                }\n                            }\n                        ]\n                    }\n                };\n            } else {\n                return {\n                    rawQuery: {\n                        $or: [\n                            {\n                                [path]: {\n                                    $exists: false\n                                }\n                            },\n                            {\n                                [path]: {\n                                    $eq: null\n                                }\n                            }\n                        ]\n                    }\n                };\n            }\n        }\n    }\n    return {\n        operator: formattedOperator,\n        val: formattedValue\n    };\n};\n\n//# sourceMappingURL=sanitizeQueryValue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyaWVzL3Nhbml0aXplUXVlcnlWYWx1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ3dCO0FBQ0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDBCQUEwQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUJBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDTyw4QkFBOEIsNkVBQTZFO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywyQ0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHVFQUE4QiwrQkFBK0IsMkNBQUs7QUFDM0csc0JBQXNCO0FBQ3RCLDZDQUE2QywyQ0FBSztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxpQ0FBaUMsdUVBQThCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJDQUFLO0FBQ2pDLHFEQUFxRCwyQ0FBSztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix1RUFBOEI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1Qiw0QkFBNEIsMkNBQUs7QUFDakM7QUFDQSwyQ0FBMkMsMkNBQUs7QUFDaEQ7QUFDQTtBQUNBLGdCQUFnQixzRUFBc0I7QUFDdEM7QUFDQTtBQUNBLGFBQWE7QUFDYixtQ0FBbUMsS0FBSyxHQUFHLE9BQU87QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyQ0FBSztBQUM3QixpREFBaUQsMkNBQUs7QUFDdEQsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJDQUFLO0FBQ3pCLDZDQUE2QywyQ0FBSztBQUNsRDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLHlCQUF5QiwyQ0FBSztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDJDQUFLO0FBQzlDO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMkNBQUssNkJBQTZCLDJDQUFLO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQix5QkFBeUIsMkNBQUs7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywyQ0FBSztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJDQUFLO0FBQ3pCLDRDQUE0QywyQ0FBSztBQUNqRDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELHVFQUE4QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywyQ0FBSztBQUM3QztBQUNBO0FBQ0EsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvcXVlcmllcy9zYW5pdGl6ZVF1ZXJ5VmFsdWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHlwZXMgfSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgeyBjcmVhdGVBcnJheUZyb21Db21tYURlbGluZWF0ZWQgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQgfSBmcm9tICdwYXlsb2FkL3NoYXJlZCc7XG5jb25zdCBidWlsZEV4aXN0c1F1ZXJ5ID0gKGZvcm1hdHRlZFZhbHVlLCBwYXRoLCB0cmVhdEVtcHR5U3RyaW5nID0gdHJ1ZSk9PntcbiAgICBpZiAoZm9ybWF0dGVkVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJhd1F1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgJGFuZDogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbcGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXhpc3RzOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRuZTogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAuLi50cmVhdEVtcHR5U3RyaW5nID8gW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbmU6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdIDogW11cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJhd1F1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgJG9yOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRleGlzdHM6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcTogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAuLi50cmVhdEVtcHR5U3RyaW5nID8gW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXE6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdIDogW11cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufTtcbi8vIHJldHVybnMgbmVzdGVkRmllbGQgRmllbGQgb2JqZWN0IGZyb20gYmxvY2tzLm5lc3RlZEZpZWxkIHBhdGggYmVjYXVzZSBnZXRMb2NhbGl6ZWRQYXRocyBzcGxpdHMgdGhlbSBvbmx5IGZvciByZWxhdGlvbnNoaXBzXG5jb25zdCBnZXRGaWVsZEZyb21TZWdtZW50cyA9ICh7IGZpZWxkLCBwYXlsb2FkLCBzZWdtZW50cyB9KT0+e1xuICAgIGlmICgnYmxvY2tzJyBpbiBmaWVsZCB8fCAnYmxvY2tSZWZlcmVuY2VzJyBpbiBmaWVsZCkge1xuICAgICAgICBjb25zdCBfZmllbGQgPSBmaWVsZDtcbiAgICAgICAgZm9yIChjb25zdCBfYmxvY2sgb2YgX2ZpZWxkLmJsb2NrUmVmZXJlbmNlcyA/PyBfZmllbGQuYmxvY2tzKXtcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gdHlwZW9mIF9ibG9jayA9PT0gJ3N0cmluZycgPyBwYXlsb2FkLmJsb2Nrc1tfYmxvY2tdIDogX2Jsb2NrO1xuICAgICAgICAgICAgaWYgKGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGQgPSBnZXRGaWVsZEZyb21TZWdtZW50cyh7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBibG9jayxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudHNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoJ2ZpZWxkcycgaW4gZmllbGQpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kRmllbGQgPSBmaWVsZC5mbGF0dGVuZWRGaWVsZHMuZmluZCgoZWFjaCk9PmVhY2gubmFtZSA9PT0gc2VnbWVudHNbaV0pO1xuICAgICAgICAgICAgaWYgKCFmb3VuZEZpZWxkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm91bmRGaWVsZCAmJiBzZWdtZW50cy5sZW5ndGggLSAxID09PSBpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kRmllbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWdtZW50cy5zaGlmdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGdldEZpZWxkRnJvbVNlZ21lbnRzKHtcbiAgICAgICAgICAgICAgICBmaWVsZDogZm91bmRGaWVsZCxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIHNlZ21lbnRzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5leHBvcnQgY29uc3Qgc2FuaXRpemVRdWVyeVZhbHVlID0gKHsgZmllbGQsIGhhc0N1c3RvbUlELCBsb2NhbGUsIG9wZXJhdG9yLCBwYXJlbnRJc0xvY2FsaXplZCwgcGF0aCwgcGF5bG9hZCwgdmFsIH0pPT57XG4gICAgbGV0IGZvcm1hdHRlZFZhbHVlID0gdmFsO1xuICAgIGxldCBmb3JtYXR0ZWRPcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgIGlmIChbXG4gICAgICAgICdhcnJheScsXG4gICAgICAgICdibG9ja3MnLFxuICAgICAgICAnZ3JvdXAnLFxuICAgICAgICAndGFiJ1xuICAgIF0uaW5jbHVkZXMoZmllbGQudHlwZSkgJiYgcGF0aC5pbmNsdWRlcygnLicpKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnLicpO1xuICAgICAgICBzZWdtZW50cy5zaGlmdCgpO1xuICAgICAgICBjb25zdCBmb3VuZEZpZWxkID0gZ2V0RmllbGRGcm9tU2VnbWVudHMoe1xuICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgc2VnbWVudHNcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChmb3VuZEZpZWxkKSB7XG4gICAgICAgICAgICBmaWVsZCA9IGZvdW5kRmllbGQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRGlzcmVnYXJkIGludmFsaWQgX2lkc1xuICAgIGlmIChwYXRoID09PSAnX2lkJykge1xuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgJiYgdmFsLnNwbGl0KCcsJykubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBpZiAoIWhhc0N1c3RvbUlEKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9IFR5cGVzLk9iamVjdElkLmlzVmFsaWQodmFsKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiBmb3JtYXR0ZWRPcGVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbm90X2luJ1xuICAgICAgICAgICAgICAgICAgICBdLmluY2x1ZGVzKG9wZXJhdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBjcmVhdGVBcnJheUZyb21Db21tYURlbGluZWF0ZWQoZm9ybWF0dGVkVmFsdWUpLm1hcCgoaWQpPT5uZXcgVHlwZXMuT2JqZWN0SWQoaWQpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gbmV3IFR5cGVzLk9iamVjdElkKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWROdW1iZXIgPSBwYXJzZUZsb2F0KHZhbCk7XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlci5pc05hTihwYXJzZWROdW1iZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvcjogZm9ybWF0dGVkT3BlcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWw6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbCkgfHwgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgJiYgdmFsLnNwbGl0KCcsJykubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBjcmVhdGVBcnJheUZyb21Db21tYURlbGluZWF0ZWQodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZvcm1hdHRlZFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0dGVkVmFsdWUucmVkdWNlKChmb3JtYXR0ZWRWYWx1ZXMsIGluVmFsKT0+e1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc0N1c3RvbUlEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVHlwZXMuT2JqZWN0SWQuaXNWYWxpZChpblZhbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZXMucHVzaChuZXcgVHlwZXMuT2JqZWN0SWQoaW5WYWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZE51bWJlciA9IHBhcnNlRmxvYXQoaW5WYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4ocGFyc2VkTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlcy5wdXNoKHBhcnNlZE51bWJlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZXMucHVzaChpblZhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlcztcbiAgICAgICAgICAgICAgICB9LCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2FzdCBpbmNvbWluZyB2YWx1ZXMgYXMgcHJvcGVyIHNlYXJjaGFibGUgdHlwZXNcbiAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2NoZWNrYm94JyAmJiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodmFsLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWwudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoW1xuICAgICAgICAnYWxsJyxcbiAgICAgICAgJ2luJyxcbiAgICAgICAgJ25vdF9pbidcbiAgICBdLmluY2x1ZGVzKG9wZXJhdG9yKSAmJiB0eXBlb2YgZm9ybWF0dGVkVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGZvcm1hdHRlZFZhbHVlID0gY3JlYXRlQXJyYXlGcm9tQ29tbWFEZWxpbmVhdGVkKGZvcm1hdHRlZFZhbHVlKTtcbiAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdudW1iZXInICYmIEFycmF5LmlzQXJyYXkoZm9ybWF0dGVkVmFsdWUpKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IGZvcm1hdHRlZFZhbHVlLm1hcCgoYXJyYXlWYWwpPT5wYXJzZUZsb2F0KGFycmF5VmFsKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpZWxkLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZm9ybWF0dGVkVmFsdWUgPT09ICdzdHJpbmcnICYmIG9wZXJhdG9yICE9PSAnZXhpc3RzJykge1xuICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBOdW1iZXIodmFsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdleGlzdHMnKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHZhbCA9PT0gJ3RydWUnID8gdHJ1ZSA6IHZhbCA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogQm9vbGVhbih2YWwpO1xuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkRXhpc3RzUXVlcnkoZm9ybWF0dGVkVmFsdWUsIHBhdGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChmaWVsZC50eXBlID09PSAnZGF0ZScgJiYgdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgJiYgb3BlcmF0b3IgIT09ICdleGlzdHMnKSB7XG4gICAgICAgIGZvcm1hdHRlZFZhbHVlID0gbmV3IERhdGUodmFsKTtcbiAgICAgICAgaWYgKE51bWJlci5pc05hTihEYXRlLnBhcnNlKGZvcm1hdHRlZFZhbHVlKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKFtcbiAgICAgICAgJ3JlbGF0aW9uc2hpcCcsXG4gICAgICAgICd1cGxvYWQnXG4gICAgXS5pbmNsdWRlcyhmaWVsZC50eXBlKSkge1xuICAgICAgICBpZiAodmFsID09PSAnbnVsbCcpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBPYmplY3QgZXF1YWxpdHkgcmVxdWlyZXMgdGhlIHZhbHVlIHRvIGJlIHRoZSBmaXJzdCBrZXkgaW4gdGhlIG9iamVjdCB0aGF0IGlzIGJlaW5nIHF1ZXJpZWQuXG4gICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2VxdWFscycgJiYgZm9ybWF0dGVkVmFsdWUgJiYgdHlwZW9mIGZvcm1hdHRlZFZhbHVlID09PSAnb2JqZWN0JyAmJiBmb3JtYXR0ZWRWYWx1ZS52YWx1ZSAmJiBmb3JtYXR0ZWRWYWx1ZS5yZWxhdGlvblRvKSB7XG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSBmb3JtYXR0ZWRWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUudmFsdWUgPSBuZXcgVHlwZXMuT2JqZWN0SWQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGxvY2FsaXplZFBhdGggPSBwYXRoO1xuICAgICAgICAgICAgaWYgKGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgICAgICB9KSAmJiBwYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24gJiYgbG9jYWxlKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxpemVkUGF0aCA9IGAke3BhdGh9LiR7bG9jYWxlfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJhd1F1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICRvcjogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtsb2NhbGl6ZWRQYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgYXV0byBzb3J0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSAqLyB2YWx1ZTogZm9ybWF0dGVkVmFsdWUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvblRvOiBmb3JtYXR0ZWRWYWx1ZS5yZWxhdGlvblRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtsb2NhbGl6ZWRQYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uVG86IGZvcm1hdHRlZFZhbHVlLnJlbGF0aW9uVG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZm9ybWF0dGVkVmFsdWUudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVsYXRpb25UbyA9IGZpZWxkLnJlbGF0aW9uVG87XG4gICAgICAgIGlmIChbXG4gICAgICAgICAgICAnaW4nLFxuICAgICAgICAgICAgJ25vdF9pbidcbiAgICAgICAgXS5pbmNsdWRlcyhvcGVyYXRvcikgJiYgQXJyYXkuaXNBcnJheShmb3JtYXR0ZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0dGVkVmFsdWUucmVkdWNlKChmb3JtYXR0ZWRWYWx1ZXMsIGluVmFsKT0+e1xuICAgICAgICAgICAgICAgIGlmICghaW5WYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWxhdGlvblRvID09PSAnc3RyaW5nJyAmJiBwYXlsb2FkLmNvbGxlY3Rpb25zW3JlbGF0aW9uVG9dPy5jdXN0b21JRFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQuY29sbGVjdGlvbnNbcmVsYXRpb25Ub10uY3VzdG9tSURUeXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkTnVtYmVyID0gcGFyc2VGbG9hdChpblZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihwYXJzZWROdW1iZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWVzLnB1c2gocGFyc2VkTnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlcy5wdXNoKGluVmFsKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVsYXRpb25UbykgJiYgcmVsYXRpb25Uby5zb21lKChyZWxhdGlvblRvKT0+ISFwYXlsb2FkLmNvbGxlY3Rpb25zW3JlbGF0aW9uVG9dPy5jdXN0b21JRFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGluVmFsLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZXMucHVzaChuZXcgVHlwZXMuT2JqZWN0SWQoaW5WYWwpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlcy5wdXNoKGluVmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0dGVkVmFsdWVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoVHlwZXMuT2JqZWN0SWQuaXNWYWxpZChpblZhbC50b1N0cmluZygpKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZXMucHVzaChuZXcgVHlwZXMuT2JqZWN0SWQoaW5WYWwpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFZhbHVlcztcbiAgICAgICAgICAgIH0sIFtdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoW1xuICAgICAgICAgICAgJ2NvbnRhaW5zJyxcbiAgICAgICAgICAgICdlcXVhbHMnLFxuICAgICAgICAgICAgJ2xpa2UnLFxuICAgICAgICAgICAgJ25vdF9lcXVhbHMnXG4gICAgICAgIF0uaW5jbHVkZXMob3BlcmF0b3IpICYmICghQXJyYXkuaXNBcnJheShyZWxhdGlvblRvKSB8fCAhcGF0aC5lbmRzV2l0aCgnLnJlbGF0aW9uVG8nKSkpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVsYXRpb25UbyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXN0b21JRFR5cGUgPSBwYXlsb2FkLmNvbGxlY3Rpb25zW3JlbGF0aW9uVG9dPy5jdXN0b21JRFR5cGU7XG4gICAgICAgICAgICAgICAgaWYgKGN1c3RvbUlEVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tSURUeXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBwYXJzZUZsb2F0KHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGZvcm1hdHRlZFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yOiBmb3JtYXR0ZWRPcGVyYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKGZvcm1hdHRlZFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvcjogZm9ybWF0dGVkT3BlcmF0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUgPSBuZXcgVHlwZXMuT2JqZWN0SWQoZm9ybWF0dGVkVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzQ3VzdG9tSURUeXBlID0gcmVsYXRpb25Uby5zb21lKChyZWxhdGlvblRvKT0+ISFwYXlsb2FkLmNvbGxlY3Rpb25zW3JlbGF0aW9uVG9dPy5jdXN0b21JRFR5cGUpO1xuICAgICAgICAgICAgICAgIGlmIChoYXNDdXN0b21JRFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWROdW1iZXIgPSBOdW1iZXIodmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR5cGVzLk9iamVjdElkLmlzVmFsaWQodmFsKSA/IG5ldyBUeXBlcy5PYmplY3RJZCh2YWwpIDogdmFsXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkT3BlcmF0b3IgPSBvcGVyYXRvciA9PT0gJ25vdF9lcXVhbHMnID8gJ25vdF9pbicgOiAnaW4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oZm9ybWF0dGVkTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlLnB1c2goZm9ybWF0dGVkTnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghVHlwZXMuT2JqZWN0SWQuaXNWYWxpZChmb3JtYXR0ZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3I6IGZvcm1hdHRlZE9wZXJhdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gbmV3IFR5cGVzLk9iamVjdElkKGZvcm1hdHRlZFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wZXJhdG9yID09PSAnYWxsJyAmJiBBcnJheS5pc0FycmF5KHJlbGF0aW9uVG8pICYmIHBhdGguZW5kc1dpdGgoJy52YWx1ZScpICYmIEFycmF5LmlzQXJyYXkoZm9ybWF0dGVkVmFsdWUpKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZS5mb3JFYWNoKCh2LCBpKT0+e1xuICAgICAgICAgICAgICAgIGlmIChUeXBlcy5PYmplY3RJZC5pc1ZhbGlkKHYpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlW2ldID0gbmV3IFR5cGVzLk9iamVjdElkKHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNldCB1cCBzcGVjaWZpYyBmb3JtYXR0aW5nIG5lY2Vzc2FyeSBieSBvcGVyYXRvcnNcbiAgICBpZiAob3BlcmF0b3IgPT09ICduZWFyJykge1xuICAgICAgICBsZXQgbG5nO1xuICAgICAgICBsZXQgbGF0O1xuICAgICAgICBsZXQgbWF4RGlzdGFuY2U7XG4gICAgICAgIGxldCBtaW5EaXN0YW5jZTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZm9ybWF0dGVkVmFsdWUpKSB7XG4gICAgICAgICAgICA7XG4gICAgICAgICAgICBbbG5nLCBsYXQsIG1heERpc3RhbmNlLCBtaW5EaXN0YW5jZV0gPSBmb3JtYXR0ZWRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGZvcm1hdHRlZFZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgW2xuZywgbGF0LCBtYXhEaXN0YW5jZSwgbWluRGlzdGFuY2VdID0gY3JlYXRlQXJyYXlGcm9tQ29tbWFEZWxpbmVhdGVkKGZvcm1hdHRlZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG5nID09IG51bGwgfHwgbGF0ID09IG51bGwgfHwgbWF4RGlzdGFuY2UgPT0gbnVsbCAmJiBtaW5EaXN0YW5jZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0ge1xuICAgICAgICAgICAgICAgICRnZW9tZXRyeToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChsbmcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChsYXQpXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKG1heERpc3RhbmNlICYmICFOdW1iZXIuaXNOYU4oTnVtYmVyKG1heERpc3RhbmNlKSkpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWx1ZS4kbWF4RGlzdGFuY2UgPSBwYXJzZUZsb2F0KG1heERpc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaW5EaXN0YW5jZSAmJiAhTnVtYmVyLmlzTmFOKE51bWJlcihtaW5EaXN0YW5jZSkpKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsdWUuJG1pbkRpc3RhbmNlID0gcGFyc2VGbG9hdChtaW5EaXN0YW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wZXJhdG9yID09PSAnd2l0aGluJyB8fCBvcGVyYXRvciA9PT0gJ2ludGVyc2VjdHMnKSB7XG4gICAgICAgIGZvcm1hdHRlZFZhbHVlID0ge1xuICAgICAgICAgICAgJGdlb21ldHJ5OiBmb3JtYXR0ZWRWYWx1ZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAocGF0aCAhPT0gJ19pZCcgfHwgcGF0aCA9PT0gJ19pZCcgJiYgaGFzQ3VzdG9tSUQgJiYgZmllbGQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2NvbnRhaW5zJyAmJiAhVHlwZXMuT2JqZWN0SWQuaXNWYWxpZChmb3JtYXR0ZWRWYWx1ZSkpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0ge1xuICAgICAgICAgICAgICAgICRvcHRpb25zOiAnaScsXG4gICAgICAgICAgICAgICAgJHJlZ2V4OiBmb3JtYXR0ZWRWYWx1ZS5yZXBsYWNlKC9bXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2V4aXN0cycpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFZhbHVlID0gZm9ybWF0dGVkVmFsdWUgPT09ICd0cnVlJyB8fCBmb3JtYXR0ZWRWYWx1ZSA9PT0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIF9pZCBjYW4ndCBiZSBlbXB0eSBzdHJpbmcsIHdpbGwgZXJyb3IgQ2FzdCB0byBPYmplY3RJZCBmYWlsZWQgZm9yIHZhbHVlIFwiXCJcbiAgICAgICAgICAgIHJldHVybiBidWlsZEV4aXN0c1F1ZXJ5KGZvcm1hdHRlZFZhbHVlLCBwYXRoLCAhW1xuICAgICAgICAgICAgICAgICdjaGVja2JveCcsXG4gICAgICAgICAgICAgICAgJ3JlbGF0aW9uc2hpcCcsXG4gICAgICAgICAgICAgICAgJ3VwbG9hZCdcbiAgICAgICAgICAgIF0uaW5jbHVkZXMoZmllbGQudHlwZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICgocGF0aCA9PT0gJ19pZCcgfHwgcGF0aCA9PT0gJ3BhcmVudCcpICYmIG9wZXJhdG9yID09PSAnbGlrZScgJiYgZm9ybWF0dGVkVmFsdWUubGVuZ3RoID09PSAyNCAmJiAhaGFzQ3VzdG9tSUQpIHtcbiAgICAgICAgZm9ybWF0dGVkT3BlcmF0b3IgPSAnZXF1YWxzJztcbiAgICB9XG4gICAgaWYgKG9wZXJhdG9yID09PSAnZXhpc3RzJykge1xuICAgICAgICBmb3JtYXR0ZWRWYWx1ZSA9IGZvcm1hdHRlZFZhbHVlID09PSAndHJ1ZScgfHwgZm9ybWF0dGVkVmFsdWUgPT09IHRydWU7XG4gICAgICAgIC8vIENsZWFyYWJsZSBmaWVsZHNcbiAgICAgICAgaWYgKFtcbiAgICAgICAgICAgICdyZWxhdGlvbnNoaXAnLFxuICAgICAgICAgICAgJ3NlbGVjdCcsXG4gICAgICAgICAgICAndXBsb2FkJ1xuICAgICAgICBdLmluY2x1ZGVzKGZpZWxkLnR5cGUpKSB7XG4gICAgICAgICAgICBpZiAoZm9ybWF0dGVkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByYXdRdWVyeToge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGFuZDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXhpc3RzOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbmU6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJhd1F1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkb3I6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGV4aXN0czogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcTogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBvcGVyYXRvcjogZm9ybWF0dGVkT3BlcmF0b3IsXG4gICAgICAgIHZhbDogZm9ybWF0dGVkVmFsdWVcbiAgICB9O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FuaXRpemVRdWVyeVZhbHVlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/sanitizeQueryValue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queryDrafts.js":
/*!*********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queryDrafts.js ***!
  \*********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   queryDrafts: () => (/* binding */ queryDrafts)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/combineQueries.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utilities/aggregatePaginate.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js\");\n/* harmony import */ var _utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utilities/buildJoinAggregation.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\n\n\nconst queryDrafts = async function queryDrafts({ collection: collectionSlug, joins, limit, locale, page, pagination, req, select, sort: sortArg, where = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const options = {\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_1__.getSession)(this, req)\n    };\n    let hasNearConstraint;\n    let sort;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_3__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true);\n    const sortAggregation = [];\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_4__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields,\n            locale,\n            sort: sortArg || collectionConfig.defaultSort,\n            sortAggregation,\n            timestamps: true,\n            versions: true\n        });\n    }\n    const combinedWhere = (0,payload__WEBPACK_IMPORTED_MODULE_5__.combineQueries)({\n        latest: {\n            equals: true\n        }\n    }, where);\n    const versionQuery = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_6__.buildQuery)({\n        adapter: this,\n        fields,\n        locale,\n        where: combinedWhere\n    });\n    const projection = (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_7__.buildProjectionFromSelect)({\n        adapter: this,\n        fields,\n        select\n    });\n    // useEstimatedCount is faster, but not accurate, as it ignores any filters. It is thus set to true if there are no filters.\n    const useEstimatedCount = hasNearConstraint || !versionQuery || Object.keys(versionQuery).length === 0;\n    const paginationOptions = {\n        lean: true,\n        leanWithId: true,\n        options,\n        page,\n        pagination,\n        projection,\n        sort,\n        useEstimatedCount\n    };\n    if (this.collation) {\n        const defaultLocale = 'en';\n        paginationOptions.collation = {\n            locale: locale && locale !== 'all' && locale !== '*' ? locale : defaultLocale,\n            ...this.collation\n        };\n    }\n    if (!useEstimatedCount && Object.keys(versionQuery).length === 0 && this.disableIndexHints !== true) {\n        // Improve the performance of the countDocuments query which is used if useEstimatedCount is set to false by adding\n        // a hint. By default, if no hint is provided, MongoDB does not use an indexed field to count the returned documents,\n        // which makes queries very slow. This only happens when no query (filter) is provided. If one is provided, it uses\n        // the correct indexed field\n        paginationOptions.useCustomCountFn = ()=>{\n            return Promise.resolve(Model.countDocuments(versionQuery, {\n                hint: {\n                    _id: 1\n                }\n            }));\n        };\n    }\n    if (limit && limit > 0) {\n        paginationOptions.limit = limit;\n        // limit must also be set here, it's ignored when pagination is false\n        paginationOptions.options.limit = limit;\n    }\n    let result;\n    const aggregate = await (0,_utilities_buildJoinAggregation_js__WEBPACK_IMPORTED_MODULE_8__.buildJoinAggregation)({\n        adapter: this,\n        collection: collectionSlug,\n        collectionConfig,\n        joins,\n        locale,\n        projection,\n        query: versionQuery,\n        versions: true\n    });\n    // build join aggregation\n    if (aggregate || sortAggregation.length > 0) {\n        result = await (0,_utilities_aggregatePaginate_js__WEBPACK_IMPORTED_MODULE_9__.aggregatePaginate)({\n            adapter: this,\n            collation: paginationOptions.collation,\n            joinAggregation: aggregate,\n            limit: paginationOptions.limit,\n            Model,\n            page: paginationOptions.page,\n            pagination: paginationOptions.pagination,\n            projection: paginationOptions.projection,\n            query: versionQuery,\n            session: paginationOptions.options?.session ?? undefined,\n            sort: paginationOptions.sort,\n            sortAggregation,\n            useEstimatedCount: paginationOptions.useEstimatedCount\n        });\n    } else {\n        result = await Model.paginate(versionQuery, paginationOptions);\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_10__.transform)({\n        adapter: this,\n        data: result.docs,\n        fields: (0,payload__WEBPACK_IMPORTED_MODULE_3__.buildVersionCollectionFields)(this.payload.config, collectionConfig),\n        operation: 'read'\n    });\n    for(let i = 0; i < result.docs.length; i++){\n        const id = result.docs[i].parent;\n        result.docs[i] = result.docs[i].version ?? {};\n        result.docs[i].id = id;\n    }\n    return result;\n};\n\n//# sourceMappingURL=queryDrafts.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyeURyYWZ0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBZ0c7QUFDM0M7QUFDUTtBQUNRO0FBQ007QUFDVTtBQUM1QjtBQUNGO0FBQ0Y7QUFDOUMsaURBQWlELDRHQUE0RztBQUNwSyxZQUFZLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1QixvRUFBVTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnRUFBdUI7QUFDbkQ7QUFDQTtBQUNBLG1CQUFtQixxRUFBNEI7QUFDL0M7QUFDQTtBQUNBLGVBQWUsMEVBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLDBCQUEwQix1REFBYztBQUN4QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsK0JBQStCLGtFQUFVO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVCQUF1QixrR0FBeUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3RkFBb0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsdUJBQXVCLGtGQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUksbUVBQVM7QUFDYjtBQUNBO0FBQ0EsZ0JBQWdCLHFFQUE0QjtBQUM1QztBQUNBLEtBQUs7QUFDTCxtQkFBbUIsd0JBQXdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC9xdWVyeURyYWZ0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzLCBjb21iaW5lUXVlcmllcywgZmxhdHRlbldoZXJlVG9PcGVyYXRvcnMgfSBmcm9tICdwYXlsb2FkJztcbmltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuL3F1ZXJpZXMvYnVpbGRRdWVyeS5qcyc7XG5pbXBvcnQgeyBidWlsZFNvcnRQYXJhbSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFNvcnRQYXJhbS5qcyc7XG5pbXBvcnQgeyBhZ2dyZWdhdGVQYWdpbmF0ZSB9IGZyb20gJy4vdXRpbGl0aWVzL2FnZ3JlZ2F0ZVBhZ2luYXRlLmpzJztcbmltcG9ydCB7IGJ1aWxkSm9pbkFnZ3JlZ2F0aW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvYnVpbGRKb2luQWdncmVnYXRpb24uanMnO1xuaW1wb3J0IHsgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IHF1ZXJ5RHJhZnRzID0gYXN5bmMgZnVuY3Rpb24gcXVlcnlEcmFmdHMoeyBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1Zywgam9pbnMsIGxpbWl0LCBsb2NhbGUsIHBhZ2UsIHBhZ2luYXRpb24sIHJlcSwgc2VsZWN0LCBzb3J0OiBzb3J0QXJnLCB3aGVyZSA9IHt9IH0pIHtcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBsZXQgaGFzTmVhckNvbnN0cmFpbnQ7XG4gICAgbGV0IHNvcnQ7XG4gICAgaWYgKHdoZXJlKSB7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gZmxhdHRlbldoZXJlVG9PcGVyYXRvcnMod2hlcmUpO1xuICAgICAgICBoYXNOZWFyQ29uc3RyYWludCA9IGNvbnN0cmFpbnRzLnNvbWUoKHByb3ApPT5PYmplY3Qua2V5cyhwcm9wKS5zb21lKChrZXkpPT5rZXkgPT09ICduZWFyJykpO1xuICAgIH1cbiAgICBjb25zdCBmaWVsZHMgPSBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGNvbGxlY3Rpb25Db25maWcsIHRydWUpO1xuICAgIGNvbnN0IHNvcnRBZ2dyZWdhdGlvbiA9IFtdO1xuICAgIGlmICghaGFzTmVhckNvbnN0cmFpbnQpIHtcbiAgICAgICAgc29ydCA9IGJ1aWxkU29ydFBhcmFtKHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMucGF5bG9hZC5jb25maWcsXG4gICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICBzb3J0OiBzb3J0QXJnIHx8IGNvbGxlY3Rpb25Db25maWcuZGVmYXVsdFNvcnQsXG4gICAgICAgICAgICBzb3J0QWdncmVnYXRpb24sXG4gICAgICAgICAgICB0aW1lc3RhbXBzOiB0cnVlLFxuICAgICAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbWJpbmVkV2hlcmUgPSBjb21iaW5lUXVlcmllcyh7XG4gICAgICAgIGxhdGVzdDoge1xuICAgICAgICAgICAgZXF1YWxzOiB0cnVlXG4gICAgICAgIH1cbiAgICB9LCB3aGVyZSk7XG4gICAgY29uc3QgdmVyc2lvblF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICB3aGVyZTogY29tYmluZWRXaGVyZVxuICAgIH0pO1xuICAgIGNvbnN0IHByb2plY3Rpb24gPSBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBzZWxlY3RcbiAgICB9KTtcbiAgICAvLyB1c2VFc3RpbWF0ZWRDb3VudCBpcyBmYXN0ZXIsIGJ1dCBub3QgYWNjdXJhdGUsIGFzIGl0IGlnbm9yZXMgYW55IGZpbHRlcnMuIEl0IGlzIHRodXMgc2V0IHRvIHRydWUgaWYgdGhlcmUgYXJlIG5vIGZpbHRlcnMuXG4gICAgY29uc3QgdXNlRXN0aW1hdGVkQ291bnQgPSBoYXNOZWFyQ29uc3RyYWludCB8fCAhdmVyc2lvblF1ZXJ5IHx8IE9iamVjdC5rZXlzKHZlcnNpb25RdWVyeSkubGVuZ3RoID09PSAwO1xuICAgIGNvbnN0IHBhZ2luYXRpb25PcHRpb25zID0ge1xuICAgICAgICBsZWFuOiB0cnVlLFxuICAgICAgICBsZWFuV2l0aElkOiB0cnVlLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBwYWdlLFxuICAgICAgICBwYWdpbmF0aW9uLFxuICAgICAgICBwcm9qZWN0aW9uLFxuICAgICAgICBzb3J0LFxuICAgICAgICB1c2VFc3RpbWF0ZWRDb3VudFxuICAgIH07XG4gICAgaWYgKHRoaXMuY29sbGF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRMb2NhbGUgPSAnZW4nO1xuICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucy5jb2xsYXRpb24gPSB7XG4gICAgICAgICAgICBsb2NhbGU6IGxvY2FsZSAmJiBsb2NhbGUgIT09ICdhbGwnICYmIGxvY2FsZSAhPT0gJyonID8gbG9jYWxlIDogZGVmYXVsdExvY2FsZSxcbiAgICAgICAgICAgIC4uLnRoaXMuY29sbGF0aW9uXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghdXNlRXN0aW1hdGVkQ291bnQgJiYgT2JqZWN0LmtleXModmVyc2lvblF1ZXJ5KS5sZW5ndGggPT09IDAgJiYgdGhpcy5kaXNhYmxlSW5kZXhIaW50cyAhPT0gdHJ1ZSkge1xuICAgICAgICAvLyBJbXByb3ZlIHRoZSBwZXJmb3JtYW5jZSBvZiB0aGUgY291bnREb2N1bWVudHMgcXVlcnkgd2hpY2ggaXMgdXNlZCBpZiB1c2VFc3RpbWF0ZWRDb3VudCBpcyBzZXQgdG8gZmFsc2UgYnkgYWRkaW5nXG4gICAgICAgIC8vIGEgaGludC4gQnkgZGVmYXVsdCwgaWYgbm8gaGludCBpcyBwcm92aWRlZCwgTW9uZ29EQiBkb2VzIG5vdCB1c2UgYW4gaW5kZXhlZCBmaWVsZCB0byBjb3VudCB0aGUgcmV0dXJuZWQgZG9jdW1lbnRzLFxuICAgICAgICAvLyB3aGljaCBtYWtlcyBxdWVyaWVzIHZlcnkgc2xvdy4gVGhpcyBvbmx5IGhhcHBlbnMgd2hlbiBubyBxdWVyeSAoZmlsdGVyKSBpcyBwcm92aWRlZC4gSWYgb25lIGlzIHByb3ZpZGVkLCBpdCB1c2VzXG4gICAgICAgIC8vIHRoZSBjb3JyZWN0IGluZGV4ZWQgZmllbGRcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMudXNlQ3VzdG9tQ291bnRGbiA9ICgpPT57XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKE1vZGVsLmNvdW50RG9jdW1lbnRzKHZlcnNpb25RdWVyeSwge1xuICAgICAgICAgICAgICAgIGhpbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAobGltaXQgJiYgbGltaXQgPiAwKSB7XG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zLmxpbWl0ID0gbGltaXQ7XG4gICAgICAgIC8vIGxpbWl0IG11c3QgYWxzbyBiZSBzZXQgaGVyZSwgaXQncyBpZ25vcmVkIHdoZW4gcGFnaW5hdGlvbiBpcyBmYWxzZVxuICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucy5vcHRpb25zLmxpbWl0ID0gbGltaXQ7XG4gICAgfVxuICAgIGxldCByZXN1bHQ7XG4gICAgY29uc3QgYWdncmVnYXRlID0gYXdhaXQgYnVpbGRKb2luQWdncmVnYXRpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgY29sbGVjdGlvbkNvbmZpZyxcbiAgICAgICAgam9pbnMsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgcHJvamVjdGlvbixcbiAgICAgICAgcXVlcnk6IHZlcnNpb25RdWVyeSxcbiAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICB9KTtcbiAgICAvLyBidWlsZCBqb2luIGFnZ3JlZ2F0aW9uXG4gICAgaWYgKGFnZ3JlZ2F0ZSB8fCBzb3J0QWdncmVnYXRpb24ubGVuZ3RoID4gMCkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBhZ2dyZWdhdGVQYWdpbmF0ZSh7XG4gICAgICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICAgICAgY29sbGF0aW9uOiBwYWdpbmF0aW9uT3B0aW9ucy5jb2xsYXRpb24sXG4gICAgICAgICAgICBqb2luQWdncmVnYXRpb246IGFnZ3JlZ2F0ZSxcbiAgICAgICAgICAgIGxpbWl0OiBwYWdpbmF0aW9uT3B0aW9ucy5saW1pdCxcbiAgICAgICAgICAgIE1vZGVsLFxuICAgICAgICAgICAgcGFnZTogcGFnaW5hdGlvbk9wdGlvbnMucGFnZSxcbiAgICAgICAgICAgIHBhZ2luYXRpb246IHBhZ2luYXRpb25PcHRpb25zLnBhZ2luYXRpb24sXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBwYWdpbmF0aW9uT3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgcXVlcnk6IHZlcnNpb25RdWVyeSxcbiAgICAgICAgICAgIHNlc3Npb246IHBhZ2luYXRpb25PcHRpb25zLm9wdGlvbnM/LnNlc3Npb24gPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgc29ydDogcGFnaW5hdGlvbk9wdGlvbnMuc29ydCxcbiAgICAgICAgICAgIHNvcnRBZ2dyZWdhdGlvbixcbiAgICAgICAgICAgIHVzZUVzdGltYXRlZENvdW50OiBwYWdpbmF0aW9uT3B0aW9ucy51c2VFc3RpbWF0ZWRDb3VudFxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5wYWdpbmF0ZSh2ZXJzaW9uUXVlcnksIHBhZ2luYXRpb25PcHRpb25zKTtcbiAgICB9XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogcmVzdWx0LmRvY3MsXG4gICAgICAgIGZpZWxkczogYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyh0aGlzLnBheWxvYWQuY29uZmlnLCBjb2xsZWN0aW9uQ29uZmlnKSxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgcmVzdWx0LmRvY3MubGVuZ3RoOyBpKyspe1xuICAgICAgICBjb25zdCBpZCA9IHJlc3VsdC5kb2NzW2ldLnBhcmVudDtcbiAgICAgICAgcmVzdWx0LmRvY3NbaV0gPSByZXN1bHQuZG9jc1tpXS52ZXJzaW9uID8/IHt9O1xuICAgICAgICByZXN1bHQuZG9jc1tpXS5pZCA9IGlkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnlEcmFmdHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queryDrafts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/beginTransaction.js":
/*!***************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/beginTransaction.js ***!
  \***************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   beginTransaction: () => (/* binding */ beginTransaction)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/.pnpm/uuid@10.0.0/node_modules/uuid/dist/esm-node/v4.js\");\n\n\n// Needs await to fulfill the interface\n// @ts-expect-error TransactionOptions isn't compatible with BeginTransaction of the DatabaseAdapter interface.\n// eslint-disable-next-line @typescript-eslint/require-await\nconst beginTransaction = async function beginTransaction(options) {\n    if (!this.connection) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError('beginTransaction called while no connection to the database exists');\n    }\n    const client = this.connection.getClient();\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    if (!this.sessions[id]) {\n        // @ts-expect-error BaseDatabaseAdapter and MongoosAdapter (that extends Base) sessions aren't compatible.\n        this.sessions[id] = client.startSession();\n    }\n    if (this.sessions[id]?.inTransaction()) {\n        this.payload.logger.warn('beginTransaction called while transaction already exists');\n    } else {\n        this.sessions[id]?.startTransaction(options || this.transactionOptions);\n    }\n    return id;\n};\n\n//# sourceMappingURL=beginTransaction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC90cmFuc2FjdGlvbnMvYmVnaW5UcmFuc2FjdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUM7QUFDRDtBQUNsQztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esa0JBQWtCLDZDQUFRO0FBQzFCO0FBQ0E7QUFDQSxlQUFlLGdEQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC90cmFuc2FjdGlvbnMvYmVnaW5UcmFuc2FjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBUElFcnJvciB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ3V1aWQnO1xuLy8gTmVlZHMgYXdhaXQgdG8gZnVsZmlsbCB0aGUgaW50ZXJmYWNlXG4vLyBAdHMtZXhwZWN0LWVycm9yIFRyYW5zYWN0aW9uT3B0aW9ucyBpc24ndCBjb21wYXRpYmxlIHdpdGggQmVnaW5UcmFuc2FjdGlvbiBvZiB0aGUgRGF0YWJhc2VBZGFwdGVyIGludGVyZmFjZS5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcmVxdWlyZS1hd2FpdFxuZXhwb3J0IGNvbnN0IGJlZ2luVHJhbnNhY3Rpb24gPSBhc3luYyBmdW5jdGlvbiBiZWdpblRyYW5zYWN0aW9uKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoJ2JlZ2luVHJhbnNhY3Rpb24gY2FsbGVkIHdoaWxlIG5vIGNvbm5lY3Rpb24gdG8gdGhlIGRhdGFiYXNlIGV4aXN0cycpO1xuICAgIH1cbiAgICBjb25zdCBjbGllbnQgPSB0aGlzLmNvbm5lY3Rpb24uZ2V0Q2xpZW50KCk7XG4gICAgY29uc3QgaWQgPSB1dWlkKCk7XG4gICAgaWYgKCF0aGlzLnNlc3Npb25zW2lkXSkge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEJhc2VEYXRhYmFzZUFkYXB0ZXIgYW5kIE1vbmdvb3NBZGFwdGVyICh0aGF0IGV4dGVuZHMgQmFzZSkgc2Vzc2lvbnMgYXJlbid0IGNvbXBhdGlibGUuXG4gICAgICAgIHRoaXMuc2Vzc2lvbnNbaWRdID0gY2xpZW50LnN0YXJ0U2Vzc2lvbigpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZXNzaW9uc1tpZF0/LmluVHJhbnNhY3Rpb24oKSkge1xuICAgICAgICB0aGlzLnBheWxvYWQubG9nZ2VyLndhcm4oJ2JlZ2luVHJhbnNhY3Rpb24gY2FsbGVkIHdoaWxlIHRyYW5zYWN0aW9uIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uc1tpZF0/LnN0YXJ0VHJhbnNhY3Rpb24ob3B0aW9ucyB8fCB0aGlzLnRyYW5zYWN0aW9uT3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiBpZDtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJlZ2luVHJhbnNhY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/beginTransaction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/commitTransaction.js":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/commitTransaction.js ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   commitTransaction: () => (/* binding */ commitTransaction)\n/* harmony export */ });\nconst commitTransaction = async function commitTransaction(id) {\n    if (id instanceof Promise) {\n        return;\n    }\n    if (!this.sessions[id]?.inTransaction()) {\n        return;\n    }\n    await this.sessions[id].commitTransaction();\n    try {\n        await this.sessions[id].endSession();\n    } catch (_) {\n    // ending sessions is only best effort and won't impact anything if it fails since the transaction was committed\n    }\n    delete this.sessions[id];\n};\n\n//# sourceMappingURL=commitTransaction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC90cmFuc2FjdGlvbnMvY29tbWl0VHJhbnNhY3Rpb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3RyYW5zYWN0aW9ucy9jb21taXRUcmFuc2FjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY29tbWl0VHJhbnNhY3Rpb24gPSBhc3luYyBmdW5jdGlvbiBjb21taXRUcmFuc2FjdGlvbihpZCkge1xuICAgIGlmIChpZCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuc2Vzc2lvbnNbaWRdPy5pblRyYW5zYWN0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLnNlc3Npb25zW2lkXS5jb21taXRUcmFuc2FjdGlvbigpO1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2Vzc2lvbnNbaWRdLmVuZFNlc3Npb24oKTtcbiAgICB9IGNhdGNoIChfKSB7XG4gICAgLy8gZW5kaW5nIHNlc3Npb25zIGlzIG9ubHkgYmVzdCBlZmZvcnQgYW5kIHdvbid0IGltcGFjdCBhbnl0aGluZyBpZiBpdCBmYWlscyBzaW5jZSB0aGUgdHJhbnNhY3Rpb24gd2FzIGNvbW1pdHRlZFxuICAgIH1cbiAgICBkZWxldGUgdGhpcy5zZXNzaW9uc1tpZF07XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21taXRUcmFuc2FjdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/commitTransaction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/rollbackTransaction.js":
/*!******************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/rollbackTransaction.js ***!
  \******************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   rollbackTransaction: () => (/* binding */ rollbackTransaction)\n/* harmony export */ });\nconst rollbackTransaction = async function rollbackTransaction(incomingID = '') {\n    let transactionID;\n    if (incomingID instanceof Promise) {\n        transactionID = await incomingID;\n    } else {\n        transactionID = incomingID;\n    }\n    // if multiple operations are using the same transaction, the first will flow through and delete the session.\n    // subsequent calls should be ignored.\n    if (!this.sessions[transactionID]) {\n        return;\n    }\n    // when session exists but is not inTransaction something unexpected is happening to the session\n    if (!this.sessions[transactionID]?.inTransaction()) {\n        this.payload.logger.warn('rollbackTransaction called when no transaction exists');\n        delete this.sessions[transactionID];\n        return;\n    }\n    // the first call for rollback should be aborted and deleted causing any other operations with the same transaction to fail\n    try {\n        await this.sessions[transactionID]?.abortTransaction();\n        await this.sessions[transactionID]?.endSession();\n    } catch (error) {\n    // ignore the error as it is likely a race condition from multiple errors\n    }\n    delete this.sessions[transactionID];\n};\n\n//# sourceMappingURL=rollbackTransaction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC90cmFuc2FjdGlvbnMvcm9sbGJhY2tUcmFuc2FjdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC90cmFuc2FjdGlvbnMvcm9sbGJhY2tUcmFuc2FjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgcm9sbGJhY2tUcmFuc2FjdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIHJvbGxiYWNrVHJhbnNhY3Rpb24oaW5jb21pbmdJRCA9ICcnKSB7XG4gICAgbGV0IHRyYW5zYWN0aW9uSUQ7XG4gICAgaWYgKGluY29taW5nSUQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHRyYW5zYWN0aW9uSUQgPSBhd2FpdCBpbmNvbWluZ0lEO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYW5zYWN0aW9uSUQgPSBpbmNvbWluZ0lEO1xuICAgIH1cbiAgICAvLyBpZiBtdWx0aXBsZSBvcGVyYXRpb25zIGFyZSB1c2luZyB0aGUgc2FtZSB0cmFuc2FjdGlvbiwgdGhlIGZpcnN0IHdpbGwgZmxvdyB0aHJvdWdoIGFuZCBkZWxldGUgdGhlIHNlc3Npb24uXG4gICAgLy8gc3Vic2VxdWVudCBjYWxscyBzaG91bGQgYmUgaWdub3JlZC5cbiAgICBpZiAoIXRoaXMuc2Vzc2lvbnNbdHJhbnNhY3Rpb25JRF0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB3aGVuIHNlc3Npb24gZXhpc3RzIGJ1dCBpcyBub3QgaW5UcmFuc2FjdGlvbiBzb21ldGhpbmcgdW5leHBlY3RlZCBpcyBoYXBwZW5pbmcgdG8gdGhlIHNlc3Npb25cbiAgICBpZiAoIXRoaXMuc2Vzc2lvbnNbdHJhbnNhY3Rpb25JRF0/LmluVHJhbnNhY3Rpb24oKSkge1xuICAgICAgICB0aGlzLnBheWxvYWQubG9nZ2VyLndhcm4oJ3JvbGxiYWNrVHJhbnNhY3Rpb24gY2FsbGVkIHdoZW4gbm8gdHJhbnNhY3Rpb24gZXhpc3RzJyk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnNlc3Npb25zW3RyYW5zYWN0aW9uSURdO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHRoZSBmaXJzdCBjYWxsIGZvciByb2xsYmFjayBzaG91bGQgYmUgYWJvcnRlZCBhbmQgZGVsZXRlZCBjYXVzaW5nIGFueSBvdGhlciBvcGVyYXRpb25zIHdpdGggdGhlIHNhbWUgdHJhbnNhY3Rpb24gdG8gZmFpbFxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2Vzc2lvbnNbdHJhbnNhY3Rpb25JRF0/LmFib3J0VHJhbnNhY3Rpb24oKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXNzaW9uc1t0cmFuc2FjdGlvbklEXT8uZW5kU2Vzc2lvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gaWdub3JlIHRoZSBlcnJvciBhcyBpdCBpcyBsaWtlbHkgYSByYWNlIGNvbmRpdGlvbiBmcm9tIG11bHRpcGxlIGVycm9yc1xuICAgIH1cbiAgICBkZWxldGUgdGhpcy5zZXNzaW9uc1t0cmFuc2FjdGlvbklEXTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvbGxiYWNrVHJhbnNhY3Rpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/transactions/rollbackTransaction.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateGlobal.js":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateGlobal.js ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateGlobal: () => (/* binding */ updateGlobal)\n/* harmony export */ });\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\nconst updateGlobal = async function updateGlobal({ slug: globalSlug, data, options: optionsArgs = {}, req, returning, select }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug\n    });\n    const fields = globalConfig.fields;\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: globalConfig.flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data,\n        fields,\n        globalSlug,\n        operation: 'write'\n    });\n    if (returning === false) {\n        await Model.updateOne({\n            globalType: globalSlug\n        }, data, options);\n        return null;\n    }\n    const result = await Model.findOneAndUpdate({\n        globalType: globalSlug\n    }, data, options);\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_3__.transform)({\n        adapter: this,\n        data: result,\n        fields,\n        globalSlug,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=updateGlobal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cGRhdGVHbG9iYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUY7QUFDaEM7QUFDRTtBQUNGO0FBQzlDLG1EQUFtRCxpREFBaUQsMEJBQTBCO0FBQ3JJLFlBQVksc0JBQXNCLEVBQUUsa0VBQVM7QUFDN0M7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtHQUF5QjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsdUJBQXVCLG9FQUFVO0FBQ2pDO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlR2xvYmFsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QgfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzJztcbmltcG9ydCB7IGdldEdsb2JhbCB9IGZyb20gJy4vdXRpbGl0aWVzL2dldEVudGl0eS5qcyc7XG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZUdsb2JhbCA9IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUdsb2JhbCh7IHNsdWc6IGdsb2JhbFNsdWcsIGRhdGEsIG9wdGlvbnM6IG9wdGlvbnNBcmdzID0ge30sIHJlcSwgcmV0dXJuaW5nLCBzZWxlY3QgfSkge1xuICAgIGNvbnN0IHsgZ2xvYmFsQ29uZmlnLCBNb2RlbCB9ID0gZ2V0R2xvYmFsKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZ2xvYmFsU2x1Z1xuICAgIH0pO1xuICAgIGNvbnN0IGZpZWxkcyA9IGdsb2JhbENvbmZpZy5maWVsZHM7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgLi4ub3B0aW9uc0FyZ3MsXG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIG5ldzogdHJ1ZSxcbiAgICAgICAgcHJvamVjdGlvbjogYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCh7XG4gICAgICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICAgICAgZmllbGRzOiBnbG9iYWxDb25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICAgICAgc2VsZWN0XG4gICAgICAgIH0pLFxuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgZ2xvYmFsU2x1ZyxcbiAgICAgICAgb3BlcmF0aW9uOiAnd3JpdGUnXG4gICAgfSk7XG4gICAgaWYgKHJldHVybmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgYXdhaXQgTW9kZWwudXBkYXRlT25lKHtcbiAgICAgICAgICAgIGdsb2JhbFR5cGU6IGdsb2JhbFNsdWdcbiAgICAgICAgfSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBNb2RlbC5maW5kT25lQW5kVXBkYXRlKHtcbiAgICAgICAgZ2xvYmFsVHlwZTogZ2xvYmFsU2x1Z1xuICAgIH0sIGRhdGEsIG9wdGlvbnMpO1xuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGVHbG9iYWwuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateGlobal.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateGlobalVersion.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateGlobalVersion.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateGlobalVersion: () => (/* binding */ updateGlobalVersion)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildGlobalFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nasync function updateGlobalVersion({ id, global: globalSlug, locale, options: optionsArgs = {}, req, returning, select, versionData, where }) {\n    const { globalConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getGlobal)({\n        adapter: this,\n        globalSlug,\n        versions: true\n    });\n    const whereToUse = where || {\n        id: {\n            equals: id\n        }\n    };\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig);\n    const flattenedFields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionGlobalFields)(this.payload.config, globalConfig, true);\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_2__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_3__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__.buildQuery)({\n        adapter: this,\n        fields: flattenedFields,\n        locale,\n        where: whereToUse\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: versionData,\n        fields,\n        operation: 'write'\n    });\n    if (returning === false) {\n        await Model.updateOne(query, versionData, options);\n        return null;\n    }\n    const doc = await Model.findOneAndUpdate(query, versionData, options);\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: doc,\n        fields,\n        operation: 'read'\n    });\n    return doc;\n}\n\n//# sourceMappingURL=updateGlobalVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cGRhdGVHbG9iYWxWZXJzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBbUQ7QUFDRTtBQUNnQztBQUNoQztBQUNFO0FBQ0Y7QUFDOUMscUNBQXFDLHlEQUF5RCw4Q0FBOEM7QUFDbkosWUFBWSxzQkFBc0IsRUFBRSxrRUFBUztBQUM3QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpRUFBd0I7QUFDM0MsNEJBQTRCLGlFQUF3QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVCQUF1QixvRUFBVTtBQUNqQztBQUNBLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3VwZGF0ZUdsb2JhbFZlcnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzIH0gZnJvbSAncGF5bG9hZCc7XG5pbXBvcnQgeyBidWlsZFF1ZXJ5IH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCB9IGZyb20gJy4vdXRpbGl0aWVzL2J1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QuanMnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsIH0gZnJvbSAnLi91dGlsaXRpZXMvZ2V0RW50aXR5LmpzJztcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRTZXNzaW9uLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybSB9IGZyb20gJy4vdXRpbGl0aWVzL3RyYW5zZm9ybS5qcyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlR2xvYmFsVmVyc2lvbih7IGlkLCBnbG9iYWw6IGdsb2JhbFNsdWcsIGxvY2FsZSwgb3B0aW9uczogb3B0aW9uc0FyZ3MgPSB7fSwgcmVxLCByZXR1cm5pbmcsIHNlbGVjdCwgdmVyc2lvbkRhdGEsIHdoZXJlIH0pIHtcbiAgICBjb25zdCB7IGdsb2JhbENvbmZpZywgTW9kZWwgfSA9IGdldEdsb2JhbCh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGdsb2JhbFNsdWcsXG4gICAgICAgIHZlcnNpb25zOiB0cnVlXG4gICAgfSk7XG4gICAgY29uc3Qgd2hlcmVUb1VzZSA9IHdoZXJlIHx8IHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogaWRcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZmllbGRzID0gYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGdsb2JhbENvbmZpZyk7XG4gICAgY29uc3QgZmxhdHRlbmVkRmllbGRzID0gYnVpbGRWZXJzaW9uR2xvYmFsRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGdsb2JhbENvbmZpZywgdHJ1ZSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgLi4ub3B0aW9uc0FyZ3MsXG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIG5ldzogdHJ1ZSxcbiAgICAgICAgcHJvamVjdGlvbjogYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCh7XG4gICAgICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICAgICAgZmllbGRzOiBmbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICBzZWxlY3RcbiAgICAgICAgfSksXG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzOiBmbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgd2hlcmU6IHdoZXJlVG9Vc2VcbiAgICB9KTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiB2ZXJzaW9uRGF0YSxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICd3cml0ZSdcbiAgICB9KTtcbiAgICBpZiAocmV0dXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICBhd2FpdCBNb2RlbC51cGRhdGVPbmUocXVlcnksIHZlcnNpb25EYXRhLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGRvYyA9IGF3YWl0IE1vZGVsLmZpbmRPbmVBbmRVcGRhdGUocXVlcnksIHZlcnNpb25EYXRhLCBvcHRpb25zKTtcbiAgICBpZiAoIWRvYykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogZG9jLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIGRvYztcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRlR2xvYmFsVmVyc2lvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateGlobalVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateJobs.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateJobs.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateJobs: () => (/* binding */ updateJobs)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_handleError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/handleError.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nconst updateJobs = async function updateMany({ id, data, limit, req, returning, sort: sortArg, where: whereArg }) {\n    if (!data?.log?.length) {\n        delete data.log;\n    }\n    const where = id ? {\n        id: {\n            equals: id\n        }\n    } : whereArg;\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug: 'payload-jobs'\n    });\n    const sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_1__.buildSortParam)({\n        adapter: this,\n        config: this.payload.config,\n        fields: collectionConfig.flattenedFields,\n        sort: sortArg || collectionConfig.defaultSort,\n        timestamps: true\n    });\n    const options = {\n        lean: true,\n        new: true,\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    let query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        collectionSlug: collectionConfig.slug,\n        fields: collectionConfig.flattenedFields,\n        where\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data,\n        fields: collectionConfig.fields,\n        operation: 'write'\n    });\n    let result = [];\n    try {\n        if (id) {\n            if (returning === false) {\n                await Model.updateOne(query, data, options);\n                return null;\n            } else {\n                const doc = await Model.findOneAndUpdate(query, data, options);\n                result = doc ? [\n                    doc\n                ] : [];\n            }\n        } else {\n            if (typeof limit === 'number' && limit > 0) {\n                const documentsToUpdate = await Model.find(query, {}, {\n                    ...options,\n                    limit,\n                    projection: {\n                        _id: 1\n                    },\n                    sort\n                });\n                if (documentsToUpdate.length === 0) {\n                    return null;\n                }\n                query = {\n                    _id: {\n                        $in: documentsToUpdate.map((doc)=>doc._id)\n                    }\n                };\n            }\n            await Model.updateMany(query, data, options);\n            if (returning === false) {\n                return null;\n            }\n            result = await Model.find(query, {}, {\n                ...options,\n                sort\n            });\n        }\n    } catch (error) {\n        (0,_utilities_handleError_js__WEBPACK_IMPORTED_MODULE_5__.handleError)({\n            collection: collectionConfig.slug,\n            error,\n            req\n        });\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data: result,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=updateJobs.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cGRhdGVKb2JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBcUQ7QUFDUTtBQUNKO0FBQ0Y7QUFDRTtBQUNKO0FBQzlDLCtDQUErQyxpRUFBaUU7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sWUFBWSwwQkFBMEIsRUFBRSxzRUFBYTtBQUNyRDtBQUNBO0FBQ0EsS0FBSztBQUNMLGlCQUFpQiwwRUFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvRUFBVTtBQUNqQztBQUNBLHNCQUFzQixrRUFBVTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxvRUFBb0U7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLE1BQU07QUFDTixRQUFRLHNFQUFXO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3VwZGF0ZUpvYnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkU29ydFBhcmFtIH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgaGFuZGxlRXJyb3IgfSBmcm9tICcuL3V0aWxpdGllcy9oYW5kbGVFcnJvci5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZUpvYnMgPSBhc3luYyBmdW5jdGlvbiB1cGRhdGVNYW55KHsgaWQsIGRhdGEsIGxpbWl0LCByZXEsIHJldHVybmluZywgc29ydDogc29ydEFyZywgd2hlcmU6IHdoZXJlQXJnIH0pIHtcbiAgICBpZiAoIWRhdGE/LmxvZz8ubGVuZ3RoKSB7XG4gICAgICAgIGRlbGV0ZSBkYXRhLmxvZztcbiAgICB9XG4gICAgY29uc3Qgd2hlcmUgPSBpZCA/IHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogaWRcbiAgICAgICAgfVxuICAgIH0gOiB3aGVyZUFyZztcbiAgICBjb25zdCB7IGNvbGxlY3Rpb25Db25maWcsIE1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWc6ICdwYXlsb2FkLWpvYnMnXG4gICAgfSk7XG4gICAgY29uc3Qgc29ydCA9IGJ1aWxkU29ydFBhcmFtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29uZmlnOiB0aGlzLnBheWxvYWQuY29uZmlnLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICBzb3J0OiBzb3J0QXJnIHx8IGNvbGxlY3Rpb25Db25maWcuZGVmYXVsdFNvcnQsXG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBsZWFuOiB0cnVlLFxuICAgICAgICBuZXc6IHRydWUsXG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgbGV0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnOiBjb2xsZWN0aW9uQ29uZmlnLnNsdWcsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAnd3JpdGUnXG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIHRyeSB7XG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgaWYgKHJldHVybmluZyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBNb2RlbC51cGRhdGVPbmUocXVlcnksIGRhdGEsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkb2MgPSBhd2FpdCBNb2RlbC5maW5kT25lQW5kVXBkYXRlKHF1ZXJ5LCBkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MgPyBbXG4gICAgICAgICAgICAgICAgICAgIGRvY1xuICAgICAgICAgICAgICAgIF0gOiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGltaXQgPT09ICdudW1iZXInICYmIGxpbWl0ID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50c1RvVXBkYXRlID0gYXdhaXQgTW9kZWwuZmluZChxdWVyeSwge30sIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgbGltaXQsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogMVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzb3J0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50c1RvVXBkYXRlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcXVlcnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIF9pZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGluOiBkb2N1bWVudHNUb1VwZGF0ZS5tYXAoKGRvYyk9PmRvYy5faWQpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgTW9kZWwudXBkYXRlTWFueShxdWVyeSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAocmV0dXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgTW9kZWwuZmluZChxdWVyeSwge30sIHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIHNvcnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaGFuZGxlRXJyb3Ioe1xuICAgICAgICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbkNvbmZpZy5zbHVnLFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICByZXFcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRlSm9icy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateJobs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateMany.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateMany.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateMany: () => (/* binding */ updateMany)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/flattenWhereToOperators.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_handleError_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utilities/handleError.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\n\n\nconst updateMany = async function updateMany({ collection: collectionSlug, data, limit, locale, options: optionsArgs = {}, req, returning, select, sort: sortArg, where }) {\n    let hasNearConstraint = false;\n    if (where) {\n        const constraints = (0,payload__WEBPACK_IMPORTED_MODULE_0__.flattenWhereToOperators)(where);\n        hasNearConstraint = constraints.some((prop)=>Object.keys(prop).some((key)=>key === 'near'));\n    }\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    let sort;\n    if (!hasNearConstraint) {\n        sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__.buildSortParam)({\n            adapter: this,\n            config: this.payload.config,\n            fields: collectionConfig.flattenedFields,\n            locale,\n            sort: sortArg || collectionConfig.defaultSort,\n            timestamps: true\n        });\n    }\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_3__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: collectionConfig.flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_4__.getSession)(this, req)\n    };\n    let query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_5__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__.transform)({\n        adapter: this,\n        data,\n        fields: collectionConfig.fields,\n        operation: 'write'\n    });\n    try {\n        if (typeof limit === 'number' && limit > 0) {\n            const documentsToUpdate = await Model.find(query, {}, {\n                ...options,\n                limit,\n                projection: {\n                    _id: 1\n                },\n                sort\n            });\n            if (documentsToUpdate.length === 0) {\n                return null;\n            }\n            query = {\n                _id: {\n                    $in: documentsToUpdate.map((doc)=>doc._id)\n                }\n            };\n        }\n        await Model.updateMany(query, data, options);\n    } catch (error) {\n        (0,_utilities_handleError_js__WEBPACK_IMPORTED_MODULE_7__.handleError)({\n            collection: collectionSlug,\n            error,\n            req\n        });\n    }\n    if (returning === false) {\n        return null;\n    }\n    const result = await Model.find(query, {}, {\n        ...options,\n        sort\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_6__.transform)({\n        adapter: this,\n        data: result,\n        fields: collectionConfig.fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=updateMany.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cGRhdGVNYW55LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFrRDtBQUNHO0FBQ1E7QUFDd0I7QUFDNUI7QUFDRjtBQUNFO0FBQ0o7QUFDOUMsK0NBQStDLDBFQUEwRSxnREFBZ0Q7QUFDaEw7QUFDQTtBQUNBLDRCQUE0QixnRUFBdUI7QUFDbkQ7QUFDQTtBQUNBLFlBQVksMEJBQTBCLEVBQUUsc0VBQWE7QUFDckQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZUFBZSwwRUFBYztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVCQUF1QixvRUFBVTtBQUNqQztBQUNBLHNCQUFzQixrRUFBVTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLFFBQVEsc0VBQVc7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXBkYXRlTWFueS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkU29ydFBhcmFtIH0gZnJvbSAnLi9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLmpzJztcbmltcG9ydCB7IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QgfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgaGFuZGxlRXJyb3IgfSBmcm9tICcuL3V0aWxpdGllcy9oYW5kbGVFcnJvci5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZU1hbnkgPSBhc3luYyBmdW5jdGlvbiB1cGRhdGVNYW55KHsgY29sbGVjdGlvbjogY29sbGVjdGlvblNsdWcsIGRhdGEsIGxpbWl0LCBsb2NhbGUsIG9wdGlvbnM6IG9wdGlvbnNBcmdzID0ge30sIHJlcSwgcmV0dXJuaW5nLCBzZWxlY3QsIHNvcnQ6IHNvcnRBcmcsIHdoZXJlIH0pIHtcbiAgICBsZXQgaGFzTmVhckNvbnN0cmFpbnQgPSBmYWxzZTtcbiAgICBpZiAod2hlcmUpIHtcbiAgICAgICAgY29uc3QgY29uc3RyYWludHMgPSBmbGF0dGVuV2hlcmVUb09wZXJhdG9ycyh3aGVyZSk7XG4gICAgICAgIGhhc05lYXJDb25zdHJhaW50ID0gY29uc3RyYWludHMuc29tZSgocHJvcCk9Pk9iamVjdC5rZXlzKHByb3ApLnNvbWUoKGtleSk9PmtleSA9PT0gJ25lYXInKSk7XG4gICAgfVxuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1Z1xuICAgIH0pO1xuICAgIGxldCBzb3J0O1xuICAgIGlmICghaGFzTmVhckNvbnN0cmFpbnQpIHtcbiAgICAgICAgc29ydCA9IGJ1aWxkU29ydFBhcmFtKHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMucGF5bG9hZC5jb25maWcsXG4gICAgICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgc29ydDogc29ydEFyZyB8fCBjb2xsZWN0aW9uQ29uZmlnLmRlZmF1bHRTb3J0LFxuICAgICAgICAgICAgdGltZXN0YW1wczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgLi4ub3B0aW9uc0FyZ3MsXG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIG5ldzogdHJ1ZSxcbiAgICAgICAgcHJvamVjdGlvbjogYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCh7XG4gICAgICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICAgICAgZmllbGRzOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgIHNlbGVjdFxuICAgICAgICB9KSxcbiAgICAgICAgc2Vzc2lvbjogYXdhaXQgZ2V0U2Vzc2lvbih0aGlzLCByZXEpXG4gICAgfTtcbiAgICBsZXQgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgY29sbGVjdGlvblNsdWcsXG4gICAgICAgIGZpZWxkczogY29sbGVjdGlvbkNvbmZpZy5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgd2hlcmVcbiAgICB9KTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICd3cml0ZSdcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGxpbWl0ID09PSAnbnVtYmVyJyAmJiBsaW1pdCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50c1RvVXBkYXRlID0gYXdhaXQgTW9kZWwuZmluZChxdWVyeSwge30sIHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGxpbWl0LFxuICAgICAgICAgICAgICAgIHByb2plY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzb3J0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudHNUb1VwZGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHF1ZXJ5ID0ge1xuICAgICAgICAgICAgICAgIF9pZDoge1xuICAgICAgICAgICAgICAgICAgICAkaW46IGRvY3VtZW50c1RvVXBkYXRlLm1hcCgoZG9jKT0+ZG9jLl9pZClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IE1vZGVsLnVwZGF0ZU1hbnkocXVlcnksIGRhdGEsIG9wdGlvbnMpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICByZXFcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChyZXR1cm5pbmcgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBNb2RlbC5maW5kKHF1ZXJ5LCB7fSwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBzb3J0XG4gICAgfSk7XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICdyZWFkJ1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGVNYW55LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateMany.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateOne.js":
/*!*******************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateOne.js ***!
  \*******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateOne: () => (/* binding */ updateOne)\n/* harmony export */ });\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_handleError_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/handleError.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nconst updateOne = async function updateOne({ id, collection: collectionSlug, data, locale, options: optionsArgs = {}, req, returning, select, where: whereArg = {} }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug\n    });\n    const where = id ? {\n        id: {\n            equals: id\n        }\n    } : whereArg;\n    const fields = collectionConfig.fields;\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_1__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: collectionConfig.flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_2__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n        adapter: this,\n        collectionSlug,\n        fields: collectionConfig.flattenedFields,\n        locale,\n        where\n    });\n    let result;\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data,\n        fields,\n        operation: 'write'\n    });\n    try {\n        if (returning === false) {\n            await Model.updateOne(query, data, options);\n            return null;\n        } else {\n            result = await Model.findOneAndUpdate(query, data, options);\n        }\n    } catch (error) {\n        (0,_utilities_handleError_js__WEBPACK_IMPORTED_MODULE_5__.handleError)({\n            collection: collectionSlug,\n            error,\n            req\n        });\n    }\n    if (!result) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_4__.transform)({\n        adapter: this,\n        data: result,\n        fields,\n        operation: 'read'\n    });\n    return result;\n};\n\n//# sourceMappingURL=updateOne.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cGRhdGVPbmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxRDtBQUNnQztBQUM1QjtBQUNGO0FBQ0U7QUFDSjtBQUM5Qyw2Q0FBNkMsdUVBQXVFLGdEQUFnRDtBQUMzSyxZQUFZLDBCQUEwQixFQUFFLHNFQUFhO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVCQUF1QixvRUFBVTtBQUNqQztBQUNBLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSSxrRUFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxNQUFNO0FBQ04sUUFBUSxzRUFBVztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cGRhdGVPbmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QgfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgaGFuZGxlRXJyb3IgfSBmcm9tICcuL3V0aWxpdGllcy9oYW5kbGVFcnJvci5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tICcuL3V0aWxpdGllcy90cmFuc2Zvcm0uanMnO1xuZXhwb3J0IGNvbnN0IHVwZGF0ZU9uZSA9IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU9uZSh7IGlkLCBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgZGF0YSwgbG9jYWxlLCBvcHRpb25zOiBvcHRpb25zQXJncyA9IHt9LCByZXEsIHJldHVybmluZywgc2VsZWN0LCB3aGVyZTogd2hlcmVBcmcgPSB7fSB9KSB7XG4gICAgY29uc3QgeyBjb2xsZWN0aW9uQ29uZmlnLCBNb2RlbCB9ID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnXG4gICAgfSk7XG4gICAgY29uc3Qgd2hlcmUgPSBpZCA/IHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIGVxdWFsczogaWRcbiAgICAgICAgfVxuICAgIH0gOiB3aGVyZUFyZztcbiAgICBjb25zdCBmaWVsZHMgPSBjb2xsZWN0aW9uQ29uZmlnLmZpZWxkcztcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAuLi5vcHRpb25zQXJncyxcbiAgICAgICAgbGVhbjogdHJ1ZSxcbiAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICBwcm9qZWN0aW9uOiBidWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0KHtcbiAgICAgICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICAgICAgc2VsZWN0XG4gICAgICAgIH0pLFxuICAgICAgICBzZXNzaW9uOiBhd2FpdCBnZXRTZXNzaW9uKHRoaXMsIHJlcSlcbiAgICB9O1xuICAgIGNvbnN0IHF1ZXJ5ID0gYXdhaXQgYnVpbGRRdWVyeSh7XG4gICAgICAgIGFkYXB0ZXI6IHRoaXMsXG4gICAgICAgIGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICBmaWVsZHM6IGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHdoZXJlXG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdDtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3dyaXRlJ1xuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGlmIChyZXR1cm5pbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhd2FpdCBNb2RlbC51cGRhdGVPbmUocXVlcnksIGRhdGEsIG9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBNb2RlbC5maW5kT25lQW5kVXBkYXRlKHF1ZXJ5LCBkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25TbHVnLFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICByZXFcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgb3BlcmF0aW9uOiAncmVhZCdcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBkYXRlT25lLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateOne.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateVersion.js":
/*!***********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateVersion.js ***!
  \***********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateVersion: () => (/* binding */ updateVersion)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utilities/buildProjectionFromSelect.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\");\n/* harmony import */ var _utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utilities/getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n/* harmony import */ var _utilities_getSession_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities/getSession.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\");\n/* harmony import */ var _utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities/transform.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\");\n\n\n\n\n\n\nconst updateVersion = async function updateVersion({ id, collection: collectionSlug, locale, options: optionsArgs = {}, req, returning, select, versionData, where }) {\n    const { collectionConfig, Model } = (0,_utilities_getEntity_js__WEBPACK_IMPORTED_MODULE_0__.getCollection)({\n        adapter: this,\n        collectionSlug,\n        versions: true\n    });\n    const whereToUse = where || {\n        id: {\n            equals: id\n        }\n    };\n    const fields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionCollectionFields)(this.payload.config, collectionConfig);\n    const flattenedFields = (0,payload__WEBPACK_IMPORTED_MODULE_1__.buildVersionCollectionFields)(this.payload.config, collectionConfig, true);\n    const options = {\n        ...optionsArgs,\n        lean: true,\n        new: true,\n        projection: (0,_utilities_buildProjectionFromSelect_js__WEBPACK_IMPORTED_MODULE_2__.buildProjectionFromSelect)({\n            adapter: this,\n            fields: flattenedFields,\n            select\n        }),\n        session: await (0,_utilities_getSession_js__WEBPACK_IMPORTED_MODULE_3__.getSession)(this, req)\n    };\n    const query = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_4__.buildQuery)({\n        adapter: this,\n        fields: flattenedFields,\n        locale,\n        where: whereToUse\n    });\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: versionData,\n        fields,\n        operation: 'write'\n    });\n    if (returning === false) {\n        await Model.updateOne(query, versionData, options);\n        return null;\n    }\n    const doc = await Model.findOneAndUpdate(query, versionData, options);\n    if (!doc) {\n        return null;\n    }\n    (0,_utilities_transform_js__WEBPACK_IMPORTED_MODULE_5__.transform)({\n        adapter: this,\n        data: doc,\n        fields,\n        operation: 'read'\n    });\n    return doc;\n};\n\n//# sourceMappingURL=updateVersion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cGRhdGVWZXJzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBdUQ7QUFDRjtBQUNnQztBQUM1QjtBQUNGO0FBQ0Y7QUFDOUMscURBQXFELGlFQUFpRSw4Q0FBOEM7QUFDM0ssWUFBWSwwQkFBMEIsRUFBRSxzRUFBYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxRUFBNEI7QUFDL0MsNEJBQTRCLHFFQUE0QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrR0FBeUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVCQUF1QixvRUFBVTtBQUNqQztBQUNBLHdCQUF3QixrRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJLGtFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0VBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3VwZGF0ZVZlcnNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgYnVpbGRRdWVyeSB9IGZyb20gJy4vcXVlcmllcy9idWlsZFF1ZXJ5LmpzJztcbmltcG9ydCB7IGJ1aWxkUHJvamVjdGlvbkZyb21TZWxlY3QgfSBmcm9tICcuL3V0aWxpdGllcy9idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxpdGllcy9nZXRFbnRpdHkuanMnO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJy4vdXRpbGl0aWVzL2dldFNlc3Npb24uanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtIH0gZnJvbSAnLi91dGlsaXRpZXMvdHJhbnNmb3JtLmpzJztcbmV4cG9ydCBjb25zdCB1cGRhdGVWZXJzaW9uID0gYXN5bmMgZnVuY3Rpb24gdXBkYXRlVmVyc2lvbih7IGlkLCBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uU2x1ZywgbG9jYWxlLCBvcHRpb25zOiBvcHRpb25zQXJncyA9IHt9LCByZXEsIHJldHVybmluZywgc2VsZWN0LCB2ZXJzaW9uRGF0YSwgd2hlcmUgfSkge1xuICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZywgTW9kZWwgfSA9IGdldENvbGxlY3Rpb24oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBjb2xsZWN0aW9uU2x1ZyxcbiAgICAgICAgdmVyc2lvbnM6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCB3aGVyZVRvVXNlID0gd2hlcmUgfHwge1xuICAgICAgICBpZDoge1xuICAgICAgICAgICAgZXF1YWxzOiBpZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBmaWVsZHMgPSBidWlsZFZlcnNpb25Db2xsZWN0aW9uRmllbGRzKHRoaXMucGF5bG9hZC5jb25maWcsIGNvbGxlY3Rpb25Db25maWcpO1xuICAgIGNvbnN0IGZsYXR0ZW5lZEZpZWxkcyA9IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHModGhpcy5wYXlsb2FkLmNvbmZpZywgY29sbGVjdGlvbkNvbmZpZywgdHJ1ZSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgLi4ub3B0aW9uc0FyZ3MsXG4gICAgICAgIGxlYW46IHRydWUsXG4gICAgICAgIG5ldzogdHJ1ZSxcbiAgICAgICAgcHJvamVjdGlvbjogYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCh7XG4gICAgICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICAgICAgZmllbGRzOiBmbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICBzZWxlY3RcbiAgICAgICAgfSksXG4gICAgICAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24odGhpcywgcmVxKVxuICAgIH07XG4gICAgY29uc3QgcXVlcnkgPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZmllbGRzOiBmbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgd2hlcmU6IHdoZXJlVG9Vc2VcbiAgICB9KTtcbiAgICB0cmFuc2Zvcm0oe1xuICAgICAgICBhZGFwdGVyOiB0aGlzLFxuICAgICAgICBkYXRhOiB2ZXJzaW9uRGF0YSxcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBvcGVyYXRpb246ICd3cml0ZSdcbiAgICB9KTtcbiAgICBpZiAocmV0dXJuaW5nID09PSBmYWxzZSkge1xuICAgICAgICBhd2FpdCBNb2RlbC51cGRhdGVPbmUocXVlcnksIHZlcnNpb25EYXRhLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGRvYyA9IGF3YWl0IE1vZGVsLmZpbmRPbmVBbmRVcGRhdGUocXVlcnksIHZlcnNpb25EYXRhLCBvcHRpb25zKTtcbiAgICBpZiAoIWRvYykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJhbnNmb3JtKHtcbiAgICAgICAgYWRhcHRlcjogdGhpcyxcbiAgICAgICAgZGF0YTogZG9jLFxuICAgICAgICBmaWVsZHMsXG4gICAgICAgIG9wZXJhdGlvbjogJ3JlYWQnXG4gICAgfSk7XG4gICAgcmV0dXJuIGRvYztcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZVZlcnNpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/updateVersion.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/upsert.js":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/upsert.js ***!
  \****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   upsert: () => (/* binding */ upsert)\n/* harmony export */ });\nconst upsert = async function upsert({ collection, data, locale, req, returning, select, where }) {\n    return this.updateOne({\n        collection,\n        data,\n        locale,\n        options: {\n            upsert: true\n        },\n        req,\n        returning,\n        select,\n        where\n    });\n};\n\n//# sourceMappingURL=upsert.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91cHNlcnQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLHVDQUF1Qyx5REFBeUQ7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3Vwc2VydC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdXBzZXJ0ID0gYXN5bmMgZnVuY3Rpb24gdXBzZXJ0KHsgY29sbGVjdGlvbiwgZGF0YSwgbG9jYWxlLCByZXEsIHJldHVybmluZywgc2VsZWN0LCB3aGVyZSB9KSB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlT25lKHtcbiAgICAgICAgY29sbGVjdGlvbixcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICB1cHNlcnQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgcmVxLFxuICAgICAgICByZXR1cm5pbmcsXG4gICAgICAgIHNlbGVjdCxcbiAgICAgICAgd2hlcmVcbiAgICB9KTtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwc2VydC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/upsert.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aggregatePaginate: () => (/* binding */ aggregatePaginate)\n/* harmony export */ });\nconst aggregatePaginate = async ({ adapter, collation, joinAggregation, limit, Model, page, pagination, projection, query, session, sort, sortAggregation, useEstimatedCount })=>{\n    const aggregation = [\n        {\n            $match: query\n        }\n    ];\n    if (sortAggregation && sortAggregation.length > 0) {\n        for (const stage of sortAggregation){\n            aggregation.push(stage);\n        }\n    }\n    if (sort) {\n        const $sort = {};\n        Object.entries(sort).forEach(([key, value])=>{\n            $sort[key] = value === 'desc' ? -1 : 1;\n        });\n        aggregation.push({\n            $sort\n        });\n    }\n    if (page) {\n        aggregation.push({\n            $skip: (page - 1) * (limit ?? 0)\n        });\n    }\n    if (limit) {\n        aggregation.push({\n            $limit: limit\n        });\n    }\n    if (joinAggregation) {\n        for (const stage of joinAggregation){\n            aggregation.push(stage);\n        }\n    }\n    if (projection) {\n        aggregation.push({\n            $project: projection\n        });\n    }\n    let countPromise = Promise.resolve(null);\n    if (pagination !== false && limit) {\n        if (useEstimatedCount) {\n            countPromise = Model.estimatedDocumentCount(query);\n        } else {\n            const hint = adapter.disableIndexHints !== true ? {\n                _id: 1\n            } : undefined;\n            countPromise = Model.countDocuments(query, {\n                collation,\n                hint,\n                session\n            });\n        }\n    }\n    const [docs, countResult] = await Promise.all([\n        Model.aggregate(aggregation, {\n            collation,\n            session\n        }),\n        countPromise\n    ]);\n    const count = countResult === null ? docs.length : countResult;\n    const totalPages = pagination !== false && typeof limit === 'number' && limit !== 0 ? Math.ceil(count / limit) : 1;\n    const hasPrevPage = typeof page === 'number' && pagination !== false && page > 1;\n    const hasNextPage = typeof page === 'number' && pagination !== false && totalPages > page;\n    const pagingCounter = typeof page === 'number' && pagination !== false && typeof limit === 'number' ? (page - 1) * limit + 1 : 1;\n    const result = {\n        docs,\n        hasNextPage,\n        hasPrevPage,\n        limit: limit ?? 0,\n        nextPage: hasNextPage ? page + 1 : null,\n        page,\n        pagingCounter,\n        prevPage: hasPrevPage ? page - 1 : null,\n        totalDocs: count,\n        totalPages\n    };\n    return result;\n};\n\n//# sourceMappingURL=aggregatePaginate.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvYWdncmVnYXRlUGFnaW5hdGUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLG1DQUFtQywySUFBMkk7QUFDckw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2thZWwvRG9jdW1lbnRzL2dhbGFkcmltL3Jpc2UvY21zX3Jlc2VhcmNoL3BheWxvYWQvcmlzZS9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvYWdncmVnYXRlUGFnaW5hdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGFnZ3JlZ2F0ZVBhZ2luYXRlID0gYXN5bmMgKHsgYWRhcHRlciwgY29sbGF0aW9uLCBqb2luQWdncmVnYXRpb24sIGxpbWl0LCBNb2RlbCwgcGFnZSwgcGFnaW5hdGlvbiwgcHJvamVjdGlvbiwgcXVlcnksIHNlc3Npb24sIHNvcnQsIHNvcnRBZ2dyZWdhdGlvbiwgdXNlRXN0aW1hdGVkQ291bnQgfSk9PntcbiAgICBjb25zdCBhZ2dyZWdhdGlvbiA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgJG1hdGNoOiBxdWVyeVxuICAgICAgICB9XG4gICAgXTtcbiAgICBpZiAoc29ydEFnZ3JlZ2F0aW9uICYmIHNvcnRBZ2dyZWdhdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc3RhZ2Ugb2Ygc29ydEFnZ3JlZ2F0aW9uKXtcbiAgICAgICAgICAgIGFnZ3JlZ2F0aW9uLnB1c2goc3RhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzb3J0KSB7XG4gICAgICAgIGNvbnN0ICRzb3J0ID0ge307XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHNvcnQpLmZvckVhY2goKFtrZXksIHZhbHVlXSk9PntcbiAgICAgICAgICAgICRzb3J0W2tleV0gPSB2YWx1ZSA9PT0gJ2Rlc2MnID8gLTEgOiAxO1xuICAgICAgICB9KTtcbiAgICAgICAgYWdncmVnYXRpb24ucHVzaCh7XG4gICAgICAgICAgICAkc29ydFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHBhZ2UpIHtcbiAgICAgICAgYWdncmVnYXRpb24ucHVzaCh7XG4gICAgICAgICAgICAkc2tpcDogKHBhZ2UgLSAxKSAqIChsaW1pdCA/PyAwKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGxpbWl0KSB7XG4gICAgICAgIGFnZ3JlZ2F0aW9uLnB1c2goe1xuICAgICAgICAgICAgJGxpbWl0OiBsaW1pdFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGpvaW5BZ2dyZWdhdGlvbikge1xuICAgICAgICBmb3IgKGNvbnN0IHN0YWdlIG9mIGpvaW5BZ2dyZWdhdGlvbil7XG4gICAgICAgICAgICBhZ2dyZWdhdGlvbi5wdXNoKHN0YWdlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvamVjdGlvbikge1xuICAgICAgICBhZ2dyZWdhdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICRwcm9qZWN0OiBwcm9qZWN0aW9uXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgY291bnRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIGlmIChwYWdpbmF0aW9uICE9PSBmYWxzZSAmJiBsaW1pdCkge1xuICAgICAgICBpZiAodXNlRXN0aW1hdGVkQ291bnQpIHtcbiAgICAgICAgICAgIGNvdW50UHJvbWlzZSA9IE1vZGVsLmVzdGltYXRlZERvY3VtZW50Q291bnQocXVlcnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaGludCA9IGFkYXB0ZXIuZGlzYWJsZUluZGV4SGludHMgIT09IHRydWUgPyB7XG4gICAgICAgICAgICAgICAgX2lkOiAxXG4gICAgICAgICAgICB9IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY291bnRQcm9taXNlID0gTW9kZWwuY291bnREb2N1bWVudHMocXVlcnksIHtcbiAgICAgICAgICAgICAgICBjb2xsYXRpb24sXG4gICAgICAgICAgICAgICAgaGludCxcbiAgICAgICAgICAgICAgICBzZXNzaW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBbZG9jcywgY291bnRSZXN1bHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBNb2RlbC5hZ2dyZWdhdGUoYWdncmVnYXRpb24sIHtcbiAgICAgICAgICAgIGNvbGxhdGlvbixcbiAgICAgICAgICAgIHNlc3Npb25cbiAgICAgICAgfSksXG4gICAgICAgIGNvdW50UHJvbWlzZVxuICAgIF0pO1xuICAgIGNvbnN0IGNvdW50ID0gY291bnRSZXN1bHQgPT09IG51bGwgPyBkb2NzLmxlbmd0aCA6IGNvdW50UmVzdWx0O1xuICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBwYWdpbmF0aW9uICE9PSBmYWxzZSAmJiB0eXBlb2YgbGltaXQgPT09ICdudW1iZXInICYmIGxpbWl0ICE9PSAwID8gTWF0aC5jZWlsKGNvdW50IC8gbGltaXQpIDogMTtcbiAgICBjb25zdCBoYXNQcmV2UGFnZSA9IHR5cGVvZiBwYWdlID09PSAnbnVtYmVyJyAmJiBwYWdpbmF0aW9uICE9PSBmYWxzZSAmJiBwYWdlID4gMTtcbiAgICBjb25zdCBoYXNOZXh0UGFnZSA9IHR5cGVvZiBwYWdlID09PSAnbnVtYmVyJyAmJiBwYWdpbmF0aW9uICE9PSBmYWxzZSAmJiB0b3RhbFBhZ2VzID4gcGFnZTtcbiAgICBjb25zdCBwYWdpbmdDb3VudGVyID0gdHlwZW9mIHBhZ2UgPT09ICdudW1iZXInICYmIHBhZ2luYXRpb24gIT09IGZhbHNlICYmIHR5cGVvZiBsaW1pdCA9PT0gJ251bWJlcicgPyAocGFnZSAtIDEpICogbGltaXQgKyAxIDogMTtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIGRvY3MsXG4gICAgICAgIGhhc05leHRQYWdlLFxuICAgICAgICBoYXNQcmV2UGFnZSxcbiAgICAgICAgbGltaXQ6IGxpbWl0ID8/IDAsXG4gICAgICAgIG5leHRQYWdlOiBoYXNOZXh0UGFnZSA/IHBhZ2UgKyAxIDogbnVsbCxcbiAgICAgICAgcGFnZSxcbiAgICAgICAgcGFnaW5nQ291bnRlcixcbiAgICAgICAgcHJldlBhZ2U6IGhhc1ByZXZQYWdlID8gcGFnZSAtIDEgOiBudWxsLFxuICAgICAgICB0b3RhbERvY3M6IGNvdW50LFxuICAgICAgICB0b3RhbFBhZ2VzXG4gICAgfTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWdncmVnYXRlUGFnaW5hdGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/aggregatePaginate.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildJoinAggregation: () => (/* binding */ buildJoinAggregation)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/buildCollectionFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/drafts/getQueryDraftsSort.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/database/combineQueries.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/versions/drafts/appendVersionToQueryKey.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/fields/config/types.js\");\n/* harmony import */ var _queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../queries/buildQuery.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildQuery.js\");\n/* harmony import */ var _queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../queries/buildSortParam.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/queries/buildSortParam.js\");\n/* harmony import */ var _getEntity_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getEntity.js */ \"(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\");\n\n\n\n\n\nconst buildJoinAggregation = async ({ adapter, collection, collectionConfig, draftsEnabled, joins, locale, projection, versions })=>{\n    if (Object.keys(collectionConfig.joins).length === 0 && collectionConfig.polymorphicJoins.length == 0 || joins === false) {\n        return;\n    }\n    const joinConfig = adapter.payload.collections[collection]?.config?.joins;\n    if (!joinConfig) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Could not retrieve sanitized join config for ${collection}.`);\n    }\n    const aggregate = [];\n    const polymorphicJoinsConfig = adapter.payload.collections[collection]?.config?.polymorphicJoins;\n    if (!polymorphicJoinsConfig) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Could not retrieve sanitized polymorphic joins config for ${collection}.`);\n    }\n    for (const join of polymorphicJoinsConfig){\n        if (projection && !projection[join.joinPath]) {\n            continue;\n        }\n        if (joins?.[join.joinPath] === false) {\n            continue;\n        }\n        const { count = false, limit: limitJoin = join.field.defaultLimit ?? 10, page, sort: sortJoin = join.field.defaultSort || collectionConfig.defaultSort, where: whereJoin = {} } = joins?.[join.joinPath] || {};\n        const aggregatedFields = [];\n        for (const collectionSlug of join.field.collection){\n            const { collectionConfig } = (0,_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n                adapter,\n                collectionSlug\n            });\n            for (const field of collectionConfig.flattenedFields){\n                if (!aggregatedFields.some((eachField)=>eachField.name === field.name)) {\n                    aggregatedFields.push(field);\n                }\n            }\n        }\n        const sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__.buildSortParam)({\n            adapter,\n            config: adapter.payload.config,\n            fields: aggregatedFields,\n            locale,\n            sort: sortJoin,\n            timestamps: true\n        });\n        const $match = await (0,_queries_buildQuery_js__WEBPACK_IMPORTED_MODULE_3__.buildQuery)({\n            adapter,\n            fields: aggregatedFields,\n            locale,\n            where: whereJoin\n        });\n        const sortProperty = Object.keys(sort)[0]// assert because buildSortParam always returns at least 1 key.\n        ;\n        const sortDirection = sort[sortProperty] === 'asc' ? 1 : -1;\n        const projectSort = sortProperty !== '_id' && sortProperty !== 'relationTo';\n        const aliases = [];\n        const as = join.joinPath;\n        for (const collectionSlug of join.field.collection){\n            const alias = `${as}.docs.${collectionSlug}`;\n            aliases.push(alias);\n            const basePipeline = [\n                {\n                    $addFields: {\n                        relationTo: {\n                            $literal: collectionSlug\n                        }\n                    }\n                },\n                {\n                    $match: {\n                        $and: [\n                            {\n                                $expr: {\n                                    $eq: [\n                                        `$${join.field.on}`,\n                                        '$$root_id_'\n                                    ]\n                                }\n                            },\n                            $match\n                        ]\n                    }\n                }\n            ];\n            const { Model: JoinModel } = (0,_getEntity_js__WEBPACK_IMPORTED_MODULE_1__.getCollection)({\n                adapter,\n                collectionSlug\n            });\n            aggregate.push({\n                $lookup: {\n                    as: alias,\n                    from: JoinModel.collection.name,\n                    let: {\n                        root_id_: '$_id'\n                    },\n                    pipeline: [\n                        ...basePipeline,\n                        {\n                            $sort: {\n                                [sortProperty]: sortDirection\n                            }\n                        },\n                        {\n                            // Unfortunately, we can't use $skip here because we can lose data, instead we do $slice then\n                            $limit: page ? page * limitJoin : limitJoin\n                        },\n                        {\n                            $project: {\n                                value: '$_id',\n                                ...projectSort && {\n                                    [sortProperty]: 1\n                                },\n                                relationTo: 1\n                            }\n                        }\n                    ]\n                }\n            });\n            if (count) {\n                aggregate.push({\n                    $lookup: {\n                        as: `${as}.totalDocs.${alias}`,\n                        from: JoinModel.collection.name,\n                        let: {\n                            root_id_: '$_id'\n                        },\n                        pipeline: [\n                            ...basePipeline,\n                            {\n                                $count: 'result'\n                            }\n                        ]\n                    }\n                });\n            }\n        }\n        aggregate.push({\n            $addFields: {\n                [`${as}.docs`]: {\n                    $concatArrays: aliases.map((alias)=>`$${alias}`)\n                }\n            }\n        });\n        if (count) {\n            aggregate.push({\n                $addFields: {\n                    [`${as}.totalDocs`]: {\n                        $add: aliases.map((alias)=>({\n                                $ifNull: [\n                                    {\n                                        $first: `$${as}.totalDocs.${alias}.result`\n                                    },\n                                    0\n                                ]\n                            }))\n                    }\n                }\n            });\n        }\n        aggregate.push({\n            $set: {\n                [`${as}.docs`]: {\n                    $sortArray: {\n                        input: `$${as}.docs`,\n                        sortBy: {\n                            [sortProperty]: sortDirection\n                        }\n                    }\n                }\n            }\n        });\n        const sliceValue = page ? [\n            (page - 1) * limitJoin,\n            limitJoin\n        ] : [\n            limitJoin\n        ];\n        aggregate.push({\n            $addFields: {\n                [`${as}.hasNextPage`]: {\n                    $gt: [\n                        {\n                            $size: `$${as}.docs`\n                        },\n                        limitJoin || Number.MAX_VALUE\n                    ]\n                }\n            }\n        });\n        aggregate.push({\n            $set: {\n                [`${as}.docs`]: {\n                    $slice: [\n                        `$${as}.docs`,\n                        ...sliceValue\n                    ]\n                }\n            }\n        });\n    }\n    for (const slug of Object.keys(joinConfig)){\n        const joinsList = joinConfig[slug];\n        if (!joinsList) {\n            throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Failed to retrieve array of joins for ${slug} in collectio ${collection}`);\n        }\n        for (const join of joinsList){\n            if (projection && !projection[join.joinPath]) {\n                continue;\n            }\n            if (joins?.[join.joinPath] === false) {\n                continue;\n            }\n            const collectionConfig = adapter.payload.collections[join.field.collection]?.config;\n            if (!collectionConfig) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Collection config for ${join.field.collection.toString()} was not found`);\n            }\n            let JoinModel;\n            const useDrafts = (draftsEnabled || versions) && Boolean(collectionConfig.versions.drafts);\n            if (useDrafts) {\n                JoinModel = adapter.versions[collectionConfig.slug];\n            } else {\n                JoinModel = adapter.collections[collectionConfig.slug];\n            }\n            if (!JoinModel) {\n                throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Join Model was not found for ${collectionConfig.slug}`);\n            }\n            const { count, limit: limitJoin = join.field.defaultLimit ?? 10, page, sort: sortJoin = join.field.defaultSort || collectionConfig.defaultSort, where: whereJoin = {} } = joins?.[join.joinPath] || {};\n            if (Array.isArray(join.field.collection)) {\n                throw new Error('Unreachable');\n            }\n            const fields = useDrafts ? (0,payload__WEBPACK_IMPORTED_MODULE_4__.buildVersionCollectionFields)(adapter.payload.config, collectionConfig, true) : collectionConfig.flattenedFields;\n            const sort = (0,_queries_buildSortParam_js__WEBPACK_IMPORTED_MODULE_2__.buildSortParam)({\n                adapter,\n                config: adapter.payload.config,\n                fields,\n                locale,\n                sort: useDrafts ? (0,payload__WEBPACK_IMPORTED_MODULE_5__.getQueryDraftsSort)({\n                    collectionConfig,\n                    sort: sortJoin\n                }) : sortJoin,\n                timestamps: true\n            });\n            const sortProperty = Object.keys(sort)[0];\n            const sortDirection = sort[sortProperty] === 'asc' ? 1 : -1;\n            const $match = await JoinModel.buildQuery({\n                locale,\n                payload: adapter.payload,\n                where: useDrafts ? (0,payload__WEBPACK_IMPORTED_MODULE_6__.combineQueries)((0,payload__WEBPACK_IMPORTED_MODULE_7__.appendVersionToQueryKey)(whereJoin), {\n                    latest: {\n                        equals: true\n                    }\n                }) : whereJoin\n            });\n            const pipeline = [\n                {\n                    $match\n                },\n                {\n                    $sort: {\n                        [sortProperty]: sortDirection\n                    }\n                }\n            ];\n            if (page) {\n                pipeline.push({\n                    $skip: (page - 1) * limitJoin\n                });\n            }\n            if (limitJoin > 0) {\n                pipeline.push({\n                    $limit: limitJoin + 1\n                });\n            }\n            let polymorphicSuffix = '';\n            if (Array.isArray(join.targetField.relationTo)) {\n                polymorphicSuffix = '.value';\n            }\n            const addTotalDocsAggregation = (as, foreignField)=>aggregate.push({\n                    $lookup: {\n                        as: `${as}.totalDocs`,\n                        foreignField,\n                        from: JoinModel.collection.name,\n                        localField: versions ? 'parent' : '_id',\n                        pipeline: [\n                            {\n                                $match\n                            },\n                            {\n                                $count: 'result'\n                            }\n                        ]\n                    }\n                }, {\n                    $addFields: {\n                        [`${as}.totalDocs`]: {\n                            $ifNull: [\n                                {\n                                    $first: `$${as}.totalDocs.result`\n                                },\n                                0\n                            ]\n                        }\n                    }\n                });\n            let foreignFieldPrefix = '';\n            if (useDrafts) {\n                foreignFieldPrefix = 'version.';\n            }\n            if (adapter.payload.config.localization && locale === 'all') {\n                adapter.payload.config.localization.localeCodes.forEach((code)=>{\n                    const as = `${versions ? `version.${join.joinPath}` : join.joinPath}${code}`;\n                    aggregate.push({\n                        $lookup: {\n                            as: `${as}.docs`,\n                            foreignField: `${foreignFieldPrefix}${join.field.on}${code}${polymorphicSuffix}`,\n                            from: JoinModel.collection.name,\n                            localField: versions ? 'parent' : '_id',\n                            pipeline\n                        }\n                    }, {\n                        $addFields: {\n                            [`${as}.docs`]: {\n                                $map: {\n                                    as: 'doc',\n                                    in: useDrafts ? `$$doc.parent` : '$$doc._id',\n                                    input: `$${as}.docs`\n                                }\n                            },\n                            [`${as}.hasNextPage`]: limitJoin ? {\n                                $gt: [\n                                    {\n                                        $size: `$${as}.docs`\n                                    },\n                                    limitJoin\n                                ]\n                            } : false\n                        }\n                    });\n                    if (limitJoin > 0) {\n                        aggregate.push({\n                            $addFields: {\n                                [`${as}.docs`]: {\n                                    $slice: [\n                                        `$${as}.docs`,\n                                        limitJoin\n                                    ]\n                                }\n                            }\n                        });\n                    }\n                    if (count) {\n                        addTotalDocsAggregation(as, `${foreignFieldPrefix}${join.field.on}${code}${polymorphicSuffix}`);\n                    }\n                });\n            } else {\n                const localeSuffix = (0,payload_shared__WEBPACK_IMPORTED_MODULE_8__.fieldShouldBeLocalized)({\n                    field: join.field,\n                    parentIsLocalized: join.parentIsLocalized\n                }) && adapter.payload.config.localization && locale ? `.${locale}` : '';\n                const as = `${versions ? `version.${join.joinPath}` : join.joinPath}${localeSuffix}`;\n                let foreignField;\n                if (join.getForeignPath) {\n                    foreignField = `${join.getForeignPath({\n                        locale\n                    })}${polymorphicSuffix}`;\n                } else {\n                    foreignField = `${join.field.on}${polymorphicSuffix}`;\n                }\n                aggregate.push({\n                    $lookup: {\n                        as: `${as}.docs`,\n                        foreignField: `${foreignFieldPrefix}${foreignField}`,\n                        from: JoinModel.collection.name,\n                        localField: versions ? 'parent' : '_id',\n                        pipeline\n                    }\n                }, {\n                    $addFields: {\n                        [`${as}.docs`]: {\n                            $map: {\n                                as: 'doc',\n                                in: useDrafts ? `$$doc.parent` : '$$doc._id',\n                                input: `$${as}.docs`\n                            }\n                        },\n                        [`${as}.hasNextPage`]: {\n                            $gt: [\n                                {\n                                    $size: `$${as}.docs`\n                                },\n                                limitJoin || Number.MAX_VALUE\n                            ]\n                        }\n                    }\n                });\n                if (count) {\n                    addTotalDocsAggregation(as, `${foreignFieldPrefix}${foreignField}`);\n                }\n                if (limitJoin > 0) {\n                    aggregate.push({\n                        $addFields: {\n                            [`${as}.docs`]: {\n                                $slice: [\n                                    `$${as}.docs`,\n                                    limitJoin\n                                ]\n                            }\n                        }\n                    });\n                }\n            }\n        }\n    }\n    return aggregate;\n};\n\n//# sourceMappingURL=buildJoinAggregation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvYnVpbGRKb2luQWdncmVnYXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUE4SDtBQUN0RTtBQUNGO0FBQ1E7QUFDZjtBQUN4QyxzQ0FBc0MsMkZBQTJGO0FBQ3hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNkNBQVEsaURBQWlELFdBQVc7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNkNBQVEsOERBQThELFdBQVc7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3S0FBd0s7QUFDeEw7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUIsRUFBRSw0REFBYTtBQUN0RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwwRUFBYztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsNkJBQTZCLGtFQUFVO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEdBQUcsUUFBUSxlQUFlO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGNBQWM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CLEVBQUUsNERBQWE7QUFDdEQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLEdBQUcsYUFBYSxNQUFNO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixHQUFHO0FBQ3ZCLDREQUE0RCxNQUFNO0FBQ2xFO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLEdBQUc7QUFDM0I7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELEdBQUcsYUFBYSxNQUFNO0FBQzFFLHFDQUFxQztBQUNyQztBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLEdBQUc7QUFDdkI7QUFDQSxtQ0FBbUMsR0FBRztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixHQUFHO0FBQ3ZCO0FBQ0E7QUFDQSx1Q0FBdUMsR0FBRztBQUMxQyx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9CQUFvQixHQUFHO0FBQ3ZCO0FBQ0EsNEJBQTRCLEdBQUc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQVEsMENBQTBDLE1BQU0sZUFBZSxXQUFXO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZDQUFRLDBCQUEwQixrQ0FBa0M7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsNkNBQVEsaUNBQWlDLHNCQUFzQjtBQUN6RjtBQUNBLG9CQUFvQixnS0FBZ0s7QUFDcEw7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHFFQUE0QjtBQUNuRSx5QkFBeUIsMEVBQWM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkRBQWtCO0FBQ3BEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx1REFBYyxDQUFDLGdFQUF1QjtBQUN6RTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsR0FBRztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDRCQUE0QixHQUFHO0FBQy9CO0FBQ0E7QUFDQSxnREFBZ0QsR0FBRztBQUNuRCxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHNCQUFzQixjQUFjLGtCQUFrQixFQUFFLEtBQUs7QUFDL0Y7QUFDQTtBQUNBLG1DQUFtQyxHQUFHO0FBQ3RDLDZDQUE2QyxtQkFBbUIsRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFLGtCQUFrQjtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGdDQUFnQyxHQUFHO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxHQUFHO0FBQ2xEO0FBQ0EsNkJBQTZCO0FBQzdCLGdDQUFnQyxHQUFHO0FBQ25DO0FBQ0E7QUFDQSxtREFBbUQsR0FBRztBQUN0RCxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsR0FBRztBQUN2QztBQUNBLDRDQUE0QyxHQUFHO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx1REFBdUQsbUJBQW1CLEVBQUUsY0FBYyxFQUFFLEtBQUssRUFBRSxrQkFBa0I7QUFDckg7QUFDQSxpQkFBaUI7QUFDakIsY0FBYztBQUNkLHFDQUFxQyxzRUFBc0I7QUFDM0Q7QUFDQTtBQUNBLGlCQUFpQix5REFBeUQsT0FBTztBQUNqRiw4QkFBOEIsc0JBQXNCLGNBQWMsa0JBQWtCLEVBQUUsYUFBYTtBQUNuRztBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0EscUJBQXFCLEVBQUUsRUFBRSxrQkFBa0I7QUFDM0Msa0JBQWtCO0FBQ2xCLHNDQUFzQyxjQUFjLEVBQUUsa0JBQWtCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixHQUFHO0FBQ2xDLHlDQUF5QyxtQkFBbUIsRUFBRSxhQUFhO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsNEJBQTRCLEdBQUc7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLEdBQUc7QUFDOUM7QUFDQSx5QkFBeUI7QUFDekIsNEJBQTRCLEdBQUc7QUFDL0I7QUFDQTtBQUNBLCtDQUErQyxHQUFHO0FBQ2xELGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLG1EQUFtRCxtQkFBbUIsRUFBRSxhQUFhO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLEdBQUc7QUFDbkM7QUFDQSx3Q0FBd0MsR0FBRztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2J1aWxkSm9pbkFnZ3JlZ2F0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yLCBhcHBlbmRWZXJzaW9uVG9RdWVyeUtleSwgYnVpbGRWZXJzaW9uQ29sbGVjdGlvbkZpZWxkcywgY29tYmluZVF1ZXJpZXMsIGdldFF1ZXJ5RHJhZnRzU29ydCB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgZmllbGRTaG91bGRCZUxvY2FsaXplZCB9IGZyb20gJ3BheWxvYWQvc2hhcmVkJztcbmltcG9ydCB7IGJ1aWxkUXVlcnkgfSBmcm9tICcuLi9xdWVyaWVzL2J1aWxkUXVlcnkuanMnO1xuaW1wb3J0IHsgYnVpbGRTb3J0UGFyYW0gfSBmcm9tICcuLi9xdWVyaWVzL2J1aWxkU29ydFBhcmFtLmpzJztcbmltcG9ydCB7IGdldENvbGxlY3Rpb24gfSBmcm9tICcuL2dldEVudGl0eS5qcyc7XG5leHBvcnQgY29uc3QgYnVpbGRKb2luQWdncmVnYXRpb24gPSBhc3luYyAoeyBhZGFwdGVyLCBjb2xsZWN0aW9uLCBjb2xsZWN0aW9uQ29uZmlnLCBkcmFmdHNFbmFibGVkLCBqb2lucywgbG9jYWxlLCBwcm9qZWN0aW9uLCB2ZXJzaW9ucyB9KT0+e1xuICAgIGlmIChPYmplY3Qua2V5cyhjb2xsZWN0aW9uQ29uZmlnLmpvaW5zKS5sZW5ndGggPT09IDAgJiYgY29sbGVjdGlvbkNvbmZpZy5wb2x5bW9ycGhpY0pvaW5zLmxlbmd0aCA9PSAwIHx8IGpvaW5zID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGpvaW5Db25maWcgPSBhZGFwdGVyLnBheWxvYWQuY29sbGVjdGlvbnNbY29sbGVjdGlvbl0/LmNvbmZpZz8uam9pbnM7XG4gICAgaWYgKCFqb2luQ29uZmlnKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihgQ291bGQgbm90IHJldHJpZXZlIHNhbml0aXplZCBqb2luIGNvbmZpZyBmb3IgJHtjb2xsZWN0aW9ufS5gKTtcbiAgICB9XG4gICAgY29uc3QgYWdncmVnYXRlID0gW107XG4gICAgY29uc3QgcG9seW1vcnBoaWNKb2luc0NvbmZpZyA9IGFkYXB0ZXIucGF5bG9hZC5jb2xsZWN0aW9uc1tjb2xsZWN0aW9uXT8uY29uZmlnPy5wb2x5bW9ycGhpY0pvaW5zO1xuICAgIGlmICghcG9seW1vcnBoaWNKb2luc0NvbmZpZykge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYENvdWxkIG5vdCByZXRyaWV2ZSBzYW5pdGl6ZWQgcG9seW1vcnBoaWMgam9pbnMgY29uZmlnIGZvciAke2NvbGxlY3Rpb259LmApO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGpvaW4gb2YgcG9seW1vcnBoaWNKb2luc0NvbmZpZyl7XG4gICAgICAgIGlmIChwcm9qZWN0aW9uICYmICFwcm9qZWN0aW9uW2pvaW4uam9pblBhdGhdKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoam9pbnM/Lltqb2luLmpvaW5QYXRoXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgY291bnQgPSBmYWxzZSwgbGltaXQ6IGxpbWl0Sm9pbiA9IGpvaW4uZmllbGQuZGVmYXVsdExpbWl0ID8/IDEwLCBwYWdlLCBzb3J0OiBzb3J0Sm9pbiA9IGpvaW4uZmllbGQuZGVmYXVsdFNvcnQgfHwgY29sbGVjdGlvbkNvbmZpZy5kZWZhdWx0U29ydCwgd2hlcmU6IHdoZXJlSm9pbiA9IHt9IH0gPSBqb2lucz8uW2pvaW4uam9pblBhdGhdIHx8IHt9O1xuICAgICAgICBjb25zdCBhZ2dyZWdhdGVkRmllbGRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgY29sbGVjdGlvblNsdWcgb2Ygam9pbi5maWVsZC5jb2xsZWN0aW9uKXtcbiAgICAgICAgICAgIGNvbnN0IHsgY29sbGVjdGlvbkNvbmZpZyB9ID0gZ2V0Q29sbGVjdGlvbih7XG4gICAgICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uU2x1Z1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGNvbGxlY3Rpb25Db25maWcuZmxhdHRlbmVkRmllbGRzKXtcbiAgICAgICAgICAgICAgICBpZiAoIWFnZ3JlZ2F0ZWRGaWVsZHMuc29tZSgoZWFjaEZpZWxkKT0+ZWFjaEZpZWxkLm5hbWUgPT09IGZpZWxkLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRGaWVsZHMucHVzaChmaWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNvcnQgPSBidWlsZFNvcnRQYXJhbSh7XG4gICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgY29uZmlnOiBhZGFwdGVyLnBheWxvYWQuY29uZmlnLFxuICAgICAgICAgICAgZmllbGRzOiBhZ2dyZWdhdGVkRmllbGRzLFxuICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgc29ydDogc29ydEpvaW4sXG4gICAgICAgICAgICB0aW1lc3RhbXBzOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCAkbWF0Y2ggPSBhd2FpdCBidWlsZFF1ZXJ5KHtcbiAgICAgICAgICAgIGFkYXB0ZXIsXG4gICAgICAgICAgICBmaWVsZHM6IGFnZ3JlZ2F0ZWRGaWVsZHMsXG4gICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICB3aGVyZTogd2hlcmVKb2luXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzb3J0UHJvcGVydHkgPSBPYmplY3Qua2V5cyhzb3J0KVswXS8vIGFzc2VydCBiZWNhdXNlIGJ1aWxkU29ydFBhcmFtIGFsd2F5cyByZXR1cm5zIGF0IGxlYXN0IDEga2V5LlxuICAgICAgICA7XG4gICAgICAgIGNvbnN0IHNvcnREaXJlY3Rpb24gPSBzb3J0W3NvcnRQcm9wZXJ0eV0gPT09ICdhc2MnID8gMSA6IC0xO1xuICAgICAgICBjb25zdCBwcm9qZWN0U29ydCA9IHNvcnRQcm9wZXJ0eSAhPT0gJ19pZCcgJiYgc29ydFByb3BlcnR5ICE9PSAncmVsYXRpb25Ubyc7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBbXTtcbiAgICAgICAgY29uc3QgYXMgPSBqb2luLmpvaW5QYXRoO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb25TbHVnIG9mIGpvaW4uZmllbGQuY29sbGVjdGlvbil7XG4gICAgICAgICAgICBjb25zdCBhbGlhcyA9IGAke2FzfS5kb2NzLiR7Y29sbGVjdGlvblNsdWd9YDtcbiAgICAgICAgICAgIGFsaWFzZXMucHVzaChhbGlhcyk7XG4gICAgICAgICAgICBjb25zdCBiYXNlUGlwZWxpbmUgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkYWRkRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxhdGlvblRvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpdGVyYWw6IGNvbGxlY3Rpb25TbHVnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJG1hdGNoOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkYW5kOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXhwcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVxOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCQke2pvaW4uZmllbGQub259YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJCRyb290X2lkXydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgY29uc3QgeyBNb2RlbDogSm9pbk1vZGVsIH0gPSBnZXRDb2xsZWN0aW9uKHtcbiAgICAgICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25TbHVnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFnZ3JlZ2F0ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAkbG9va3VwOiB7XG4gICAgICAgICAgICAgICAgICAgIGFzOiBhbGlhcyxcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogSm9pbk1vZGVsLmNvbGxlY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbGV0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb290X2lkXzogJyRfaWQnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5iYXNlUGlwZWxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNvcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NvcnRQcm9wZXJ0eV06IHNvcnREaXJlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIHdlIGNhbid0IHVzZSAkc2tpcCBoZXJlIGJlY2F1c2Ugd2UgY2FuIGxvc2UgZGF0YSwgaW5zdGVhZCB3ZSBkbyAkc2xpY2UgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaW1pdDogcGFnZSA/IHBhZ2UgKiBsaW1pdEpvaW4gOiBsaW1pdEpvaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHByb2plY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICckX2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvamVjdFNvcnQgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NvcnRQcm9wZXJ0eV06IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRpb25UbzogMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvdW50KSB7XG4gICAgICAgICAgICAgICAgYWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAkbG9va3VwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhczogYCR7YXN9LnRvdGFsRG9jcy4ke2FsaWFzfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBKb2luTW9kZWwuY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdF9pZF86ICckX2lkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYmFzZVBpcGVsaW5lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvdW50OiAncmVzdWx0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFnZ3JlZ2F0ZS5wdXNoKHtcbiAgICAgICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBbYCR7YXN9LmRvY3NgXToge1xuICAgICAgICAgICAgICAgICAgICAkY29uY2F0QXJyYXlzOiBhbGlhc2VzLm1hcCgoYWxpYXMpPT5gJCR7YWxpYXN9YClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY291bnQpIHtcbiAgICAgICAgICAgIGFnZ3JlZ2F0ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAkYWRkRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgIFtgJHthc30udG90YWxEb2NzYF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhZGQ6IGFsaWFzZXMubWFwKChhbGlhcyk9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpZk51bGw6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZmlyc3Q6IGAkJHthc30udG90YWxEb2NzLiR7YWxpYXN9LnJlc3VsdGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGFnZ3JlZ2F0ZS5wdXNoKHtcbiAgICAgICAgICAgICRzZXQ6IHtcbiAgICAgICAgICAgICAgICBbYCR7YXN9LmRvY3NgXToge1xuICAgICAgICAgICAgICAgICAgICAkc29ydEFycmF5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogYCQke2FzfS5kb2NzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRCeToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzb3J0UHJvcGVydHldOiBzb3J0RGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzbGljZVZhbHVlID0gcGFnZSA/IFtcbiAgICAgICAgICAgIChwYWdlIC0gMSkgKiBsaW1pdEpvaW4sXG4gICAgICAgICAgICBsaW1pdEpvaW5cbiAgICAgICAgXSA6IFtcbiAgICAgICAgICAgIGxpbWl0Sm9pblxuICAgICAgICBdO1xuICAgICAgICBhZ2dyZWdhdGUucHVzaCh7XG4gICAgICAgICAgICAkYWRkRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgW2Ake2FzfS5oYXNOZXh0UGFnZWBdOiB7XG4gICAgICAgICAgICAgICAgICAgICRndDogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzaXplOiBgJCR7YXN9LmRvY3NgXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbGltaXRKb2luIHx8IE51bWJlci5NQVhfVkFMVUVcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFnZ3JlZ2F0ZS5wdXNoKHtcbiAgICAgICAgICAgICRzZXQ6IHtcbiAgICAgICAgICAgICAgICBbYCR7YXN9LmRvY3NgXToge1xuICAgICAgICAgICAgICAgICAgICAkc2xpY2U6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGAkJHthc30uZG9jc2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5zbGljZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNsdWcgb2YgT2JqZWN0LmtleXMoam9pbkNvbmZpZykpe1xuICAgICAgICBjb25zdCBqb2luc0xpc3QgPSBqb2luQ29uZmlnW3NsdWddO1xuICAgICAgICBpZiAoIWpvaW5zTGlzdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBGYWlsZWQgdG8gcmV0cmlldmUgYXJyYXkgb2Ygam9pbnMgZm9yICR7c2x1Z30gaW4gY29sbGVjdGlvICR7Y29sbGVjdGlvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGpvaW4gb2Ygam9pbnNMaXN0KXtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0aW9uICYmICFwcm9qZWN0aW9uW2pvaW4uam9pblBhdGhdKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoam9pbnM/Lltqb2luLmpvaW5QYXRoXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb25Db25maWcgPSBhZGFwdGVyLnBheWxvYWQuY29sbGVjdGlvbnNbam9pbi5maWVsZC5jb2xsZWN0aW9uXT8uY29uZmlnO1xuICAgICAgICAgICAgaWYgKCFjb2xsZWN0aW9uQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBDb2xsZWN0aW9uIGNvbmZpZyBmb3IgJHtqb2luLmZpZWxkLmNvbGxlY3Rpb24udG9TdHJpbmcoKX0gd2FzIG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IEpvaW5Nb2RlbDtcbiAgICAgICAgICAgIGNvbnN0IHVzZURyYWZ0cyA9IChkcmFmdHNFbmFibGVkIHx8IHZlcnNpb25zKSAmJiBCb29sZWFuKGNvbGxlY3Rpb25Db25maWcudmVyc2lvbnMuZHJhZnRzKTtcbiAgICAgICAgICAgIGlmICh1c2VEcmFmdHMpIHtcbiAgICAgICAgICAgICAgICBKb2luTW9kZWwgPSBhZGFwdGVyLnZlcnNpb25zW2NvbGxlY3Rpb25Db25maWcuc2x1Z107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEpvaW5Nb2RlbCA9IGFkYXB0ZXIuY29sbGVjdGlvbnNbY29sbGVjdGlvbkNvbmZpZy5zbHVnXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghSm9pbk1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBKb2luIE1vZGVsIHdhcyBub3QgZm91bmQgZm9yICR7Y29sbGVjdGlvbkNvbmZpZy5zbHVnfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBjb3VudCwgbGltaXQ6IGxpbWl0Sm9pbiA9IGpvaW4uZmllbGQuZGVmYXVsdExpbWl0ID8/IDEwLCBwYWdlLCBzb3J0OiBzb3J0Sm9pbiA9IGpvaW4uZmllbGQuZGVmYXVsdFNvcnQgfHwgY29sbGVjdGlvbkNvbmZpZy5kZWZhdWx0U29ydCwgd2hlcmU6IHdoZXJlSm9pbiA9IHt9IH0gPSBqb2lucz8uW2pvaW4uam9pblBhdGhdIHx8IHt9O1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoam9pbi5maWVsZC5jb2xsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5yZWFjaGFibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHVzZURyYWZ0cyA/IGJ1aWxkVmVyc2lvbkNvbGxlY3Rpb25GaWVsZHMoYWRhcHRlci5wYXlsb2FkLmNvbmZpZywgY29sbGVjdGlvbkNvbmZpZywgdHJ1ZSkgOiBjb2xsZWN0aW9uQ29uZmlnLmZsYXR0ZW5lZEZpZWxkcztcbiAgICAgICAgICAgIGNvbnN0IHNvcnQgPSBidWlsZFNvcnRQYXJhbSh7XG4gICAgICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgICAgICBjb25maWc6IGFkYXB0ZXIucGF5bG9hZC5jb25maWcsXG4gICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgICAgICBzb3J0OiB1c2VEcmFmdHMgPyBnZXRRdWVyeURyYWZ0c1NvcnQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICBzb3J0OiBzb3J0Sm9pblxuICAgICAgICAgICAgICAgIH0pIDogc29ydEpvaW4sXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wczogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBzb3J0UHJvcGVydHkgPSBPYmplY3Qua2V5cyhzb3J0KVswXTtcbiAgICAgICAgICAgIGNvbnN0IHNvcnREaXJlY3Rpb24gPSBzb3J0W3NvcnRQcm9wZXJ0eV0gPT09ICdhc2MnID8gMSA6IC0xO1xuICAgICAgICAgICAgY29uc3QgJG1hdGNoID0gYXdhaXQgSm9pbk1vZGVsLmJ1aWxkUXVlcnkoe1xuICAgICAgICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBhZGFwdGVyLnBheWxvYWQsXG4gICAgICAgICAgICAgICAgd2hlcmU6IHVzZURyYWZ0cyA/IGNvbWJpbmVRdWVyaWVzKGFwcGVuZFZlcnNpb25Ub1F1ZXJ5S2V5KHdoZXJlSm9pbiksIHtcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcXVhbHM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pIDogd2hlcmVKb2luXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHBpcGVsaW5lID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJG1hdGNoXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICRzb3J0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbc29ydFByb3BlcnR5XTogc29ydERpcmVjdGlvblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmIChwYWdlKSB7XG4gICAgICAgICAgICAgICAgcGlwZWxpbmUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICRza2lwOiAocGFnZSAtIDEpICogbGltaXRKb2luXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGltaXRKb2luID4gMCkge1xuICAgICAgICAgICAgICAgIHBpcGVsaW5lLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAkbGltaXQ6IGxpbWl0Sm9pbiArIDFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwb2x5bW9ycGhpY1N1ZmZpeCA9ICcnO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoam9pbi50YXJnZXRGaWVsZC5yZWxhdGlvblRvKSkge1xuICAgICAgICAgICAgICAgIHBvbHltb3JwaGljU3VmZml4ID0gJy52YWx1ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhZGRUb3RhbERvY3NBZ2dyZWdhdGlvbiA9IChhcywgZm9yZWlnbkZpZWxkKT0+YWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAkbG9va3VwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhczogYCR7YXN9LnRvdGFsRG9jc2AsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JlaWduRmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBKb2luTW9kZWwuY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxGaWVsZDogdmVyc2lvbnMgPyAncGFyZW50JyA6ICdfaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtYXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY291bnQ6ICdyZXN1bHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAkYWRkRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbYCR7YXN9LnRvdGFsRG9jc2BdOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlmTnVsbDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZmlyc3Q6IGAkJHthc30udG90YWxEb2NzLnJlc3VsdGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGZvcmVpZ25GaWVsZFByZWZpeCA9ICcnO1xuICAgICAgICAgICAgaWYgKHVzZURyYWZ0cykge1xuICAgICAgICAgICAgICAgIGZvcmVpZ25GaWVsZFByZWZpeCA9ICd2ZXJzaW9uLic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWRhcHRlci5wYXlsb2FkLmNvbmZpZy5sb2NhbGl6YXRpb24gJiYgbG9jYWxlID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgIGFkYXB0ZXIucGF5bG9hZC5jb25maWcubG9jYWxpemF0aW9uLmxvY2FsZUNvZGVzLmZvckVhY2goKGNvZGUpPT57XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzID0gYCR7dmVyc2lvbnMgPyBgdmVyc2lvbi4ke2pvaW4uam9pblBhdGh9YCA6IGpvaW4uam9pblBhdGh9JHtjb2RlfWA7XG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhczogYCR7YXN9LmRvY3NgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVpZ25GaWVsZDogYCR7Zm9yZWlnbkZpZWxkUHJlZml4fSR7am9pbi5maWVsZC5vbn0ke2NvZGV9JHtwb2x5bW9ycGhpY1N1ZmZpeH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IEpvaW5Nb2RlbC5jb2xsZWN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxGaWVsZDogdmVyc2lvbnMgPyAncGFyZW50JyA6ICdfaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYCR7YXN9LmRvY3NgXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWFwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhczogJ2RvYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbjogdXNlRHJhZnRzID8gYCQkZG9jLnBhcmVudGAgOiAnJCRkb2MuX2lkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBgJCR7YXN9LmRvY3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtgJHthc30uaGFzTmV4dFBhZ2VgXTogbGltaXRKb2luID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZ3Q6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2l6ZTogYCQke2FzfS5kb2NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0Sm9pblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGltaXRKb2luID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Ake2FzfS5kb2NzYF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzbGljZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAkJHthc30uZG9jc2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXRKb2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFRvdGFsRG9jc0FnZ3JlZ2F0aW9uKGFzLCBgJHtmb3JlaWduRmllbGRQcmVmaXh9JHtqb2luLmZpZWxkLm9ufSR7Y29kZX0ke3BvbHltb3JwaGljU3VmZml4fWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsZVN1ZmZpeCA9IGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogam9pbi5maWVsZCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQ6IGpvaW4ucGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgICAgICB9KSAmJiBhZGFwdGVyLnBheWxvYWQuY29uZmlnLmxvY2FsaXphdGlvbiAmJiBsb2NhbGUgPyBgLiR7bG9jYWxlfWAgOiAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBhcyA9IGAke3ZlcnNpb25zID8gYHZlcnNpb24uJHtqb2luLmpvaW5QYXRofWAgOiBqb2luLmpvaW5QYXRofSR7bG9jYWxlU3VmZml4fWA7XG4gICAgICAgICAgICAgICAgbGV0IGZvcmVpZ25GaWVsZDtcbiAgICAgICAgICAgICAgICBpZiAoam9pbi5nZXRGb3JlaWduUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JlaWduRmllbGQgPSBgJHtqb2luLmdldEZvcmVpZ25QYXRoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZVxuICAgICAgICAgICAgICAgICAgICB9KX0ke3BvbHltb3JwaGljU3VmZml4fWA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yZWlnbkZpZWxkID0gYCR7am9pbi5maWVsZC5vbn0ke3BvbHltb3JwaGljU3VmZml4fWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgJGxvb2t1cDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXM6IGAke2FzfS5kb2NzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVpZ25GaWVsZDogYCR7Zm9yZWlnbkZpZWxkUHJlZml4fSR7Zm9yZWlnbkZpZWxkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBKb2luTW9kZWwuY29sbGVjdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxGaWVsZDogdmVyc2lvbnMgPyAncGFyZW50JyA6ICdfaWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgJGFkZEZpZWxkczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgW2Ake2FzfS5kb2NzYF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWFwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzOiAnZG9jJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW46IHVzZURyYWZ0cyA/IGAkJGRvYy5wYXJlbnRgIDogJyQkZG9jLl9pZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBgJCR7YXN9LmRvY3NgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtgJHthc30uaGFzTmV4dFBhZ2VgXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRndDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2l6ZTogYCQke2FzfS5kb2NzYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdEpvaW4gfHwgTnVtYmVyLk1BWF9WQUxVRVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRUb3RhbERvY3NBZ2dyZWdhdGlvbihhcywgYCR7Zm9yZWlnbkZpZWxkUHJlZml4fSR7Zm9yZWlnbkZpZWxkfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobGltaXRKb2luID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAkYWRkRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Ake2FzfS5kb2NzYF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNsaWNlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJCR7YXN9LmRvY3NgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXRKb2luXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWdncmVnYXRlO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnVpbGRKb2luQWdncmVnYXRpb24uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildJoinAggregation.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js":
/*!*********************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js ***!
  \*********************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildProjectionFromSelect: () => (/* binding */ buildProjectionFromSelect)\n/* harmony export */ });\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/fields/config/types.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/deepCopyObject.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/getSelectMode.js\");\n\nconst addFieldToProjection = ({ adapter, databaseSchemaPath, field, parentIsLocalized, projection })=>{\n    const { config } = adapter.payload;\n    if (parentIsLocalized && config.localization) {\n        for (const locale of config.localization.localeCodes){\n            const localeDatabaseSchemaPath = databaseSchemaPath.replace('<locale>', locale);\n            projection[`${localeDatabaseSchemaPath}${field.name}`] = true;\n        }\n    } else {\n        projection[`${databaseSchemaPath}${field.name}`] = true;\n    }\n};\nconst traverseFields = ({ adapter, databaseSchemaPath = '', fields, parentIsLocalized = false, projection, select, selectAllOnCurrentLevel = false, selectMode })=>{\n    for (const field of fields){\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(field)) {\n            if (selectMode === 'include') {\n                if (select[field.name] === true || selectAllOnCurrentLevel) {\n                    addFieldToProjection({\n                        adapter,\n                        databaseSchemaPath,\n                        field,\n                        parentIsLocalized,\n                        projection\n                    });\n                    continue;\n                }\n                if (!select[field.name]) {\n                    continue;\n                }\n            }\n            if (selectMode === 'exclude') {\n                if (typeof select[field.name] === 'undefined') {\n                    addFieldToProjection({\n                        adapter,\n                        databaseSchemaPath,\n                        field,\n                        parentIsLocalized,\n                        projection\n                    });\n                    continue;\n                }\n                if (select[field.name] === false) {\n                    continue;\n                }\n            }\n        }\n        let fieldDatabaseSchemaPath = databaseSchemaPath;\n        if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldAffectsData)(field)) {\n            fieldDatabaseSchemaPath = `${databaseSchemaPath}${field.name}.`;\n            if ((0,payload_shared__WEBPACK_IMPORTED_MODULE_0__.fieldShouldBeLocalized)({\n                field,\n                parentIsLocalized\n            })) {\n                fieldDatabaseSchemaPath = `${fieldDatabaseSchemaPath}<locale>.`;\n            }\n        }\n        switch(field.type){\n            case 'array':\n            case 'group':\n            case 'tab':\n                {\n                    const fieldSelect = select[field.name];\n                    if (field.type === 'array' && selectMode === 'include') {\n                        fieldSelect.id = true;\n                    }\n                    traverseFields({\n                        adapter,\n                        databaseSchemaPath: fieldDatabaseSchemaPath,\n                        fields: field.flattenedFields,\n                        parentIsLocalized: parentIsLocalized || field.localized,\n                        projection,\n                        select: fieldSelect,\n                        selectMode\n                    });\n                    break;\n                }\n            case 'blocks':\n                {\n                    const blocksSelect = select[field.name];\n                    for (const _block of field.blockReferences ?? field.blocks){\n                        const block = typeof _block === 'string' ? adapter.payload.blocks[_block] : _block;\n                        if (!block) {\n                            continue;\n                        }\n                        if (selectMode === 'include' && blocksSelect[block.slug] === true || selectMode === 'exclude' && typeof blocksSelect[block.slug] === 'undefined') {\n                            traverseFields({\n                                adapter,\n                                databaseSchemaPath: fieldDatabaseSchemaPath,\n                                fields: block.flattenedFields,\n                                parentIsLocalized: parentIsLocalized || field.localized,\n                                projection,\n                                select: {},\n                                selectAllOnCurrentLevel: true,\n                                selectMode: 'include'\n                            });\n                            continue;\n                        }\n                        let blockSelectMode = selectMode;\n                        if (selectMode === 'exclude' && blocksSelect[block.slug] === false) {\n                            blockSelectMode = 'include';\n                        }\n                        if (typeof blocksSelect[block.slug] !== 'object') {\n                            blocksSelect[block.slug] = {};\n                        }\n                        if (blockSelectMode === 'include' && typeof blocksSelect[block.slug] === 'object') {\n                            const blockSelect = blocksSelect[block.slug];\n                            blockSelect.id = true;\n                            blockSelect.blockType = true;\n                        }\n                        traverseFields({\n                            adapter,\n                            databaseSchemaPath: fieldDatabaseSchemaPath,\n                            fields: block.flattenedFields,\n                            parentIsLocalized: parentIsLocalized || field.localized,\n                            projection,\n                            select: blocksSelect[block.slug],\n                            selectMode: blockSelectMode\n                        });\n                    }\n                    break;\n                }\n            default:\n                break;\n        }\n    }\n};\nconst buildProjectionFromSelect = ({ adapter, fields, select })=>{\n    if (!select) {\n        return;\n    }\n    const projection = {\n        _id: true\n    };\n    traverseFields({\n        adapter,\n        fields,\n        projection,\n        // Clone to safely mutate it later\n        select: (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.deepCopyObjectSimple)(select),\n        selectMode: (0,payload_shared__WEBPACK_IMPORTED_MODULE_2__.getSelectMode)(select)\n    });\n    return projection;\n};\n\n//# sourceMappingURL=buildProjectionFromSelect.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQStHO0FBQy9HLGdDQUFnQyxtRUFBbUU7QUFDbkcsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix5QkFBeUIsRUFBRSxXQUFXO0FBQ2hFO0FBQ0EsTUFBTTtBQUNOLHNCQUFzQixtQkFBbUIsRUFBRSxXQUFXO0FBQ3REO0FBQ0E7QUFDQSwwQkFBMEIsc0lBQXNJO0FBQ2hLO0FBQ0EsWUFBWSxnRUFBZ0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdFQUFnQjtBQUM1Qix5Q0FBeUMsbUJBQW1CLEVBQUUsV0FBVztBQUN6RSxnQkFBZ0Isc0VBQXNCO0FBQ3RDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsNkNBQTZDLHdCQUF3QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHFDQUFxQyx5QkFBeUI7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvRUFBb0I7QUFDcEMsb0JBQW9CLDZEQUFhO0FBQ2pDLEtBQUs7QUFDTDtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3V0aWxpdGllcy9idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZXBDb3B5T2JqZWN0U2ltcGxlLCBmaWVsZEFmZmVjdHNEYXRhLCBmaWVsZFNob3VsZEJlTG9jYWxpemVkLCBnZXRTZWxlY3RNb2RlIH0gZnJvbSAncGF5bG9hZC9zaGFyZWQnO1xuY29uc3QgYWRkRmllbGRUb1Byb2plY3Rpb24gPSAoeyBhZGFwdGVyLCBkYXRhYmFzZVNjaGVtYVBhdGgsIGZpZWxkLCBwYXJlbnRJc0xvY2FsaXplZCwgcHJvamVjdGlvbiB9KT0+e1xuICAgIGNvbnN0IHsgY29uZmlnIH0gPSBhZGFwdGVyLnBheWxvYWQ7XG4gICAgaWYgKHBhcmVudElzTG9jYWxpemVkICYmIGNvbmZpZy5sb2NhbGl6YXRpb24pIHtcbiAgICAgICAgZm9yIChjb25zdCBsb2NhbGUgb2YgY29uZmlnLmxvY2FsaXphdGlvbi5sb2NhbGVDb2Rlcyl7XG4gICAgICAgICAgICBjb25zdCBsb2NhbGVEYXRhYmFzZVNjaGVtYVBhdGggPSBkYXRhYmFzZVNjaGVtYVBhdGgucmVwbGFjZSgnPGxvY2FsZT4nLCBsb2NhbGUpO1xuICAgICAgICAgICAgcHJvamVjdGlvbltgJHtsb2NhbGVEYXRhYmFzZVNjaGVtYVBhdGh9JHtmaWVsZC5uYW1lfWBdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2plY3Rpb25bYCR7ZGF0YWJhc2VTY2hlbWFQYXRofSR7ZmllbGQubmFtZX1gXSA9IHRydWU7XG4gICAgfVxufTtcbmNvbnN0IHRyYXZlcnNlRmllbGRzID0gKHsgYWRhcHRlciwgZGF0YWJhc2VTY2hlbWFQYXRoID0gJycsIGZpZWxkcywgcGFyZW50SXNMb2NhbGl6ZWQgPSBmYWxzZSwgcHJvamVjdGlvbiwgc2VsZWN0LCBzZWxlY3RBbGxPbkN1cnJlbnRMZXZlbCA9IGZhbHNlLCBzZWxlY3RNb2RlIH0pPT57XG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZHMpe1xuICAgICAgICBpZiAoZmllbGRBZmZlY3RzRGF0YShmaWVsZCkpIHtcbiAgICAgICAgICAgIGlmIChzZWxlY3RNb2RlID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0W2ZpZWxkLm5hbWVdID09PSB0cnVlIHx8IHNlbGVjdEFsbE9uQ3VycmVudExldmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEZpZWxkVG9Qcm9qZWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhYmFzZVNjaGVtYVBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghc2VsZWN0W2ZpZWxkLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxlY3RNb2RlID09PSAnZXhjbHVkZScpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNlbGVjdFtmaWVsZC5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkRmllbGRUb1Byb2plY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlU2NoZW1hUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdFtmaWVsZC5uYW1lXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBmaWVsZERhdGFiYXNlU2NoZW1hUGF0aCA9IGRhdGFiYXNlU2NoZW1hUGF0aDtcbiAgICAgICAgaWYgKGZpZWxkQWZmZWN0c0RhdGEoZmllbGQpKSB7XG4gICAgICAgICAgICBmaWVsZERhdGFiYXNlU2NoZW1hUGF0aCA9IGAke2RhdGFiYXNlU2NoZW1hUGF0aH0ke2ZpZWxkLm5hbWV9LmA7XG4gICAgICAgICAgICBpZiAoZmllbGRTaG91bGRCZUxvY2FsaXplZCh7XG4gICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWRcbiAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgZmllbGREYXRhYmFzZVNjaGVtYVBhdGggPSBgJHtmaWVsZERhdGFiYXNlU2NoZW1hUGF0aH08bG9jYWxlPi5gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN3aXRjaChmaWVsZC50eXBlKXtcbiAgICAgICAgICAgIGNhc2UgJ2FycmF5JzpcbiAgICAgICAgICAgIGNhc2UgJ2dyb3VwJzpcbiAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFNlbGVjdCA9IHNlbGVjdFtmaWVsZC5uYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdhcnJheScgJiYgc2VsZWN0TW9kZSA9PT0gJ2luY2x1ZGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFNlbGVjdC5pZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2VGaWVsZHMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlU2NoZW1hUGF0aDogZmllbGREYXRhYmFzZVNjaGVtYVBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IGZpZWxkLmZsYXR0ZW5lZEZpZWxkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkOiBwYXJlbnRJc0xvY2FsaXplZCB8fCBmaWVsZC5sb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiBmaWVsZFNlbGVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdE1vZGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2Jsb2Nrcyc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja3NTZWxlY3QgPSBzZWxlY3RbZmllbGQubmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgX2Jsb2NrIG9mIGZpZWxkLmJsb2NrUmVmZXJlbmNlcyA/PyBmaWVsZC5ibG9ja3Mpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2sgPSB0eXBlb2YgX2Jsb2NrID09PSAnc3RyaW5nJyA/IGFkYXB0ZXIucGF5bG9hZC5ibG9ja3NbX2Jsb2NrXSA6IF9ibG9jaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RNb2RlID09PSAnaW5jbHVkZScgJiYgYmxvY2tzU2VsZWN0W2Jsb2NrLnNsdWddID09PSB0cnVlIHx8IHNlbGVjdE1vZGUgPT09ICdleGNsdWRlJyAmJiB0eXBlb2YgYmxvY2tzU2VsZWN0W2Jsb2NrLnNsdWddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlRmllbGRzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VTY2hlbWFQYXRoOiBmaWVsZERhdGFiYXNlU2NoZW1hUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBibG9jay5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkOiBwYXJlbnRJc0xvY2FsaXplZCB8fCBmaWVsZC5sb2NhbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdDoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdEFsbE9uQ3VycmVudExldmVsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RNb2RlOiAnaW5jbHVkZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBibG9ja1NlbGVjdE1vZGUgPSBzZWxlY3RNb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdE1vZGUgPT09ICdleGNsdWRlJyAmJiBibG9ja3NTZWxlY3RbYmxvY2suc2x1Z10gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTZWxlY3RNb2RlID0gJ2luY2x1ZGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBibG9ja3NTZWxlY3RbYmxvY2suc2x1Z10gIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzU2VsZWN0W2Jsb2NrLnNsdWddID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2tTZWxlY3RNb2RlID09PSAnaW5jbHVkZScgJiYgdHlwZW9mIGJsb2Nrc1NlbGVjdFtibG9jay5zbHVnXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja1NlbGVjdCA9IGJsb2Nrc1NlbGVjdFtibG9jay5zbHVnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja1NlbGVjdC5pZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTZWxlY3QuYmxvY2tUeXBlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlRmllbGRzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFiYXNlU2NoZW1hUGF0aDogZmllbGREYXRhYmFzZVNjaGVtYVBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBibG9jay5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQ6IHBhcmVudElzTG9jYWxpemVkIHx8IGZpZWxkLmxvY2FsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdDogYmxvY2tzU2VsZWN0W2Jsb2NrLnNsdWddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdE1vZGU6IGJsb2NrU2VsZWN0TW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn07XG5leHBvcnQgY29uc3QgYnVpbGRQcm9qZWN0aW9uRnJvbVNlbGVjdCA9ICh7IGFkYXB0ZXIsIGZpZWxkcywgc2VsZWN0IH0pPT57XG4gICAgaWYgKCFzZWxlY3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwcm9qZWN0aW9uID0ge1xuICAgICAgICBfaWQ6IHRydWVcbiAgICB9O1xuICAgIHRyYXZlcnNlRmllbGRzKHtcbiAgICAgICAgYWRhcHRlcixcbiAgICAgICAgZmllbGRzLFxuICAgICAgICBwcm9qZWN0aW9uLFxuICAgICAgICAvLyBDbG9uZSB0byBzYWZlbHkgbXV0YXRlIGl0IGxhdGVyXG4gICAgICAgIHNlbGVjdDogZGVlcENvcHlPYmplY3RTaW1wbGUoc2VsZWN0KSxcbiAgICAgICAgc2VsZWN0TW9kZTogZ2V0U2VsZWN0TW9kZShzZWxlY3QpXG4gICAgfSk7XG4gICAgcmV0dXJuIHByb2plY3Rpb247XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWlsZFByb2plY3Rpb25Gcm9tU2VsZWN0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/buildProjectionFromSelect.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getDBName.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getDBName.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDBName: () => (/* binding */ getDBName)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js\");\n\n/**\n * Used to name database enums and collections\n * Returns the collection or enum name for a given entity\n */ const getDBName = ({ config: { name, slug }, config, target = 'dbName', versions = false })=>{\n    let result = null;\n    let custom = config[target];\n    if (!custom && target === 'enumName') {\n        custom = config['dbName'];\n    }\n    if (custom) {\n        result = typeof custom === 'function' ? custom({}) : custom;\n    } else {\n        result = name ?? slug ?? null;\n    }\n    if (versions) {\n        result = `_${result}_versions`;\n    }\n    if (!result) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`Assertion for DB name of ${name} ${slug} was failed.`);\n    }\n    return result;\n};\n\n//# sourceMappingURL=getDBName.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvZ2V0REJOYW1lLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLElBQVcscUJBQXFCLFVBQVUsWUFBWSwrQ0FBK0M7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pELE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsT0FBTztBQUM1QjtBQUNBO0FBQ0Esa0JBQWtCLDZDQUFRLDZCQUE2QixNQUFNLEVBQUUsTUFBTTtBQUNyRTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2dldERCTmFtZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBUElFcnJvciB9IGZyb20gJ3BheWxvYWQnO1xuLyoqXG4gKiBVc2VkIHRvIG5hbWUgZGF0YWJhc2UgZW51bXMgYW5kIGNvbGxlY3Rpb25zXG4gKiBSZXR1cm5zIHRoZSBjb2xsZWN0aW9uIG9yIGVudW0gbmFtZSBmb3IgYSBnaXZlbiBlbnRpdHlcbiAqLyBleHBvcnQgY29uc3QgZ2V0REJOYW1lID0gKHsgY29uZmlnOiB7IG5hbWUsIHNsdWcgfSwgY29uZmlnLCB0YXJnZXQgPSAnZGJOYW1lJywgdmVyc2lvbnMgPSBmYWxzZSB9KT0+e1xuICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgIGxldCBjdXN0b20gPSBjb25maWdbdGFyZ2V0XTtcbiAgICBpZiAoIWN1c3RvbSAmJiB0YXJnZXQgPT09ICdlbnVtTmFtZScpIHtcbiAgICAgICAgY3VzdG9tID0gY29uZmlnWydkYk5hbWUnXTtcbiAgICB9XG4gICAgaWYgKGN1c3RvbSkge1xuICAgICAgICByZXN1bHQgPSB0eXBlb2YgY3VzdG9tID09PSAnZnVuY3Rpb24nID8gY3VzdG9tKHt9KSA6IGN1c3RvbTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgPSBuYW1lID8/IHNsdWcgPz8gbnVsbDtcbiAgICB9XG4gICAgaWYgKHZlcnNpb25zKSB7XG4gICAgICAgIHJlc3VsdCA9IGBfJHtyZXN1bHR9X3ZlcnNpb25zYDtcbiAgICB9XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSUVycm9yKGBBc3NlcnRpb24gZm9yIERCIG5hbWUgb2YgJHtuYW1lfSAke3NsdWd9IHdhcyBmYWlsZWQuYCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXREQk5hbWUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getDBName.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCollection: () => (/* binding */ getCollection),\n/* harmony export */   getGlobal: () => (/* binding */ getGlobal)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/errors/APIError.js\");\n\nconst getCollection = ({ adapter, collectionSlug, versions = false })=>{\n    const collection = adapter.payload.collections[collectionSlug];\n    if (!collection) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve collection with the slug \"${collectionSlug}\". Does not exist.`);\n    }\n    if (versions) {\n        const Model = adapter.versions[collectionSlug];\n        if (!Model) {\n            throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve collection version model with the slug \"${collectionSlug}\". Does not exist.`);\n        }\n        return {\n            collectionConfig: collection.config,\n            customIDType: collection.customIDType,\n            Model\n        };\n    }\n    const Model = adapter.collections[collectionSlug];\n    if (!Model) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve collection model with the slug \"${collectionSlug}\". Does not exist.`);\n    }\n    return {\n        collectionConfig: collection.config,\n        customIDType: collection.customIDType,\n        Model\n    };\n};\nconst getGlobal = ({ adapter, globalSlug, versions = false })=>{\n    const globalConfig = adapter.payload.config.globals.find((each)=>each.slug === globalSlug);\n    if (!globalConfig) {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve global with the slug \"${globalSlug}\". Does not exist.`);\n    }\n    if (versions) {\n        const Model = adapter.versions[globalSlug];\n        if (!Model) {\n            throw new payload__WEBPACK_IMPORTED_MODULE_0__.APIError(`ERROR: Failed to retrieve global version model with the slug \"${globalSlug}\". Does not exist.`);\n        }\n        return {\n            globalConfig,\n            Model\n        };\n    }\n    return {\n        globalConfig,\n        Model: adapter.globals\n    };\n};\n\n//# sourceMappingURL=getEntity.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvZ2V0RW50aXR5LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFtQztBQUM1Qix5QkFBeUIsMkNBQTJDO0FBQzNFO0FBQ0E7QUFDQSxrQkFBa0IsNkNBQVEsd0RBQXdELGVBQWU7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkNBQVEsc0VBQXNFLGVBQWU7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZDQUFRLDhEQUE4RCxlQUFlO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08scUJBQXFCLHVDQUF1QztBQUNuRTtBQUNBO0FBQ0Esa0JBQWtCLDZDQUFRLG9EQUFvRCxXQUFXO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZDQUFRLGtFQUFrRSxXQUFXO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2dldEVudGl0eS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBUElFcnJvciB9IGZyb20gJ3BheWxvYWQnO1xuZXhwb3J0IGNvbnN0IGdldENvbGxlY3Rpb24gPSAoeyBhZGFwdGVyLCBjb2xsZWN0aW9uU2x1ZywgdmVyc2lvbnMgPSBmYWxzZSB9KT0+e1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBhZGFwdGVyLnBheWxvYWQuY29sbGVjdGlvbnNbY29sbGVjdGlvblNsdWddO1xuICAgIGlmICghY29sbGVjdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYEVSUk9SOiBGYWlsZWQgdG8gcmV0cmlldmUgY29sbGVjdGlvbiB3aXRoIHRoZSBzbHVnIFwiJHtjb2xsZWN0aW9uU2x1Z31cIi4gRG9lcyBub3QgZXhpc3QuYCk7XG4gICAgfVxuICAgIGlmICh2ZXJzaW9ucykge1xuICAgICAgICBjb25zdCBNb2RlbCA9IGFkYXB0ZXIudmVyc2lvbnNbY29sbGVjdGlvblNsdWddO1xuICAgICAgICBpZiAoIU1vZGVsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYEVSUk9SOiBGYWlsZWQgdG8gcmV0cmlldmUgY29sbGVjdGlvbiB2ZXJzaW9uIG1vZGVsIHdpdGggdGhlIHNsdWcgXCIke2NvbGxlY3Rpb25TbHVnfVwiLiBEb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29sbGVjdGlvbkNvbmZpZzogY29sbGVjdGlvbi5jb25maWcsXG4gICAgICAgICAgICBjdXN0b21JRFR5cGU6IGNvbGxlY3Rpb24uY3VzdG9tSURUeXBlLFxuICAgICAgICAgICAgTW9kZWxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgTW9kZWwgPSBhZGFwdGVyLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25TbHVnXTtcbiAgICBpZiAoIU1vZGVsKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElFcnJvcihgRVJST1I6IEZhaWxlZCB0byByZXRyaWV2ZSBjb2xsZWN0aW9uIG1vZGVsIHdpdGggdGhlIHNsdWcgXCIke2NvbGxlY3Rpb25TbHVnfVwiLiBEb2VzIG5vdCBleGlzdC5gKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29sbGVjdGlvbkNvbmZpZzogY29sbGVjdGlvbi5jb25maWcsXG4gICAgICAgIGN1c3RvbUlEVHlwZTogY29sbGVjdGlvbi5jdXN0b21JRFR5cGUsXG4gICAgICAgIE1vZGVsXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgZ2V0R2xvYmFsID0gKHsgYWRhcHRlciwgZ2xvYmFsU2x1ZywgdmVyc2lvbnMgPSBmYWxzZSB9KT0+e1xuICAgIGNvbnN0IGdsb2JhbENvbmZpZyA9IGFkYXB0ZXIucGF5bG9hZC5jb25maWcuZ2xvYmFscy5maW5kKChlYWNoKT0+ZWFjaC5zbHVnID09PSBnbG9iYWxTbHVnKTtcbiAgICBpZiAoIWdsb2JhbENvbmZpZykge1xuICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYEVSUk9SOiBGYWlsZWQgdG8gcmV0cmlldmUgZ2xvYmFsIHdpdGggdGhlIHNsdWcgXCIke2dsb2JhbFNsdWd9XCIuIERvZXMgbm90IGV4aXN0LmApO1xuICAgIH1cbiAgICBpZiAodmVyc2lvbnMpIHtcbiAgICAgICAgY29uc3QgTW9kZWwgPSBhZGFwdGVyLnZlcnNpb25zW2dsb2JhbFNsdWddO1xuICAgICAgICBpZiAoIU1vZGVsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoYEVSUk9SOiBGYWlsZWQgdG8gcmV0cmlldmUgZ2xvYmFsIHZlcnNpb24gbW9kZWwgd2l0aCB0aGUgc2x1ZyBcIiR7Z2xvYmFsU2x1Z31cIi4gRG9lcyBub3QgZXhpc3QuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdsb2JhbENvbmZpZyxcbiAgICAgICAgICAgIE1vZGVsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGdsb2JhbENvbmZpZyxcbiAgICAgICAgTW9kZWw6IGFkYXB0ZXIuZ2xvYmFsc1xuICAgIH07XG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXRFbnRpdHkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getEntity.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js":
/*!******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js ***!
  \******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSession: () => (/* binding */ getSession)\n/* harmony export */ });\n/**\n * returns the session belonging to the transaction of the req.session if exists\n * @returns ClientSession\n */ async function getSession(db, req) {\n    if (!req) {\n        return;\n    }\n    let transactionID = req.transactionID;\n    if (transactionID instanceof Promise) {\n        transactionID = await req.transactionID;\n    }\n    if (transactionID) {\n        return db.sessions[transactionID];\n    }\n}\n\n//# sourceMappingURL=getSession.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvZ2V0U2Vzc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0EsSUFBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2dldFNlc3Npb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiByZXR1cm5zIHRoZSBzZXNzaW9uIGJlbG9uZ2luZyB0byB0aGUgdHJhbnNhY3Rpb24gb2YgdGhlIHJlcS5zZXNzaW9uIGlmIGV4aXN0c1xuICogQHJldHVybnMgQ2xpZW50U2Vzc2lvblxuICovIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZXNzaW9uKGRiLCByZXEpIHtcbiAgICBpZiAoIXJlcSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB0cmFuc2FjdGlvbklEID0gcmVxLnRyYW5zYWN0aW9uSUQ7XG4gICAgaWYgKHRyYW5zYWN0aW9uSUQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHRyYW5zYWN0aW9uSUQgPSBhd2FpdCByZXEudHJhbnNhY3Rpb25JRDtcbiAgICB9XG4gICAgaWYgKHRyYW5zYWN0aW9uSUQpIHtcbiAgICAgICAgcmV0dXJuIGRiLnNlc3Npb25zW3RyYW5zYWN0aW9uSURdO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0U2Vzc2lvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/getSession.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleError: () => (/* binding */ handleError)\n/* harmony export */ });\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/errors/ValidationError.js\");\n\nconst handleError = ({ collection, error, global, req })=>{\n    if (!error || typeof error !== 'object') {\n        throw error;\n    }\n    // Handle uniqueness error from MongoDB\n    if ('code' in error && error.code === 11000 && 'keyValue' in error && error.keyValue && typeof error.keyValue === 'object') {\n        throw new payload__WEBPACK_IMPORTED_MODULE_0__.ValidationError({\n            collection,\n            errors: [\n                {\n                    message: req?.t ? req.t('error:valueMustBeUnique') : 'Value must be unique',\n                    path: Object.keys(error.keyValue)[0] ?? ''\n                }\n            ],\n            global\n        }, req?.t);\n    }\n    // eslint-disable-next-line @typescript-eslint/only-throw-error\n    throw error;\n};\n\n//# sourceMappingURL=handleError.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvaGFuZGxlRXJyb3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFDbkMsdUJBQXVCLGdDQUFnQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG9EQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNrYWVsL0RvY3VtZW50cy9nYWxhZHJpbS9yaXNlL2Ntc19yZXNlYXJjaC9wYXlsb2FkL3Jpc2Uvbm9kZV9tb2R1bGVzLy5wbnBtL0BwYXlsb2FkY21zK2RiLW1vbmdvZGJAMy40My4wX3BheWxvYWRAMy40My4wL25vZGVfbW9kdWxlcy9AcGF5bG9hZGNtcy9kYi1tb25nb2RiL2Rpc3QvdXRpbGl0aWVzL2hhbmRsZUVycm9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJ3BheWxvYWQnO1xuZXhwb3J0IGNvbnN0IGhhbmRsZUVycm9yID0gKHsgY29sbGVjdGlvbiwgZXJyb3IsIGdsb2JhbCwgcmVxIH0pPT57XG4gICAgaWYgKCFlcnJvciB8fCB0eXBlb2YgZXJyb3IgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgdW5pcXVlbmVzcyBlcnJvciBmcm9tIE1vbmdvREJcbiAgICBpZiAoJ2NvZGUnIGluIGVycm9yICYmIGVycm9yLmNvZGUgPT09IDExMDAwICYmICdrZXlWYWx1ZScgaW4gZXJyb3IgJiYgZXJyb3Iua2V5VmFsdWUgJiYgdHlwZW9mIGVycm9yLmtleVZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24sXG4gICAgICAgICAgICBlcnJvcnM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcT8udCA/IHJlcS50KCdlcnJvcjp2YWx1ZU11c3RCZVVuaXF1ZScpIDogJ1ZhbHVlIG11c3QgYmUgdW5pcXVlJyxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogT2JqZWN0LmtleXMoZXJyb3Iua2V5VmFsdWUpWzBdID8/ICcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGdsb2JhbFxuICAgICAgICB9LCByZXE/LnQpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L29ubHktdGhyb3ctZXJyb3JcbiAgICB0aHJvdyBlcnJvcjtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhbmRsZUVycm9yLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/handleError.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transform: () => (/* binding */ transform)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"(rsc)/./node_modules/.pnpm/mongoose@8.15.1/node_modules/mongoose/index.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/flattenAllFields.js\");\n/* harmony import */ var payload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! payload */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/utilities/traverseFields.js\");\n/* harmony import */ var payload_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! payload/shared */ \"(rsc)/./node_modules/.pnpm/payload@3.43.0_graphql@16.9.0_typescript@5.5.2/node_modules/payload/dist/fields/config/types.js\");\n\n\n\nfunction isValidRelationObject(value) {\n    return typeof value === 'object' && value !== null && 'relationTo' in value && 'value' in value;\n}\nconst convertRelationshipValue = ({ operation, relatedCollection, validateRelationships, value })=>{\n    const customIDField = relatedCollection.fields.find((field)=>(0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldAffectsData)(field) && field.name === 'id');\n    if (operation === 'read') {\n        if (value instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n            return value.toHexString();\n        }\n        return value;\n    }\n    if (customIDField) {\n        return value;\n    }\n    if (typeof value === 'string') {\n        try {\n            return new mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId(value);\n        } catch (e) {\n            if (validateRelationships) {\n                throw e;\n            }\n            return value;\n        }\n    }\n    return value;\n};\nconst sanitizeRelationship = ({ config, field, locale, operation, ref, validateRelationships, value })=>{\n    if (field.type === 'join') {\n        if (operation === 'read' && value && typeof value === 'object' && 'docs' in value && Array.isArray(value.docs)) {\n            for(let i = 0; i < value.docs.length; i++){\n                const item = value.docs[i];\n                if (item instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n                    value.docs[i] = item.toHexString();\n                } else if (Array.isArray(field.collection) && item) {\n                    // Fields here for polymorphic joins cannot be determinted, JSON.parse needed\n                    value.docs[i] = JSON.parse(JSON.stringify(value.docs[i]));\n                }\n            }\n        }\n        return value;\n    }\n    let relatedCollection;\n    let result = value;\n    const hasManyRelations = typeof field.relationTo !== 'string';\n    if (!hasManyRelations) {\n        relatedCollection = config.collections?.find(({ slug })=>slug === field.relationTo);\n    }\n    if (Array.isArray(value)) {\n        result = value.map((val)=>{\n            // Handle has many - polymorphic\n            if (isValidRelationObject(val)) {\n                const relatedCollectionForSingleValue = config.collections?.find(({ slug })=>slug === val.relationTo);\n                if (relatedCollectionForSingleValue) {\n                    return {\n                        relationTo: val.relationTo,\n                        value: convertRelationshipValue({\n                            operation,\n                            relatedCollection: relatedCollectionForSingleValue,\n                            validateRelationships,\n                            value: val.value\n                        })\n                    };\n                }\n            }\n            if (relatedCollection) {\n                return convertRelationshipValue({\n                    operation,\n                    relatedCollection,\n                    validateRelationships,\n                    value: val\n                });\n            }\n            return val;\n        });\n    } else if (isValidRelationObject(value)) {\n        relatedCollection = config.collections?.find(({ slug })=>slug === value.relationTo);\n        if (relatedCollection) {\n            result = {\n                relationTo: value.relationTo,\n                value: convertRelationshipValue({\n                    operation,\n                    relatedCollection,\n                    validateRelationships,\n                    value: value.value\n                })\n            };\n        }\n    } else if (relatedCollection) {\n        result = convertRelationshipValue({\n            operation,\n            relatedCollection,\n            validateRelationships,\n            value\n        });\n    }\n    if (locale) {\n        ref[locale] = result;\n    } else {\n        ref[field.name] = result;\n    }\n};\nconst sanitizeDate = ({ field, locale, ref, value })=>{\n    if (!value) {\n        return;\n    }\n    if (value instanceof Date) {\n        value = value.toISOString();\n    }\n    if (locale) {\n        ref[locale] = value;\n    } else {\n        ref[field.name] = value;\n    }\n};\nconst stripFields = ({ config, data, fields, reservedKeys = [] })=>{\n    for(const k in data){\n        if (!fields.some((field)=>field.name === k) && !reservedKeys.includes(k)) {\n            delete data[k];\n        }\n    }\n    for (const field of fields){\n        reservedKeys = [];\n        const fieldData = data[field.name];\n        if (!fieldData || typeof fieldData !== 'object') {\n            continue;\n        }\n        if (field.type === 'blocks') {\n            reservedKeys.push('blockType');\n        }\n        if ('flattenedFields' in field || 'blocks' in field) {\n            if (field.localized && config.localization) {\n                for(const localeKey in fieldData){\n                    if (!config.localization.localeCodes.some((code)=>code === localeKey)) {\n                        delete fieldData[localeKey];\n                        continue;\n                    }\n                    const localeData = fieldData[localeKey];\n                    if (!localeData || typeof localeData !== 'object') {\n                        continue;\n                    }\n                    if (field.type === 'array' || field.type === 'blocks') {\n                        if (!Array.isArray(localeData)) {\n                            continue;\n                        }\n                        for (const data of localeData){\n                            let fields = null;\n                            if (field.type === 'array') {\n                                fields = field.flattenedFields;\n                            } else {\n                                let maybeBlock = undefined;\n                                if (field.blockReferences) {\n                                    const maybeBlockReference = field.blockReferences.find((each)=>typeof each === 'object' && each.slug === data.blockType);\n                                    if (maybeBlockReference && typeof maybeBlockReference === 'object') {\n                                        maybeBlock = maybeBlockReference;\n                                    }\n                                }\n                                if (!maybeBlock) {\n                                    maybeBlock = field.blocks.find((each)=>each.slug === data.blockType);\n                                }\n                                if (maybeBlock) {\n                                    fields = maybeBlock.flattenedFields;\n                                }\n                            }\n                            if (!fields) {\n                                continue;\n                            }\n                            stripFields({\n                                config,\n                                data,\n                                fields,\n                                reservedKeys\n                            });\n                        }\n                        continue;\n                    } else {\n                        stripFields({\n                            config,\n                            data: localeData,\n                            fields: field.flattenedFields,\n                            reservedKeys\n                        });\n                    }\n                }\n                continue;\n            }\n            if (field.type === 'array' || field.type === 'blocks') {\n                if (!Array.isArray(fieldData)) {\n                    continue;\n                }\n                for (const data of fieldData){\n                    let fields = null;\n                    if (field.type === 'array') {\n                        fields = field.flattenedFields;\n                    } else {\n                        let maybeBlock = undefined;\n                        if (field.blockReferences) {\n                            const maybeBlockReference = field.blockReferences.find((each)=>typeof each === 'object' && each.slug === data.blockType);\n                            if (maybeBlockReference && typeof maybeBlockReference === 'object') {\n                                maybeBlock = maybeBlockReference;\n                            }\n                        }\n                        if (!maybeBlock) {\n                            maybeBlock = field.blocks.find((each)=>each.slug === data.blockType);\n                        }\n                        if (maybeBlock) {\n                            fields = maybeBlock.flattenedFields;\n                        }\n                    }\n                    if (!fields) {\n                        continue;\n                    }\n                    stripFields({\n                        config,\n                        data,\n                        fields,\n                        reservedKeys\n                    });\n                }\n                continue;\n            } else {\n                stripFields({\n                    config,\n                    data: fieldData,\n                    fields: field.flattenedFields,\n                    reservedKeys\n                });\n            }\n        }\n    }\n};\nconst transform = ({ adapter, data, fields, globalSlug, operation, parentIsLocalized = false, validateRelationships = true })=>{\n    if (Array.isArray(data)) {\n        for (const item of data){\n            transform({\n                adapter,\n                data: item,\n                fields,\n                globalSlug,\n                operation,\n                validateRelationships\n            });\n        }\n        return;\n    }\n    const { payload: { config } } = adapter;\n    if (operation === 'read') {\n        delete data['__v'];\n        data.id = data._id;\n        delete data['_id'];\n        if (data.id instanceof mongoose__WEBPACK_IMPORTED_MODULE_0__.Types.ObjectId) {\n            data.id = data.id.toHexString();\n        }\n        if (!adapter.allowAdditionalKeys) {\n            stripFields({\n                config,\n                data,\n                fields: (0,payload__WEBPACK_IMPORTED_MODULE_2__.flattenAllFields)({\n                    cache: true,\n                    fields\n                }),\n                reservedKeys: [\n                    'id',\n                    'globalType'\n                ]\n            });\n        }\n    }\n    if (operation === 'write' && globalSlug) {\n        data.globalType = globalSlug;\n    }\n    const sanitize = ({ field, ref: incomingRef })=>{\n        if (!incomingRef || typeof incomingRef !== 'object') {\n            return;\n        }\n        const ref = incomingRef;\n        if (field.type === 'date' && operation === 'read' && field.name in ref && ref[field.name]) {\n            if (config.localization && (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n                field,\n                parentIsLocalized\n            })) {\n                const fieldRef = ref[field.name];\n                if (!fieldRef || typeof fieldRef !== 'object') {\n                    return;\n                }\n                for (const locale of config.localization.localeCodes){\n                    sanitizeDate({\n                        field,\n                        locale,\n                        ref: fieldRef,\n                        value: fieldRef[locale]\n                    });\n                }\n            } else {\n                sanitizeDate({\n                    field,\n                    ref,\n                    value: ref[field.name]\n                });\n            }\n        }\n        if (field.type === 'relationship' || field.type === 'upload' || operation === 'read' && field.type === 'join') {\n            if (!ref[field.name]) {\n                return;\n            }\n            // handle localized relationships\n            if (config.localization && (0,payload_shared__WEBPACK_IMPORTED_MODULE_1__.fieldShouldBeLocalized)({\n                field,\n                parentIsLocalized\n            })) {\n                const locales = config.localization.locales;\n                const fieldRef = ref[field.name];\n                if (typeof fieldRef !== 'object') {\n                    return;\n                }\n                for (const { code } of locales){\n                    const value = fieldRef[code];\n                    if (value) {\n                        sanitizeRelationship({\n                            config,\n                            field,\n                            locale: code,\n                            operation,\n                            ref: fieldRef,\n                            validateRelationships,\n                            value\n                        });\n                    }\n                }\n            } else {\n                // handle non-localized relationships\n                sanitizeRelationship({\n                    config,\n                    field,\n                    locale: undefined,\n                    operation,\n                    ref,\n                    validateRelationships,\n                    value: ref[field.name]\n                });\n            }\n        }\n    };\n    (0,payload__WEBPACK_IMPORTED_MODULE_3__.traverseFields)({\n        callback: sanitize,\n        config,\n        fields,\n        fillEmpty: false,\n        parentIsLocalized,\n        ref: data\n    });\n};\n\n//# sourceMappingURL=transform.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHBheWxvYWRjbXMrZGItbW9uZ29kYkAzLjQzLjBfcGF5bG9hZEAzLjQzLjAvbm9kZV9tb2R1bGVzL0BwYXlsb2FkY21zL2RiLW1vbmdvZGIvZGlzdC91dGlsaXRpZXMvdHJhbnNmb3JtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWlDO0FBQzBCO0FBQ2U7QUFDMUU7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDREQUE0RDtBQUNoRyxpRUFBaUUsZ0VBQWdCO0FBQ2pGO0FBQ0EsNkJBQTZCLDJDQUFLO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyQ0FBSztBQUM1QixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxxRUFBcUU7QUFDckc7QUFDQTtBQUNBLDJCQUEyQix1QkFBdUI7QUFDbEQ7QUFDQSxvQ0FBb0MsMkNBQUs7QUFDekM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxNQUFNO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRkFBb0YsTUFBTTtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsU0FBUztBQUNULE1BQU07QUFDTix3REFBd0QsTUFBTTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJCQUEyQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5Q0FBeUM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ08scUJBQXFCLHVHQUF1RztBQUNuSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXLFdBQVc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMkNBQUs7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlEQUFnQjtBQUN4QztBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUJBQXlCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsc0VBQXNCO0FBQzdEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsc0VBQXNCO0FBQzdEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixPQUFPO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLElBQUksdURBQWM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvbWlja2FlbC9Eb2N1bWVudHMvZ2FsYWRyaW0vcmlzZS9jbXNfcmVzZWFyY2gvcGF5bG9hZC9yaXNlL25vZGVfbW9kdWxlcy8ucG5wbS9AcGF5bG9hZGNtcytkYi1tb25nb2RiQDMuNDMuMF9wYXlsb2FkQDMuNDMuMC9ub2RlX21vZHVsZXMvQHBheWxvYWRjbXMvZGItbW9uZ29kYi9kaXN0L3V0aWxpdGllcy90cmFuc2Zvcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHlwZXMgfSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgeyBmbGF0dGVuQWxsRmllbGRzLCB0cmF2ZXJzZUZpZWxkcyB9IGZyb20gJ3BheWxvYWQnO1xuaW1wb3J0IHsgZmllbGRBZmZlY3RzRGF0YSwgZmllbGRTaG91bGRCZUxvY2FsaXplZCB9IGZyb20gJ3BheWxvYWQvc2hhcmVkJztcbmZ1bmN0aW9uIGlzVmFsaWRSZWxhdGlvbk9iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsICYmICdyZWxhdGlvblRvJyBpbiB2YWx1ZSAmJiAndmFsdWUnIGluIHZhbHVlO1xufVxuY29uc3QgY29udmVydFJlbGF0aW9uc2hpcFZhbHVlID0gKHsgb3BlcmF0aW9uLCByZWxhdGVkQ29sbGVjdGlvbiwgdmFsaWRhdGVSZWxhdGlvbnNoaXBzLCB2YWx1ZSB9KT0+e1xuICAgIGNvbnN0IGN1c3RvbUlERmllbGQgPSByZWxhdGVkQ29sbGVjdGlvbi5maWVsZHMuZmluZCgoZmllbGQpPT5maWVsZEFmZmVjdHNEYXRhKGZpZWxkKSAmJiBmaWVsZC5uYW1lID09PSAnaWQnKTtcbiAgICBpZiAob3BlcmF0aW9uID09PSAncmVhZCcpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgVHlwZXMuT2JqZWN0SWQpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b0hleFN0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKGN1c3RvbUlERmllbGQpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUeXBlcy5PYmplY3RJZCh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZVJlbGF0aW9uc2hpcHMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn07XG5jb25zdCBzYW5pdGl6ZVJlbGF0aW9uc2hpcCA9ICh7IGNvbmZpZywgZmllbGQsIGxvY2FsZSwgb3BlcmF0aW9uLCByZWYsIHZhbGlkYXRlUmVsYXRpb25zaGlwcywgdmFsdWUgfSk9PntcbiAgICBpZiAoZmllbGQudHlwZSA9PT0gJ2pvaW4nKSB7XG4gICAgICAgIGlmIChvcGVyYXRpb24gPT09ICdyZWFkJyAmJiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmICdkb2NzJyBpbiB2YWx1ZSAmJiBBcnJheS5pc0FycmF5KHZhbHVlLmRvY3MpKSB7XG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdmFsdWUuZG9jcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHZhbHVlLmRvY3NbaV07XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBUeXBlcy5PYmplY3RJZCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5kb2NzW2ldID0gaXRlbS50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShmaWVsZC5jb2xsZWN0aW9uKSAmJiBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpZWxkcyBoZXJlIGZvciBwb2x5bW9ycGhpYyBqb2lucyBjYW5ub3QgYmUgZGV0ZXJtaW50ZWQsIEpTT04ucGFyc2UgbmVlZGVkXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLmRvY3NbaV0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbHVlLmRvY3NbaV0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBsZXQgcmVsYXRlZENvbGxlY3Rpb247XG4gICAgbGV0IHJlc3VsdCA9IHZhbHVlO1xuICAgIGNvbnN0IGhhc01hbnlSZWxhdGlvbnMgPSB0eXBlb2YgZmllbGQucmVsYXRpb25UbyAhPT0gJ3N0cmluZyc7XG4gICAgaWYgKCFoYXNNYW55UmVsYXRpb25zKSB7XG4gICAgICAgIHJlbGF0ZWRDb2xsZWN0aW9uID0gY29uZmlnLmNvbGxlY3Rpb25zPy5maW5kKCh7IHNsdWcgfSk9PnNsdWcgPT09IGZpZWxkLnJlbGF0aW9uVG8pO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmVzdWx0ID0gdmFsdWUubWFwKCh2YWwpPT57XG4gICAgICAgICAgICAvLyBIYW5kbGUgaGFzIG1hbnkgLSBwb2x5bW9ycGhpY1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRSZWxhdGlvbk9iamVjdCh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVsYXRlZENvbGxlY3Rpb25Gb3JTaW5nbGVWYWx1ZSA9IGNvbmZpZy5jb2xsZWN0aW9ucz8uZmluZCgoeyBzbHVnIH0pPT5zbHVnID09PSB2YWwucmVsYXRpb25Ubyk7XG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0ZWRDb2xsZWN0aW9uRm9yU2luZ2xlVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aW9uVG86IHZhbC5yZWxhdGlvblRvLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbnZlcnRSZWxhdGlvbnNoaXBWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWRDb2xsZWN0aW9uOiByZWxhdGVkQ29sbGVjdGlvbkZvclNpbmdsZVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlUmVsYXRpb25zaGlwcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZWxhdGVkQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb252ZXJ0UmVsYXRpb25zaGlwVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHJlbGF0ZWRDb2xsZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZVJlbGF0aW9uc2hpcHMsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaXNWYWxpZFJlbGF0aW9uT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZWxhdGVkQ29sbGVjdGlvbiA9IGNvbmZpZy5jb2xsZWN0aW9ucz8uZmluZCgoeyBzbHVnIH0pPT5zbHVnID09PSB2YWx1ZS5yZWxhdGlvblRvKTtcbiAgICAgICAgaWYgKHJlbGF0ZWRDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgcmVsYXRpb25UbzogdmFsdWUucmVsYXRpb25UbyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogY29udmVydFJlbGF0aW9uc2hpcFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICByZWxhdGVkQ29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVSZWxhdGlvbnNoaXBzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmVsYXRlZENvbGxlY3Rpb24pIHtcbiAgICAgICAgcmVzdWx0ID0gY29udmVydFJlbGF0aW9uc2hpcFZhbHVlKHtcbiAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgIHJlbGF0ZWRDb2xsZWN0aW9uLFxuICAgICAgICAgICAgdmFsaWRhdGVSZWxhdGlvbnNoaXBzLFxuICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChsb2NhbGUpIHtcbiAgICAgICAgcmVmW2xvY2FsZV0gPSByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVmW2ZpZWxkLm5hbWVdID0gcmVzdWx0O1xuICAgIH1cbn07XG5jb25zdCBzYW5pdGl6ZURhdGUgPSAoeyBmaWVsZCwgbG9jYWxlLCByZWYsIHZhbHVlIH0pPT57XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0lTT1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAobG9jYWxlKSB7XG4gICAgICAgIHJlZltsb2NhbGVdID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVmW2ZpZWxkLm5hbWVdID0gdmFsdWU7XG4gICAgfVxufTtcbmNvbnN0IHN0cmlwRmllbGRzID0gKHsgY29uZmlnLCBkYXRhLCBmaWVsZHMsIHJlc2VydmVkS2V5cyA9IFtdIH0pPT57XG4gICAgZm9yKGNvbnN0IGsgaW4gZGF0YSl7XG4gICAgICAgIGlmICghZmllbGRzLnNvbWUoKGZpZWxkKT0+ZmllbGQubmFtZSA9PT0gaykgJiYgIXJlc2VydmVkS2V5cy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgZGVsZXRlIGRhdGFba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZHMpe1xuICAgICAgICByZXNlcnZlZEtleXMgPSBbXTtcbiAgICAgICAgY29uc3QgZmllbGREYXRhID0gZGF0YVtmaWVsZC5uYW1lXTtcbiAgICAgICAgaWYgKCFmaWVsZERhdGEgfHwgdHlwZW9mIGZpZWxkRGF0YSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnYmxvY2tzJykge1xuICAgICAgICAgICAgcmVzZXJ2ZWRLZXlzLnB1c2goJ2Jsb2NrVHlwZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnZmxhdHRlbmVkRmllbGRzJyBpbiBmaWVsZCB8fCAnYmxvY2tzJyBpbiBmaWVsZCkge1xuICAgICAgICAgICAgaWYgKGZpZWxkLmxvY2FsaXplZCAmJiBjb25maWcubG9jYWxpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgZm9yKGNvbnN0IGxvY2FsZUtleSBpbiBmaWVsZERhdGEpe1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy5sb2NhbGl6YXRpb24ubG9jYWxlQ29kZXMuc29tZSgoY29kZSk9PmNvZGUgPT09IGxvY2FsZUtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmaWVsZERhdGFbbG9jYWxlS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsZURhdGEgPSBmaWVsZERhdGFbbG9jYWxlS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2NhbGVEYXRhIHx8IHR5cGVvZiBsb2NhbGVEYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdhcnJheScgfHwgZmllbGQudHlwZSA9PT0gJ2Jsb2NrcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShsb2NhbGVEYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhIG9mIGxvY2FsZURhdGEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWVsZHMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnYXJyYXknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkLmZsYXR0ZW5lZEZpZWxkcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF5YmVCbG9jayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmJsb2NrUmVmZXJlbmNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF5YmVCbG9ja1JlZmVyZW5jZSA9IGZpZWxkLmJsb2NrUmVmZXJlbmNlcy5maW5kKChlYWNoKT0+dHlwZW9mIGVhY2ggPT09ICdvYmplY3QnICYmIGVhY2guc2x1ZyA9PT0gZGF0YS5ibG9ja1R5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heWJlQmxvY2tSZWZlcmVuY2UgJiYgdHlwZW9mIG1heWJlQmxvY2tSZWZlcmVuY2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVCbG9jayA9IG1heWJlQmxvY2tSZWZlcmVuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXliZUJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZUJsb2NrID0gZmllbGQuYmxvY2tzLmZpbmQoKGVhY2gpPT5lYWNoLnNsdWcgPT09IGRhdGEuYmxvY2tUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVCbG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzID0gbWF5YmVCbG9jay5mbGF0dGVuZWRGaWVsZHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWVsZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmlwRmllbGRzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2VydmVkS2V5c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpcEZpZWxkcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGxvY2FsZURhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBmaWVsZC5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXJ2ZWRLZXlzXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSAnYXJyYXknIHx8IGZpZWxkLnR5cGUgPT09ICdibG9ja3MnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGZpZWxkRGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YSBvZiBmaWVsZERhdGEpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmllbGRzID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdhcnJheScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkLmZsYXR0ZW5lZEZpZWxkcztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXliZUJsb2NrID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmJsb2NrUmVmZXJlbmNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlQmxvY2tSZWZlcmVuY2UgPSBmaWVsZC5ibG9ja1JlZmVyZW5jZXMuZmluZCgoZWFjaCk9PnR5cGVvZiBlYWNoID09PSAnb2JqZWN0JyAmJiBlYWNoLnNsdWcgPT09IGRhdGEuYmxvY2tUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVCbG9ja1JlZmVyZW5jZSAmJiB0eXBlb2YgbWF5YmVCbG9ja1JlZmVyZW5jZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVCbG9jayA9IG1heWJlQmxvY2tSZWZlcmVuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXliZUJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF5YmVCbG9jayA9IGZpZWxkLmJsb2Nrcy5maW5kKChlYWNoKT0+ZWFjaC5zbHVnID09PSBkYXRhLmJsb2NrVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF5YmVCbG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IG1heWJlQmxvY2suZmxhdHRlbmVkRmllbGRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdHJpcEZpZWxkcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXJ2ZWRLZXlzXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyaXBGaWVsZHMoe1xuICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGZpZWxkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBmaWVsZC5mbGF0dGVuZWRGaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgIHJlc2VydmVkS2V5c1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm0gPSAoeyBhZGFwdGVyLCBkYXRhLCBmaWVsZHMsIGdsb2JhbFNsdWcsIG9wZXJhdGlvbiwgcGFyZW50SXNMb2NhbGl6ZWQgPSBmYWxzZSwgdmFsaWRhdGVSZWxhdGlvbnNoaXBzID0gdHJ1ZSB9KT0+e1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhKXtcbiAgICAgICAgICAgIHRyYW5zZm9ybSh7XG4gICAgICAgICAgICAgICAgYWRhcHRlcixcbiAgICAgICAgICAgICAgICBkYXRhOiBpdGVtLFxuICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICBnbG9iYWxTbHVnLFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZVJlbGF0aW9uc2hpcHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBwYXlsb2FkOiB7IGNvbmZpZyB9IH0gPSBhZGFwdGVyO1xuICAgIGlmIChvcGVyYXRpb24gPT09ICdyZWFkJykge1xuICAgICAgICBkZWxldGUgZGF0YVsnX192J107XG4gICAgICAgIGRhdGEuaWQgPSBkYXRhLl9pZDtcbiAgICAgICAgZGVsZXRlIGRhdGFbJ19pZCddO1xuICAgICAgICBpZiAoZGF0YS5pZCBpbnN0YW5jZW9mIFR5cGVzLk9iamVjdElkKSB7XG4gICAgICAgICAgICBkYXRhLmlkID0gZGF0YS5pZC50b0hleFN0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYWRhcHRlci5hbGxvd0FkZGl0aW9uYWxLZXlzKSB7XG4gICAgICAgICAgICBzdHJpcEZpZWxkcyh7XG4gICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBmbGF0dGVuQWxsRmllbGRzKHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkc1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHJlc2VydmVkS2V5czogW1xuICAgICAgICAgICAgICAgICAgICAnaWQnLFxuICAgICAgICAgICAgICAgICAgICAnZ2xvYmFsVHlwZSdcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3BlcmF0aW9uID09PSAnd3JpdGUnICYmIGdsb2JhbFNsdWcpIHtcbiAgICAgICAgZGF0YS5nbG9iYWxUeXBlID0gZ2xvYmFsU2x1ZztcbiAgICB9XG4gICAgY29uc3Qgc2FuaXRpemUgPSAoeyBmaWVsZCwgcmVmOiBpbmNvbWluZ1JlZiB9KT0+e1xuICAgICAgICBpZiAoIWluY29taW5nUmVmIHx8IHR5cGVvZiBpbmNvbWluZ1JlZiAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWYgPSBpbmNvbWluZ1JlZjtcbiAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdkYXRlJyAmJiBvcGVyYXRpb24gPT09ICdyZWFkJyAmJiBmaWVsZC5uYW1lIGluIHJlZiAmJiByZWZbZmllbGQubmFtZV0pIHtcbiAgICAgICAgICAgIGlmIChjb25maWcubG9jYWxpemF0aW9uICYmIGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkUmVmID0gcmVmW2ZpZWxkLm5hbWVdO1xuICAgICAgICAgICAgICAgIGlmICghZmllbGRSZWYgfHwgdHlwZW9mIGZpZWxkUmVmICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbG9jYWxlIG9mIGNvbmZpZy5sb2NhbGl6YXRpb24ubG9jYWxlQ29kZXMpe1xuICAgICAgICAgICAgICAgICAgICBzYW5pdGl6ZURhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6IGZpZWxkUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZpZWxkUmVmW2xvY2FsZV1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzYW5pdGl6ZURhdGUoe1xuICAgICAgICAgICAgICAgICAgICBmaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgcmVmLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVmW2ZpZWxkLm5hbWVdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09ICdyZWxhdGlvbnNoaXAnIHx8IGZpZWxkLnR5cGUgPT09ICd1cGxvYWQnIHx8IG9wZXJhdGlvbiA9PT0gJ3JlYWQnICYmIGZpZWxkLnR5cGUgPT09ICdqb2luJykge1xuICAgICAgICAgICAgaWYgKCFyZWZbZmllbGQubmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBoYW5kbGUgbG9jYWxpemVkIHJlbGF0aW9uc2hpcHNcbiAgICAgICAgICAgIGlmIChjb25maWcubG9jYWxpemF0aW9uICYmIGZpZWxkU2hvdWxkQmVMb2NhbGl6ZWQoe1xuICAgICAgICAgICAgICAgIGZpZWxkLFxuICAgICAgICAgICAgICAgIHBhcmVudElzTG9jYWxpemVkXG4gICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsZXMgPSBjb25maWcubG9jYWxpemF0aW9uLmxvY2FsZXM7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRSZWYgPSByZWZbZmllbGQubmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWVsZFJlZiAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgY29kZSB9IG9mIGxvY2FsZXMpe1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGZpZWxkUmVmW2NvZGVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbml0aXplUmVsYXRpb25zaGlwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IGZpZWxkUmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlUmVsYXRpb25zaGlwcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBub24tbG9jYWxpemVkIHJlbGF0aW9uc2hpcHNcbiAgICAgICAgICAgICAgICBzYW5pdGl6ZVJlbGF0aW9uc2hpcCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgZmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHJlZixcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVSZWxhdGlvbnNoaXBzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVmW2ZpZWxkLm5hbWVdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRyYXZlcnNlRmllbGRzKHtcbiAgICAgICAgY2FsbGJhY2s6IHNhbml0aXplLFxuICAgICAgICBjb25maWcsXG4gICAgICAgIGZpZWxkcyxcbiAgICAgICAgZmlsbEVtcHR5OiBmYWxzZSxcbiAgICAgICAgcGFyZW50SXNMb2NhbGl6ZWQsXG4gICAgICAgIHJlZjogZGF0YVxuICAgIH0pO1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@payloadcms+db-mongodb@3.43.0_payload@3.43.0/node_modules/@payloadcms/db-mongodb/dist/utilities/transform.js\n");

/***/ })

};
;